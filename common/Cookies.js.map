{"version":3,"sources":["../src/common/Cookies.js"],"names":["Cookies","key","window","getCookie","document","cookie","replace","arrCookie","split","map","cookieArr","_cookie","req","get","value","time","domain","expires","domains","cookies","date","Date","setTime","getTime","toGMTString"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;IAKqBA,O;;;;;;;;;AAEnB;;;wBAGIC,G,EAAK;AACP,UAAI,OAAOC,MAAP,KAAkB,WAAtB,EAAmC;AACnC,UAAMC,YAAYC,SAASC,MAAT,CAAgBC,OAAhB,CAAwB,MAAxB,EAAgC,EAAhC,CAAlB,CAFO,CAEkD;AACzD,UAAMC,YAAYJ,UAAUK,KAAV,CAAgB,GAAhB,CAAlB,CAHO,CAGmC;AAC1C,UAAIH,SAAS,EAAb,CAJO,CAIa;AACpBE,gBAAUE,GAAV,CAAc,mBAAW;AAAK;AAC5B,YAAMC,YAAYC,QAAQH,KAAR,CAAc,GAAd,CAAlB;AACA,YAAIE,UAAU,CAAV,MAAiBT,GAArB,EAA0B;AACxBI,mBAASK,UAAU,CAAV,CAAT;AACD;AACF,OALD;AAMA,aAAOL,MAAP;AACD;;;kCAEaJ,G,EAAKW,G,EAAK;AACtB,UAAI,OAAOV,MAAP,KAAkB,WAAtB,EAAmC;AACnC,UAAMC,YAAYS,IAAIC,GAAJ,CAAQ,QAAR,CAAlB,CAFsB,CAEiB;AACvC,UAAMN,YAAYJ,UAAUK,KAAV,CAAgB,GAAhB,CAAlB,CAHsB,CAGoB;AAC1C,UAAIH,SAAS,EAAb,CAJsB,CAIF;AACpBE,gBAAUE,GAAV,CAAc,mBAAW;AAAK;AAC5B,YAAMC,YAAYC,QAAQH,KAAR,CAAc,GAAd,CAAlB;AACA,YAAIE,UAAU,CAAV,MAAiBT,GAArB,EAA0B;AACxBI,mBAASK,UAAU,CAAV,CAAT;AACD;AACF,OALD;AAMA,aAAOL,MAAP;AACD;;AAED;;;;;;;;wBAKIJ,G,EAAKa,K,EAAOC,I,EAAMC,M,EAAQ;AAC5B,UAAI,OAAOd,MAAP,KAAkB,WAAtB,EAAmC;AACnC,UAAIe,UAAU,EAAd;AACA,UAAIC,UAAU,EAAd;AACA,UAAIC,UAAalB,GAAb,SAAoBa,KAApB,MAAJ;AACA,UAAIC,IAAJ,EAAU;AACR,YAAMK,OAAO,IAAIC,IAAJ,EAAb;AACAD,aAAKE,OAAL,CAAaF,KAAKG,OAAL,KAAiBR,OAAO,EAAP,GAAY,IAAZ,GAAmB,IAAjD;AACAE,+BAAqBG,KAAKI,WAAL,EAArB;AACAL,mBAAWF,OAAX;AACD;AACD,UAAID,MAAJ,EAAY;AACVE,uCAA6BF,MAA7B;AACAG,mBAAWD,OAAX;AACD;AACDd,eAASC,MAAT,GAAkBc,OAAlB;AACD;;AAED;;;;;;;wBAIIlB,G,EAAKe,M,EAAQ;AACf,UAAI,OAAOd,MAAP,KAAkB,WAAtB,EAAmC;AACnC,UAAMkB,OAAO,IAAIC,IAAJ,EAAb;AACA,UAAIH,UAAU,EAAd;AACAE,WAAKE,OAAL,CAAaF,KAAKG,OAAL,KAAiB,IAA9B;AACA,UAAIP,MAAJ,EAAY;AACVE,wCAA8BF,MAA9B;AACD;AACDZ,eAASC,MAAT,GAAqBJ,GAArB,sBAAyCmB,KAAKI,WAAL,EAAzC,GAA8DN,OAA9D;AACD;;;;;;;;;;kBArEkBlB,O;;;;;;;;;;;;0BAAAA,O","file":"Cookies.js","sourcesContent":["/*\r\n * @author:      冯炎\r\n * @update:      20171201\r\n * @description: 操作cookie,提供get和set、del方法\r\n * */\r\nexport default class Cookies {\r\n\r\n  /*\r\n   * 通过key值获取cookie\r\n   * */\r\n  get(key) {\r\n    if (typeof window === 'undefined') return;\r\n    const getCookie = document.cookie.replace(/[ ]/g, '');   // 获取cookie，去空格\r\n    const arrCookie = getCookie.split(';');   //  以;分号做分隔生成数组\r\n    let cookie = '';    //  获取cookie\r\n    arrCookie.map(_cookie => {    // 遍历cookie，获取指定的cookie值，并返回\r\n      const cookieArr = _cookie.split('=');\r\n      if (cookieArr[0] === key) {\r\n        cookie = cookieArr[1];\r\n      }\r\n    });\r\n    return cookie;\r\n  }\r\n\r\n  getFromServer(key, req) {\r\n    if (typeof window === 'undefined') return;\r\n    const getCookie = req.get('cookie');   // 获取cookie，去空格\r\n    const arrCookie = getCookie.split(';');   //  以;分号做分隔生成数组\r\n    let cookie = '';    //  获取cookie\r\n    arrCookie.map(_cookie => {    // 遍历cookie，获取指定的cookie值，并返回\r\n      const cookieArr = _cookie.split('=');\r\n      if (cookieArr[0] === key) {\r\n        cookie = cookieArr[1];\r\n      }\r\n    });\r\n    return cookie;\r\n  }\r\n\r\n  /*\r\n   * 设置cookie\r\n   * time有效时间为选填项\r\n   * domain归属域为选填项\r\n   * */\r\n  set(key, value, time, domain) {\r\n    if (typeof window === 'undefined') return;\r\n    let expires = '';\r\n    let domains = '';\r\n    let cookies = `${key}=${value};`;\r\n    if (time) {\r\n      const date = new Date();\r\n      date.setTime(date.getTime() + time * 24 * 3600 * 1000);\r\n      expires = `expires=${date.toGMTString()};`;\r\n      cookies += expires;\r\n    }\r\n    if (domain) {\r\n      domains = `path=/;domain = ${domain};`;\r\n      cookies += domains;\r\n    }\r\n    document.cookie = cookies;\r\n  }\r\n\r\n  /*\r\n   * 通过设置cookie的有效时间小于当前，删除cookie\r\n   * domain为先填项，如果设置了domain，则删除cookie时需要传入domain\r\n   * */\r\n  del(key, domain) {\r\n    if (typeof window === 'undefined') return;\r\n    const date = new Date();\r\n    let domains = '';\r\n    date.setTime(date.getTime() - 1000);\r\n    if (domain) {\r\n      domains = `;path=/;domain = ${domain};`;\r\n    }\r\n    document.cookie = `${key}=del;expires =${date.toGMTString()}${domains}`;\r\n  }\r\n}\r\n"]}