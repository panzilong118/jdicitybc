{"version":3,"sources":["../../src/components/SideCustomer/SideCustomer.js"],"names":["SideCustomer","props","content","handleCreateShangQiao","state","customUrl","warning","iWidth","iHeight","iTop","window","screen","availHeight","iLeft","availWidth","open","scrollTop","feedbackUrl","client","ApiClient","get","then","res","code","data","map","_item","domainType","domain","setState","err","document","addEventListener","onChange","pathname","location","trim","params","customType","siteUrl","body","Component"],"mappings":"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","file":"SideCustomer.js","sourcesContent":["/**\r\n * Created by fanwb on 2018/6/22.\r\n */\r\nimport React,{Component} from 'react';\r\nimport {Icon,message} from 'jdcloudui';\r\nimport './style/common.css';\r\nimport ApiClient from '../../apiClient/ApiClient';\r\nexport default class SideCustomer extends Component {\r\n  constructor(props, content) {\r\n    super(props, content);\r\n    this.state = {\r\n        scrollTop: 0,\r\n        feedbackUrl: '',\r\n        customUrl:'',\r\n\r\n    };\r\n  }\r\n  componentWillMount() {\r\n    var client = new ApiClient();\r\n    client.get('/passport/logout')\r\n      .then(\r\n        (res) => {\r\n          if(res.code == 0 && res.data) {\r\n            res.data.map(_item => {\r\n              if (_item.domainType == 1) {\r\n                let feedbackUrl = `http://${_item.domain}/website-view/user-feedback`;\r\n                this.setState({feedbackUrl: feedbackUrl});\r\n              }\r\n            });\r\n          }\r\n        },\r\n        (err) => {\r\n        }\r\n      );\r\n  }\r\n\r\n  componentDidMount() {\r\n    var client = new ApiClient();\r\n    document.addEventListener('scroll', ()=>this.onChange(), true);\r\n    let pathname =(window.location.pathname).trim();\r\n      //获取平台当前启用客服，提示无启用客服\r\n      client.get('/platform/shop/custom/queryCustomConfigBySiteUrl',{params:{customType: 1,siteUrl:pathname}}).then((res)=>{\r\n        if(res.code == 0&&res.data){\r\n          this.setState({\r\n              customUrl:res.data.customUrl\r\n            });\r\n        }else{\r\n            // message.warning('该站点没有设置客服，请到运营后台设置对应的客服连接！');\r\n        }\r\n      },(err)=>{})\r\n  }\r\n  toTop() {\r\n    document.body.scrollTop = 0;\r\n  }\r\n  onChange() {\r\n    this.setState({scrollTop: document.body.scrollTop});\r\n  }\r\n  handleCreateShangQiao=()=> {\r\n    if(!this.state.customUrl){\r\n      message.warning('该站点没有设置客服，请到运营后台设置对应的客服连接！');\r\n    }else{\r\n      var iWidth = 580;\r\n      var iHeight = 510;\r\n      var iTop = (window.screen.availHeight - 30 - iHeight) / 2;\r\n      var iLeft = (window.screen.availWidth - 10 - iWidth) / 2;\r\n      window.open (this.state.customUrl, \"shangqiao\", `height=510, width=580, toolbar =no, menubar=no, scrollbars=no, resizable=no, location=no, status=no, top=${iTop},left=${iLeft}`);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n\r\n        <div className=\"box-fixedbar\">\r\n            <div className=\"m-fixedbar\">\r\n                <div className=\"fixedbar-bd\">\r\n                    <div className=\"fixedbar-item\">\r\n                        <a className=\"sidecart\" href=\"/website-view/cart\" target=\"_blank\">\r\n                            <span className=\"goods-num\"></span>\r\n                            <i className=\"iconfont\">&#xe7ea;</i>\r\n                            <span className=\"fixedbar-text\">进货车</span>\r\n                        </a>\r\n                    </div>\r\n                    <div className=\"fixedbar-item js-qrcode\">\r\n                        <a href=\"javascript:;\"><i className=\"iconfont\">&#xe6dd;</i><span className=\"fixedbar-text\">扫码优惠</span></a>\r\n                        { /* <!-- 二维码弹层 -->\r\n        {% if qrcode.code == 0 && qrcode.data && qrcode.data.weixinDisplay ==1 || qrcode.code == 0 && qrcode.data && qrcode.data.appDownDisplay ==1 %}\r\n        {% set qrcodeurl = qrcode.data %}\r\n        <div className=\"hnc-mobile-pop hnc-mobile-pop-right\">\r\n                <span className=\"arrow-rig\">\r\n                    <span className=\"right\"></span>\r\n                </span>\r\n          {% if qrcodeurl.weixinDisplay == 1 %}\r\n          <div className=\"mobile-pop-item f-cb item-wx\">\r\n            <div className=\"mobile_pop_qrcode\">\r\n              <img src=\"{{qrcodeurl.weixinCodeUrl}}\" width=\"80\" height=\"80\">\r\n            </div>\r\n            <div className=\"mobile_pop_info\">\r\n              <p>微信扫一扫</p>\r\n              <p>关注华南城网</p>\r\n              <p>微信商城</p>\r\n            </div>\r\n          </div>\r\n          {% endif %}\r\n          {% if qrcodeurl.appDownDisplay == 1 %}\r\n          <div className=\"mobile-pop-item f-cb\">\r\n            <div className=\"mobile_pop_qrcode\">\r\n              <img src=\"{{qrcodeurl.appDownCodeUrl}}\" width=\"80\" height=\"80\">\r\n            </div>\r\n            <div className=\"mobile_pop_info\">\r\n              <p>扫描二维码</p>\r\n              <p>立即下载APP</p>\r\n            </div>\r\n          </div>\r\n          {% endif %}\r\n        </div>\r\n      {% endif %}*/}\r\n                    </div>\r\n                    <div className=\"fixedbar-item js-kefu-item\" id=\"box-js-kefu-item\" onClick={this.handleCreateShangQiao}>\r\n                        <a href=\"javascript:;\" target=\"_blank\"><i className=\"iconfont\">&#xe7ed;</i><span className=\"fixedbar-text\" >联系客服</span></a>\r\n                    </div>\r\n                    <div className=\"fixedbar-show\">\r\n                        <div className=\"fixedbar-item\">\r\n                            <a href=\"javascript:;\"><i className=\"iconfont\">&#xe7ec;</i><span className=\"fixedbar-text\">商品对比</span></a>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"fixedbar-item\">\r\n                        <a href={this.state.feedbackUrl} target=\"_blank\"><i className=\"iconfont\">&#xe7eb;</i><span className=\"fixedbar-text\">反馈</span></a>\r\n                    </div>\r\n                </div>\r\n                <div className=\"fixedbar-ft\">\r\n                    <div className=\"fixedbar-item fixedbar-gotop\">\r\n                        <a href=\"#\"><i className=\"iconfont\">&#xe62f;</i></a>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n\r\n\r\n    );\r\n  }\r\n}\r\n"]}