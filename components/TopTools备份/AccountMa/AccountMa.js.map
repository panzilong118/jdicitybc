{"version":3,"sources":["..\\..\\..\\src\\components\\TopTools备份\\AccountMa\\AccountMa.js"],"names":["cookie","Cookies","AccountMa","getCompanyList","getCompanyListAction","dispatch","props","state","options","selectedTitle","then","rs","code","data","length","companyIdCookie","get","isCompanyIdInCookie","setState","msg","indexOf","set","companyId","doma","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;kBAAA;;;;;;AAMA;;;AAMA;;;AALA;;;;AAEA;;AACA;;AAGA;;AACA;;;;AACA;;;;;;AACA,IAAMA,SAAS,IAAIC,iBAAJ,EAAf;;IAMqBC,S,WAJpB,yBACC;AAAA,SAAUC,2BAAV;AAAA,CADD,EAEC;AAAA,SAAY,+BAAmB,EAACC,6DAAD,EAAnB,EAA2CC,QAA3C,CAAZ;AAAA,CAFD,C;;;AAKC,qBAAYC,KAAZ,EAAmB;AAAA;;AAAA,4IACXA,KADW;;AAEjB,UAAKC,KAAL,GAAa;AACXC,eAAS,EADE;AAEXC,qBAAe;AAFJ,KAAb;AAFiB;AAMlB;;;;yCAEoB;AAAA;;AACnB,WAAKH,KAAL,CAAWF,oBAAX,GAAkCM,IAAlC,CAAuC,cAAM;AAC3C,YAAIC,GAAGC,IAAH,IAAW,CAAf,EAAkB;AAChB,cAAID,GAAGE,IAAH,IAAWF,GAAGE,IAAH,CAAQC,MAAR,GAAiB,CAAhC,EAAmC;AACjC;AACA,mBAAKC,eAAL,GAAuBf,OAAOgB,GAAP,CAAW,WAAX,CAAvB;AACA;AACA,mBAAKC,mBAAL,CAAyBN,GAAGE,IAA5B;AACD;AACF,SAPD,MAOO;AACL,iBAAKK,QAAL,CAAc,EAACT,eAAeE,GAAGQ,GAAnB,EAAd;AACD;AACF,OAXD;AAYD;;AAED;;;;;;wCAGoBN,I,EAAM;AACxB;AACA;AACA,UAAI,KAAKE,eAAL,IAAwB,yBAAeF,IAAf,EAAqBO,OAArB,CAA6B,KAAKL,eAAlC,MAAuD,CAAC,CAAhF,IAAqF,CAAC,KAAKA,eAA/F,EAAgH;AAC9Gf,eAAOqB,GAAP,CAAW,WAAX,EAAwBR,KAAK,CAAL,EAAQS,SAAhC,EAA2C,EAA3C,EAA+C,KAAKhB,KAAL,CAAWiB,IAA1D;AACD;AACF;;;6BAEQ;AACP,aACE,uCAAK,WAAU,MAAf,GADF;AAKD;;;EAzCoCC,gB;kBAAlBtB,S","file":"AccountMa.js","sourcesContent":["/*\r\n * @author:      冯炎\r\n * @update:      20171201\r\n * @description: 账号管理下使用，查询公司信息，但不显示。用于控制“商城首页，用户名，购物车，我的订单，采购商中心，消息，logo”等按钮点击时如果没有注册公司刚弹出提示信息\r\n * */\r\n\r\n/* ***********  基础组件  ************ */\r\nimport React, {Component} from 'react';\r\nimport {Icon} from 'jdcloudui';\r\nimport {bindActionCreators} from 'redux';\r\nimport {connect} from 'react-redux';\r\n\r\n/* ***********  自定义组件  ************ */\r\nimport '../CompanySelect/style/style.css';\r\nimport getCompanyList, {getCompanyListAction} from '../CompanySelect/redux/companyList_redux';\r\nimport Cookies from '../../../common/Cookies';\r\nconst cookie = new Cookies();\r\n\r\n@connect(\r\n  state => (getCompanyList),\r\n  dispatch => bindActionCreators({getCompanyListAction}, dispatch)\r\n)\r\nexport default class AccountMa extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      options: [],\r\n      selectedTitle: '请选择您要访问的公司',\r\n    };\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.props.getCompanyListAction().then(rs => {\r\n      if (rs.code == 0) {\r\n        if (rs.data && rs.data.length > 0) {\r\n          // 设置cookie\r\n          this.companyIdCookie = cookie.get('companyId');\r\n          // 根据接口返回数据渲染下拉列表\r\n          this.isCompanyIdInCookie(rs.data);\r\n        }\r\n      } else {\r\n        this.setState({selectedTitle: rs.msg});\r\n      }\r\n    });\r\n  }\r\n\r\n  /*\r\n   * 判断cookie是否有companyId\r\n   * */\r\n  isCompanyIdInCookie(data) {\r\n    // 如果cookie里有companyId，但当前登陆账号里没相同的companyId则将当前账号下的第1个companyId设置到cookie里\r\n    // 刷新当前页面，重新发送带有新companyId的ajax请求\r\n    if (this.companyIdCookie && JSON.stringify(data).indexOf(this.companyIdCookie) === -1 || !this.companyIdCookie) {\r\n      cookie.set('companyId', data[0].companyId, '', this.props.doma);\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"f-dn\">\r\n        {/*账号管理下使用，查询公司信息，但不显示。用于控制“商城首页，用户名，购物车，我的订单，采购商中心，消息，logo”等按钮点击时如果没有注册公司刚弹出提示信息*/}\r\n      </div>\r\n    );\r\n  }\r\n}"]}