{"version":3,"sources":["../../src/components/ShopToolBar/ShopToolBar.js"],"names":["Content","moment","locale","ms","id","name","href","target","children","icon","Shop","props","context","state","menus","client","ApiClient","form","get","params","then","res","code","data","tmp","slice","result","reformData","setState","err","length","i","push","reformUnit","unit","url","logo","userLogo","shopMenuSearch","getWebsiteConfig","minHeight","window","document","body","clientHeight","location","referer","referrer","o","menu","getHref","horizontalMenu","map","rest","finalLocation","String","split","path","subMenu","hKey","vKey","vName","openKey","urlMatch","tmpOpenKey","q","j","vMenu","n","sMenu","verticalMenu","zh_CN","flowType","Component","propTypes","PropTypes","object","isRequired"],"mappings":"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","file":"ShopToolBar.js","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {Link} from 'react-router';\t//链接跳转，相当于a标签\r\nimport { Layout} from 'jdcloudui';\r\nimport ShopHeader from './Header/Header';\r\n// import ShopSider from './Sider/Sider';\r\nimport TopTools from '../TopTools/TopTools';\r\n\r\nimport ApiClient from '../../apiClient/ApiClient';\r\nimport '../Shop/style/shop.css';\r\nconst { Content } = Layout;\r\nimport Helmet from 'react-helmet';\r\n\r\n// 国际化中文\r\nimport { LocaleProvider } from 'jdcloudui';\r\nimport zh_CN from 'jdcloudui/lib/locale-provider/zh_CN';\r\nimport moment from 'moment';\r\nmoment.locale('zh-cn');\r\n\r\nconst ms = [\r\n    {\r\n      id:1,\r\n      name:\"首页\",\r\n      href: \"http://shop.hnc.jcloudec.com/shop-view/home\",\r\n      target:\"_self\",\r\n      children:[\r\n        {\r\n          id:11,\r\n          name:\"商品管理\",\r\n          icon:\"cgs\",\r\n          children:[\r\n            {\r\n              id:111,\r\n              name:\"经营类目\",\r\n              href:\"http://shop.hnc.jcloudec.com/item-shop-view/goods-manage/category\",\r\n              target:\"_self\"\r\n            },\r\n            {\r\n              id:112,\r\n              name:\"经营品牌\",\r\n              href:\"http://shop.hnc.jcloudec.com/item-shop-view/goods-manage/brand\",\r\n              target:\"_self\"\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          id:12,\r\n          name:\"商品发布\",\r\n          icon:\"cgs\",\r\n          children:[\r\n            {\r\n              id:121,\r\n              name:\"选择供货商品\",\r\n              href:\"http://shop.hnc.jcloudec.com/item-shop-view/selectgoods\",\r\n              target:\"_self\"\r\n            },\r\n            {\r\n              id:122,\r\n              name:\"商品信息管理\",\r\n              href:\"http://shop.hnc.jcloudec.com/item-shop-view/iteminfo\",\r\n              target:\"_self\"\r\n            },\r\n            {\r\n              id:123,\r\n              name:\"提交新商品\",\r\n              href:\"http://shop.hnc.jcloudec.com/item-shop-view/goods-release\",\r\n              target:\"_self\"\r\n            }\r\n          ]\r\n        },\r\n        {\r\n          id:13,\r\n          name:\"物流服务\",\r\n          icon:\"cgs\",\r\n          children:[\r\n            {\r\n              id:131,\r\n              name:\"地址管理\",\r\n              href:\"http://shop.hnc.jcloudec.com/user-shop-view/supplier/address\",\r\n              target:\"_self\"\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id:2,\r\n      name:\"账号管理\",\r\n      children:[\r\n        {\r\n          id:21,\r\n          name:\"账号管理\",\r\n          icon:\"cgs\",\r\n          children:[\r\n            {\r\n              id:211,\r\n              name:\"账号信息\",\r\n              href:\"http://shop.hnc.jcloudec.com/user-shop-view/accountmanage/accountInfo\",\r\n              target:\"_self\"\r\n            },\r\n            {\r\n              id:212,\r\n              name:\"账号安全\",\r\n              href:\"http://shop.hnc.jcloudec.com/user-shop-view/accountmanage/accountSecurity\",\r\n              target:\"_self\"\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n    {\r\n      id:3,\r\n      name:\"订单管理\",\r\n      children:[\r\n        {\r\n          id:31,\r\n          name:\"订单管理\",\r\n          icon:\"xx\",\r\n          children:[\r\n            {\r\n              id:311,\r\n              name:\"订单管理\",\r\n              href:\"http://shop.hnc.jcloudec.com/order-shop-view/order/list\",\r\n              target:\"_self\"\r\n            },\r\n            {\r\n              id:312,\r\n              name:\"销售区域设置\",\r\n              href:\"http://shop.hnc.jcloudec.com/order-shop-view/salearea\",\r\n              target:\"_self\"\r\n            },\r\n            {\r\n              id:313,\r\n              name:\"换货订单\",\r\n              href:\"http://shop.hnc.jcloudec.com/customer-service-shop-view/exchange/grid\",\r\n              target:\"_self\"\r\n            },\r\n            {\r\n              id:314,\r\n              name:\"退换货记录\",\r\n              href:\"http://shop.hnc.jcloudec.com/customer-service-shop-view/returnexchangerecord/grid\",\r\n              target:\"_self\"\r\n            }\r\n          ]\r\n        }\r\n      ]\r\n    },\r\n  {\r\n    id:5,\r\n    name:\"财务管理\",\r\n    children:[\r\n      {\r\n        id:51,\r\n        name:\"会员资金账户\",\r\n        href:\"http://shop.hnc.jcloudec.com/finance-shop-view/memberFinanceAccount\",\r\n        target:\"_self\"\r\n      },\r\n      {\r\n        id:52,\r\n        name:\"结算管理\",\r\n        href:\"http://shop.hnc.jcloudec.com/finance-shop-view/settlement/grid\",\r\n        target:\"_self\"\r\n      }\r\n    ]\r\n  },\r\n]\r\nexport default class Shop extends Component {\r\n  static propTypes = {\r\n    children: PropTypes.object.isRequired\r\n  };\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.state={\r\n      menus:[],\r\n      icon:''\r\n    }\r\n  }\r\n\r\n  //------------------动态获取菜单begin-------------------------------------\r\n  shopMenuSearch(){\r\n    var client = new ApiClient();\r\n    let form = null;\r\n    client.get('/authority-service/mall/resource/queryResourceMenuBySellerId',{params:form})\r\n      .then(\r\n        (res) => {\r\n          if(res.code==0 && res.data){\r\n            let tmp = res.data.slice(0,9);\r\n            let result = this.reformData(tmp);\r\n            this.setState({\r\n              menus: result,\r\n            })\r\n          }\r\n        },\r\n        (err) => {\r\n\r\n        }\r\n      )\r\n  }\r\n\r\n  reformData(data) {\r\n    let result = [];\r\n    if(data && data.length){\r\n      for(let i in data){\r\n        result.push(this.reformUnit(data[i]));\r\n      }\r\n    }else{}\r\n    return result;\r\n  }\r\n\r\n  reformUnit(data){\r\n    let unit = {id:'',name:'',href:'',target:'',children:[]};\r\n    unit.id = data.id+'';\r\n    unit.name = data.name;\r\n    unit.href = data.url;\r\n    unit.target = data.target?data.target:'_self';\r\n    if(data && data.children && data.children.length > 0){\r\n      for(let i in data.children){\r\n        unit.children.push(this.reformUnit(data.children[i]))\r\n      }\r\n    }else{\r\n      delete unit['children'];\r\n    }\r\n    return unit;\r\n  }\r\n  //------------------获取ICON--------------------------------------------\r\n  getWebsiteConfig() {\r\n    var client = new ApiClient();\r\n    client.get('/platform-service/mallInfo/getMallInfo')\r\n      .then(\r\n        (res) => {\r\n          if(res.code==0 && res.data){\r\n            this.setState({icon:res.data.icon,logo:res.data.userLogo})\r\n          }\r\n        },\r\n        (err) => {\r\n\r\n        }\r\n      )\r\n  }\r\n  //------------------动态获取菜单end-------------------------------------\r\n\r\n  componentWillMount() {\r\n    this.shopMenuSearch();\r\n    this.getWebsiteConfig();\r\n    this.minHeight = typeof window !== 'undefined' ? document.body.clientHeight-64 : 580;\r\n    this.location = typeof window !== 'undefined' ? window.location.href : \"\";\r\n    this.referer = typeof document !== 'undefined' ? document.referrer : \"\";\r\n  }\r\n  getHref(o) {\r\n    if(o && o.length){\r\n      for(var i = 0; i < o.length; i++) {\r\n        var menu = o[i];\r\n        if(menu.href&&menu.href!=\"\") {\r\n          return menu.href;\r\n        }else if(menu.children&&menu.children.length){\r\n          return this.getHref(menu.children)\r\n        }else{\r\n          return \"\";\r\n        }\r\n      }\r\n    }else{\r\n      return \"\";\r\n    }\r\n  }\r\n  horizontalMenu(o) {\r\n    const horizontalMenu=[];\r\n    if(o && o.length && o.length > 0){\r\n      o.map((menu)=>{\r\n        const {children,...rest} = menu;\r\n        rest.href = rest.href&&rest.href!=\"\"?rest.href:this.getHref(children);\r\n        horizontalMenu.push(rest);\r\n      });\r\n    }else{}\r\n    return horizontalMenu;\r\n  }\r\n\r\n  urlMatch(location,href){\r\n    //href:/dfsd/sdfs\r\n    //location:http://dfsd/sdf/sdfs\r\n    let finalLocation= '';\r\n    if(location){\r\n      let result = String(location).split('.com');\r\n      if(result && result.length && result[1]){\r\n        let path = result[1];\r\n        let tmp = path.split('?');\r\n        if(tmp && tmp[0]){\r\n          finalLocation = tmp[0];\r\n          if(finalLocation==href){\r\n            return true;\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n\r\n  verticalMenu(o, location) {\r\n    var subMenu = [];\r\n    var hKey = 0;\r\n    var vKey = 0;\r\n    var vName = \"\";\r\n    var openKey = [];\r\n    if(o && o.length && o.length > 0){\r\n      for (var i = 0; i < o.length; i++) {\r\n        var menu = o[i];\r\n        if (menu.href && menu.href != \"\" && this.urlMatch(location,menu.href)) {\r\n          subMenu = menu.children;\r\n          hKey = menu.id;\r\n          let tmpOpenKey=[];\r\n          for(let q in menu.children){\r\n            tmpOpenKey.push(menu.children[q].id+'');\r\n          }\r\n          openKey=tmpOpenKey;\r\n        } else if (menu.children && menu.children.length) {\r\n          for (var j = 0; j < menu.children.length; j++) {\r\n            var vMenu = menu.children[j];\r\n            if (vMenu.href && vMenu.href != \"\" && this.urlMatch(location,vMenu.href)) {\r\n              subMenu = menu.children;\r\n              hKey = menu.id;\r\n              vKey = vMenu.id;\r\n              vName = vMenu.name;\r\n            } else if (vMenu.children && vMenu.children.length) {\r\n              for (var n = 0; n < vMenu.children.length; n++) {\r\n                var sMenu = vMenu.children[n];\r\n                if (sMenu.href && sMenu.href != \"\" && this.urlMatch(location,sMenu.href)) {\r\n                  subMenu = menu.children;\r\n                  hKey = menu.id;\r\n                  vKey = sMenu.id;\r\n                  vName = sMenu.name;\r\n                  openKey.push(vMenu.id);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return {subMenu, hKey, openKey, vKey,vName}\r\n  }\r\n  render() {\r\n    const {menus=ms} = this.props;\r\n    const horizontalMenu = this.horizontalMenu(this.state.menus);\r\n    let verticalMenu = this.verticalMenu(this.state.menus, this.location);\r\n    if(verticalMenu.subMenu.length==0) {\r\n       verticalMenu =  this.verticalMenu(this.state.menus, this.referer||\"\");\r\n    }\r\n    const {hKey,vName,...rest} = verticalMenu;\r\n    return (\r\n      <LocaleProvider locale={zh_CN}>\r\n        <div>\r\n          <Helmet>\r\n            <title>{this.props.flowType && this.props.flowType=='shop'?'商家入驻':'供应商入驻'}</title>\r\n            <link rel=\"icon\" href={this.state.icon} mce_href={this.state.icon} type=\"image/x-icon\" />\r\n          </Helmet>\r\n          <TopTools />\r\n          <ShopHeader menus={horizontalMenu} selectKey = {hKey} logo = {this.state.logo} flowType={this.props.flowType} />\r\n          <div className=\"shop-framework-body-container\">\r\n            <Content style={{ minHeight:this.minHeight+\"px\"}}>\r\n              {this.props.children}\r\n            </Content>\r\n          </div>\r\n        </div>\r\n      </LocaleProvider>\r\n    )\r\n  }\r\n}"]}