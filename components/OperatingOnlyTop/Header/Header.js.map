{"version":3,"sources":["../../../src/components/OperatingOnlyTop/Header/Header.js"],"names":["Header","props","context","state","msgCount","userName","menus","isSubAccount","dyHeaderMinWidth","mainDomain","key","logouts","client","ApiClient","get","then","res","code","data","setState","err","params","platformId","username","getMsgCount","getUserName","getChangePassWordPermission","getMainDomainForLogo","map","_item","domainType","domain","clientWidth","headMenuPx","menuNamepx","length","i","menuNameLength","parseInt","name","selectKey","type","window","w","document","documentElement","scrollWidth","body","Math","random","dropNum","calculateNum","mainMenu","slice","dropDownMenu","mainMenuData","menu","id","href","dropDownMenuData","forceMoreMenu","q","String","finalData","lineHeight","borderBottom","float","marginRight","fontSize","color","paddingRight","console","log","horizontal","logout","_this","onresize","createMenu","logo","createUserMenu","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AAEA;;AACA;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;IACqBA,M;;;AACnB,kBAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA,uIACpBD,KADoB,EACbC,OADa;;AAE1B,WAAKC,KAAL,GAAa;AACXC,gBAAS,EADE;AAEXC,gBAAS,EAFE;AAGXC,aAAM,EAHK;AAIXC,oBAAa,IAJF;AAKXC,wBAAiB,IALN;AAMXC,kBAAY,GAND;AAOXC,WAAI;AAPO,KAAb;AAF0B;AAW3B;;;;6BACQ;AACN,UAAMC,UAAU;AACb,6BAAoB,CAAC,iCAAD,EAAmC,KAAnC,CADP;AAEb,oBAAW,CAAC,wBAAD,EAA0B,KAA1B,CAFE;AAGb,wBAAe,CAAC,oBAAD,EAAsB,KAAtB,CAHF;AAIb,qBAAY,CAAC,cAAD,EAAgB,KAAhB;AAJC,OAAhB;AAMC,8BAASA,OAAT,EAAiB,QAAjB;AACH;;;kCACY;AAAA;;AACX,UAAIC,SAAS,IAAIC,mBAAJ,CAAc,IAAd,EAAmB,IAAnB,EAAwB,IAAxB,EAA6B,IAA7B,CAAb;AACAD,aAAOE,GAAP,CAAW,sDAAX,EACGC,IADH,CAEI,UAACC,GAAD,EAAS;AACP,YAAGA,IAAIC,IAAJ,IAAU,CAAV,IAAeD,IAAIE,IAAtB,EAA2B;AACzB,iBAAKC,QAAL,CAAc;AACZf,sBAAUY,IAAIE;AADF,WAAd;AAGD;AACF,OARL,EASI,UAACE,GAAD,EAAS,CAER,CAXL;AAaD;;;kCACa;AAAA;;AACZ,UAAIR,SAAS,IAAIC,mBAAJ,CAAc,IAAd,EAAmB,IAAnB,EAAwB,IAAxB,EAA6B,IAA7B,CAAb;AACAD,aAAOE,GAAP,CAAW,kDAAX,EAA8D,EAACO,QAAO,EAACC,YAAW,CAAZ,EAAR,EAA9D,EACGP,IADH,CAEI,UAACC,GAAD,EAAS;AACP,YAAGA,IAAIC,IAAJ,IAAU,CAAV,IAAeD,IAAIE,IAAnB,IAA2BF,IAAIE,IAAJ,CAASK,QAAvC,EAAgD;AAC9C,iBAAKJ,QAAL,CAAc;AACZd,sBAAUW,IAAIE,IAAJ,CAASK;AADP,WAAd;AAGD;AACF,OARL,EASI,UAACH,GAAD,EAAS,CAER,CAXL;AAaD;;;kDAC4B;AAAA;;AAC3B,UAAIR,SAAS,IAAIC,mBAAJ,CAAc,IAAd,EAAmB,IAAnB,EAAwB,IAAxB,EAA6B,IAA7B,CAAb;AACAD,aAAOE,GAAP,CAAW,4DAAX,EACGC,IADH,CAEI,UAACC,GAAD,EAAS;AACP,YAAGA,IAAIC,IAAJ,IAAU,CAAb,EAAe;AACb,iBAAKE,QAAL,CAAc;AACZZ,0BAAcS,IAAIE;AADN,WAAd;AAGD;AACF,OARL,EASI,UAACE,GAAD,EAAS,CAER,CAXL;AAaD;;;yCACoB;AACnB,WAAKI,WAAL;AACA,WAAKC,WAAL;AACA,WAAKC,2BAAL;AACA,WAAKC,oBAAL;AACD;;AAEA;;;;2CACsB;AAAA;;AACrB,UAAIf,SAAS,IAAIC,mBAAJ,CAAc,IAAd,EAAmB,IAAnB,EAAwB,IAAxB,EAA6B,IAA7B,CAAb;AACAD,aAAOE,GAAP,CAAW,kBAAX,EACGC,IADH,CAEI,UAACC,GAAD,EAAS;AACP,YAAGA,IAAIC,IAAJ,IAAY,CAAZ,IAAiBD,IAAIE,IAAxB,EAA8B;AAC5BF,cAAIE,IAAJ,CAASU,GAAT,CAAa,iBAAS;AACpB,gBAAIC,MAAMC,UAAN,IAAoB,CAAxB,EAA2B;AACzB,kBAAIrB,oBAAkBoB,MAAME,MAA5B;AACA,qBAAKZ,QAAL,CAAc,EAACV,YAAYA,UAAb,EAAd;AACD;AACF,WALD;AAMD;AACF,OAXL,EAYI,UAACW,GAAD,EAAS,CACR,CAbL;AAeD;;;iCAEYd,K,EAAM0B,W,EAAYC,U,EAAY;AACzC;AACA,UAAIC,aAAW,CAAf;AACA,UAAG5B,SAASA,MAAM6B,MAAlB,EAAyB;AACvB,aAAK,IAAIC,IAAE,CAAX,EAAaA,IAAE9B,MAAM6B,MAArB,EAA4B,EAAEC,CAA9B,EAAiC;AAC/B,cAAMC,iBAAiB/B,MAAMA,MAAM6B,MAAN,GAAeG,SAASF,CAAT,CAAf,GAA2B,CAAjC,EAAoCG,IAApC,CAAyCJ,MAAhE;AACAD,wBAAcI,SAASD,cAAT,IAA2B,EAA3B,GAAgC,EAA9C;AACA,cAAIJ,aAAWC,UAAX,GAAwBF,WAA5B,EAAyC;AACvC,mBAAOM,SAASF,CAAT,IAAc,CAArB;AACD;AACF;AACF,OARD,MAQK;AACH,eAAO,CAAP;AACD;AACF;;;+BAEU9B,K,EAAOkC,S,EAAUC,I,EAAM;AAChC;AACA,UAAG,OAAOC,MAAP,KAAmB,WAAtB,EAAkC;AAC9B;AACA,YAAIC,IAAIC,SAASC,eAAT,CAAyBC,WAAzB,IAAwCF,SAASG,IAAT,CAAcD,WAA9D;AACA,YAAMd,cAAcW,IAAI,GAAJ,GAAU,EAAV,GAAe,GAAf,GAAqB,EAArB,GAA0B,EAA9C;AACA,YAAGF,QAAQ,CAAX,EAAc;AACV,eAAKtB,QAAL,CAAc,EAACT,KAAKsC,KAAKC,MAAL,EAAN,EAAd;AACH;AACH,YAAIhB,aAAa,CAAjB;AACA,YAAK3B,SAASA,MAAM6B,MAAf,IAAyB7B,MAAM6B,MAAN,IAAc,CAA5C,EAA+C;AAC7CF,uBAAa,KAAK3B,MAAM6B,MAAxB;AACD;AACD,YAAIH,cAAcC,UAAlB,EAA8B;AAC5B,cAAMiB,UAAU,KAAKC,YAAL,CAAkB7C,KAAlB,EAAwB0B,WAAxB,EAAoCC,UAApC,CAAhB;AACA,cAAMmB,WAAW9C,SAASA,MAAM+C,KAAN,CAAY,CAAZ,EAAe/C,MAAM6B,MAAN,GAAee,OAA9B,CAA1B;AACA,cAAMI,eAAehD,SAASA,MAAM+C,KAAN,CAAY/C,MAAM6B,MAAN,GAAee,OAA3B,EAAoC5C,MAAM6B,MAA1C,CAA9B;AACA,cAAMoB,eAAeH,YAAYA,SAASxB,GAAT,CAAa,UAAC4B,IAAD,EAAQ;AACpD,mBAAO;AAAA,6BAAM,IAAN;AAAA,gBAAW,KAAKA,KAAKC,EAArB;AAAyB;AAAA;AAAA,kBAAG,MAAMD,KAAKE,IAAd;AAAqBF,qBAAKjB;AAA1B;AAAzB,aAAP;AACD,WAFgC,CAAjC;AAGA,cAAMoB,mBAAmBL,gBAAgBA,aAAa1B,GAAb,CAAiB,UAAC4B,IAAD,EAAQ;AAChE,mBAAO;AAAA,6BAAM,IAAN;AAAA,gBAAW,KAAKA,KAAKC,EAArB;AAAyB;AAAA;AAAA,kBAAG,MAAMD,KAAKE,IAAd;AAAqBF,qBAAKjB;AAA1B;AAAzB,aAAP;AACD,WAFwC,CAAzC;AAGA,cAAIqB,gBAAc,KAAlB;AACA,eAAI,IAAIC,IAAE,CAAV,EAAYA,IAAEP,aAAanB,MAA3B,EAAkC,EAAE0B,CAApC,EAAsC;AACpC,gBAAGP,aAAaO,CAAb,EAAgBJ,EAAhB,IAAoB,CAACK,OAAOtB,SAAP,CAAD,CAAvB,EAA2C;AACzCoB,8BAAgB,IAAhB;AACA;AACD;AACF;AACD,cAAMG,YACJ;AAAA;AAAA;AACE,yBAAU,eADZ;AAEE,mBAAKf,KAAKC,MAAL,EAFP;AAGE,qBAAM,OAHR;AAIE,oBAAK,QAJP;AAKE,4BAAc,CAACa,OAAOtB,SAAP,CAAD,CALhB;AAME,qBAAO,EAAEwB,YAAY,MAAd,EAAsBC,cAAc,GAApC,EAAyCC,OAAO,OAAhD,EAAyDC,aAAa,MAAtE,EAA8EC,UAAU,MAAxF;AANT;AAQGT;AARH,WADF;AAYA,iBACE;AAAA;AAAA,cAAK,WAAU,UAAf;AACI;AAAA;AAAA,gBAAO,OAAOT,OAAd,EAAuB,eAAe,EAAtC;AACE;AAAA;AAAA,kBAAU,SAASa,SAAnB,EAA8B,WAAU,cAAxC;AACI;AAAA;AAAA,oBAAG,WAAU,kBAAb,EAAgC,MAAK,oBAArC;AACGH,kCACC;AAAA;AAAA,sBAAM,OAAO,EAACQ,UAAS,MAAV,EAAiBC,OAAM,MAAvB,EAAb;AAAA;AAAA,mBADD,GAGC;AAAA;AAAA,sBAAM,OAAO,EAACD,UAAS,MAAV,EAAiBC,OAAM,MAAvB,EAAb;AAAA;AAAA,mBAJJ;AAME,kEAAM,MAAK,MAAX,EAAkB,OAAO,EAACA,OAAM,SAAP,EAAzB;AANF;AADJ;AADF,aADJ;AAaE;AAAA;AAAA;AACE,uBAAM,OADR;AAEE,sBAAK,YAFP;AAGE,8BAAc,CAACP,OAAOtB,SAAP,CAAD,CAHhB;AAIE,uBAAO,EAAEwB,YAAY,MAAd,EAAsBC,cAAc,GAApC,EAAyCC,OAAO,OAAhD,EAAyDC,aAAa,MAAtE,EAA8EC,UAAU,MAAxF,EAAgGE,cAAa,KAA7G;AAJT;AAMGf;AANH;AAbF,WADF;AAyBD,SAtDD,MAsDO;AACLgB,kBAAQC,GAAR,CAAY,SAAZ;AACA,cAAMC,aAAanE,SAASA,MAAMsB,GAAN,CAAU,UAAC4B,IAAD,EAAQ;AAC5C,mBAAO;AAAA,6BAAM,IAAN;AAAA,gBAAW,KAAKA,KAAKC,EAArB;AAAyB;AAAA;AAAA,kBAAG,MAAMD,KAAKE,IAAd;AAAqBF,qBAAKjB;AAA1B;AAAzB,aAAP;AACD,WAF2B,CAA5B;AAGA,iBACE;AAAA;AAAA;AACE,qBAAM,OADR;AAEE,oBAAK,YAFP;AAGE,4BAAc,CAACuB,OAAOtB,SAAP,CAAD,CAHhB;AAIE,qBAAO,EAAEwB,YAAY,MAAd,EAAsBC,cAAc,GAApC,EAAyCC,OAAO,OAAhD,EAAyDC,aAAa,MAAtE,EAA8EC,UAAU,MAAxF,EAA+FE,cAAa,KAA5G;AAJT;AAMGG;AANH,WADF;AAUD;AACF,OAjFD,MAiFK;AACH,eAAQ,0CAAR;AACD;AACF;;;qCACgB;AAAA;;AACf,UAAI,CAAC,KAAKtE,KAAL,CAAWI,YAAhB,EAA8B;AAC5B,eACE;AAAA;AAAA,YAAM,WAAU,kBAAhB;AACE;AAAA,2BAAM,IAAN;AAAA;AACE;AAAA;AAAA,gBAAG,KAAI,qBAAP,EAA6B,QAAO,QAApC,EAA6C,MAAK,gCAAlD;AAAA;AAAA;AADF,WADF;AAIE;AAAA,2BAAM,IAAN;AAAA;AACE;AAAA;AAAA,gBAAG,KAAI,qBAAP,EAA6B,SAAS;AAAA,yBAAI,OAAKmE,MAAL,EAAJ;AAAA,iBAAtC,EAAyD,MAAK,oBAA9D;AAAA;AAAA;AADF;AAJF,SADF;AAUD,OAXD,MAWM;AACJ,eACE;AAAA;AAAA,YAAM,WAAU,kBAAhB;AACE;AAAA,2BAAM,IAAN;AAAA;AACE;AAAA;AAAA,gBAAG,KAAI,qBAAP,EAA6B,SAAS;AAAA,yBAAI,OAAKA,MAAL,EAAJ;AAAA,iBAAtC,EAAyD,MAAK,oBAA9D;AAAA;AAAA;AADF;AADF,SADF;AAOD;AACF;;;wCAEkB;AACf;AACA,UAAI/B,IAAIC,SAASC,eAAT,CAAyBC,WAAzB,IAAwCF,SAASG,IAAT,CAAcD,WAA9D;AACA,UAAMd,cAAcW,IAAI,GAAJ,GAAU,EAAV,GAAe,GAAf,GAAqB,EAArB,GAA0B,EAA9C;AACF,WAAKxB,QAAL,CAAc;AACZX,0BAAiBwB;AADL,OAAd;AAGE,UAAI2C,QAAQ,IAAZ;AACAjC,aAAOkC,QAAP,GAAkB,YAAU;AAAA,0BACGD,MAAM1E,KADT;AAAA,YACjBK,KADiB,eACjBA,KADiB;AAAA,YACVkC,SADU,eACVA,SADU;;AAExBmC,cAAME,UAAN,CAAiBvE,KAAjB,EAAwBkC,SAAxB,EAAmC,CAAnC;AACH,OAHD;AAIH;;;6BAEQ;AAAA,mBACoB,KAAKvC,KADzB;AAAA,UACAK,KADA,UACAA,KADA;AAAA,UACOkC,SADP,UACOA,SADP;;AAEP,aACE;AAAA;AAAA;AACE;AAAA;AAAA,YAAK,WAAU,WAAf;AACE;AAAA;AAAA,cAAK,WAAU,kCAAf;AACE;AAAA;AAAA,gBAAG,MAAM,KAAKrC,KAAL,CAAWM,UAApB,EAAgC,QAAO,QAAvC;AAAkD,mBAAKR,KAAL,CAAW6E,IAAX,GAAgB,uCAAK,KAAK,KAAK7E,KAAL,CAAW6E,IAArB,GAAhB,GAA8C;AAAhG;AADF,WADF;AAIE;AAAA;AAAA;AAAA;AAAA,WAJF;AAKE;AAAA;AAAA,cAAK,WAAU,UAAf;AAEE;AAAA;AAAA,gBAAO,OAAO,KAAK3E,KAAL,CAAWC,QAAzB,EAAmC,WAAU,UAA7C,EAAwD,eAAe,EAAvE;AACE;AAAA;AAAA,kBAAG,MAAK,wCAAR;AAAiD,gEAAM,MAAK,YAAX,EAAwB,OAAO,EAACgE,UAAS,MAAV,EAAkBC,OAAM,SAAxB,EAA/B;AAAjD;AADF,aAFF;AAKE;AAAA;AAAA,gBAAU,SAAS,KAAKU,cAAL,EAAnB;AACE;AAAA;AAAA,kBAAG,WAAU,kBAAb,EAAgC,MAAK,oBAArC;AACG,qBAAK5E,KAAL,CAAWE,QADd;AAAA;AACwB,gEAAM,MAAK,MAAX;AADxB;AADF;AALF,WALF;AAgBG,eAAKwE,UAAL,CAAgBvE,KAAhB,EAAuBkC,SAAvB,EAAiC,CAAjC;AAhBH;AADF,OADF;AAsBD;;;EArQiCwC,gB;;kBAAfhF,M","file":"Header.js","sourcesContent":["import React, {Component} from 'react';\r\nimport { Badge,Icon,Menu,Dropdown } from 'jdcloudui';\r\nimport {Link} from 'react-router';\r\nimport  './style/header.css';\r\nimport  '../../Operating/Header/style/templateHader.css';\r\nimport onLogout from '../../../sso/onLogout';\r\nimport ApiClient from '../../../apiClient/ApiClient';\r\nimport logo from './style/logo.png';\r\nexport default class Header extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.state = {\r\n      msgCount:'',\r\n      userName:'',\r\n      menus:'',\r\n      isSubAccount:true,\r\n      dyHeaderMinWidth:1000,\r\n      mainDomain: '/',\r\n      key:'',\r\n    }\r\n  }\r\n  logout() {\r\n     const logouts = {\r\n        \"passport-platform\":[\"/passport-operating-view/logout\",false],\r\n        \"platform\":[\"/operating-view/logout\",false],\r\n        \"view-zx-mall\":[\"/decoration/logout\",false],\r\n        \"view-zone\":[\"/zone/logout\",false]\r\n      }\r\n      onLogout(logouts,\"plogin\");\r\n  }\r\n  getMsgCount(){\r\n    var client = new ApiClient(null,null,null,true);\r\n    client.get('/postman/platform/websitemsg/queryUnreadWebSiteCount')\r\n      .then(\r\n        (res) => {\r\n          if(res.code==0 && res.data){\r\n            this.setState({\r\n              msgCount: res.data,\r\n            });\r\n          }\r\n        },\r\n        (err) => {\r\n\r\n        }\r\n      )\r\n  }\r\n   getUserName(){\r\n    var client = new ApiClient(null,null,null,true);\r\n    client.get('/platform-passport/platform/Login/queryLoginInfo',{params:{platformId:2}})\r\n      .then(\r\n        (res) => {\r\n          if(res.code==0 && res.data && res.data.username){\r\n            this.setState({\r\n              userName: res.data.username,\r\n            });\r\n          }\r\n        },\r\n        (err) => {\r\n\r\n        }\r\n      )\r\n  }\r\n  getChangePassWordPermission(){\r\n    var client = new ApiClient(null,null,null,true);\r\n    client.get('/authority/platform/platformsubaccount/checkSubAccountInfo')\r\n      .then(\r\n        (res) => {\r\n          if(res.code==0){\r\n            this.setState({\r\n              isSubAccount: res.data,\r\n            });\r\n          }\r\n        },\r\n        (err) => {\r\n\r\n        }\r\n      )\r\n  }\r\n  componentWillMount() {\r\n    this.getMsgCount();\r\n    this.getUserName();\r\n    this.getChangePassWordPermission();\r\n    this.getMainDomainForLogo();\r\n  }\r\n\r\n   //获取域名\r\n  getMainDomainForLogo() {\r\n    var client = new ApiClient(null,null,null,true);\r\n    client.get('/passport/logout')\r\n      .then(\r\n        (res) => {\r\n          if(res.code == 0 && res.data) {\r\n            res.data.map(_item => {\r\n              if (_item.domainType == 1) {\r\n                let mainDomain = `//${_item.domain}`;\r\n                this.setState({mainDomain: mainDomain});\r\n              }\r\n            });\r\n          }\r\n        },\r\n        (err) => {\r\n        }\r\n      );\r\n  }\r\n\r\n  calculateNum(menus,clientWidth,headMenuPx) {\r\n    //fontSize:14 padding:15x2 current:1028;clientWidth:可用空间 1028:目前菜单总长度\r\n    let menuNamepx=0;\r\n    if(menus && menus.length){\r\n      for (let i=0;i<menus.length;++i) {\r\n        const menuNameLength = menus[menus.length - parseInt(i)-1].name.length;\r\n        menuNamepx += parseInt(menuNameLength) * 14 + 30;\r\n        if (headMenuPx-menuNamepx < clientWidth) {\r\n          return parseInt(i) + 1\r\n        }\r\n      }\r\n    }else{\r\n      return 0;\r\n    }\r\n  }\r\n\r\n  createMenu(menus, selectKey,type) {\r\n    //sider：200 userinfo：200 more：80 buffer：200,titleName:100\r\n    if(typeof(window) !== 'undefined'){\r\n        // const clientWidth = window.screen.availWidth -200 -200-80-100;\r\n        var w = document.documentElement.scrollWidth || document.body.scrollWidth;\r\n        const clientWidth = w - 200 - 84 - 140 - 85 - 10;\r\n        if(type == 2) {\r\n            this.setState({key: Math.random()});\r\n        }\r\n      let headMenuPx = 0;\r\n      if ( menus && menus.length && menus.length!=0) {\r\n        headMenuPx = 86 * menus.length;\r\n      }\r\n      if (clientWidth < headMenuPx) {\r\n        const dropNum = this.calculateNum(menus,clientWidth,headMenuPx);\r\n        const mainMenu = menus && menus.slice(0, menus.length - dropNum);\r\n        const dropDownMenu = menus && menus.slice(menus.length - dropNum, menus.length);\r\n        const mainMenuData = mainMenu && mainMenu.map((menu)=>{\r\n          return <Menu.Item key={menu.id}><a href={menu.href}>{menu.name}</a></Menu.Item>;\r\n        });\r\n        const dropDownMenuData = dropDownMenu && dropDownMenu.map((menu)=>{\r\n          return <Menu.Item key={menu.id}><a href={menu.href}>{menu.name}</a></Menu.Item>;\r\n        });\r\n        let forceMoreMenu=false;\r\n        for(let q=0;q<dropDownMenu.length;++q){\r\n          if(dropDownMenu[q].id==[String(selectKey)]){\r\n            forceMoreMenu = true;\r\n            break;\r\n          }\r\n        }\r\n        const finalData = (\r\n          <Menu\r\n            className=\"dropdownmenu1\"\r\n            key={Math.random()}\r\n            theme=\"light\"\r\n            mode=\"inline\"\r\n            selectedKeys={[String(selectKey)]}\r\n            style={{ lineHeight: '20px', borderBottom: '0', float: 'right', marginRight: '10px', fontSize: '14px'}}\r\n          >\r\n            {dropDownMenuData}\r\n          </Menu>\r\n        )\r\n        return (\r\n          <div className=\"moremenu\">\r\n              <Badge count={dropNum} overflowCount={10}>\r\n                <Dropdown overlay={finalData} placement=\"bottomCenter\" >\r\n                    <a className=\"jc-dropdown-link\" href=\"javascript:void(0)\">\r\n                      {forceMoreMenu?\r\n                        <span style={{fontSize:'14px',color:'#333'}}>更多</span>\r\n                        :\r\n                        <span style={{fontSize:'14px',color:'#999'}}>更多</span>\r\n                      }\r\n                      <Icon type=\"down\" style={{color:\"#b1b1b1\"}}/>\r\n                    </a>\r\n                </Dropdown>\r\n              </Badge>\r\n            <Menu\r\n              theme=\"light\"\r\n              mode=\"horizontal\"\r\n              selectedKeys={[String(selectKey)]}\r\n              style={{ lineHeight: '63px', borderBottom: '0', float: 'right', marginRight: '10px', fontSize: '14px', paddingRight:'5px'}}\r\n            >\r\n              {mainMenuData}\r\n            </Menu>\r\n          </div>\r\n\r\n        );\r\n      } else {\r\n        console.log('normal!');\r\n        const horizontal = menus && menus.map((menu)=>{\r\n          return <Menu.Item key={menu.id}><a href={menu.href}>{menu.name}</a></Menu.Item>;\r\n        });\r\n        return (\r\n          <Menu\r\n            theme=\"light\"\r\n            mode=\"horizontal\"\r\n            selectedKeys={[String(selectKey)]}\r\n            style={{ lineHeight: '63px', borderBottom: '0', float: 'right', marginRight: '10px', fontSize: '14px',paddingRight:'5px'}}\r\n          >\r\n            {horizontal}\r\n          </Menu>\r\n        );\r\n      }\r\n    }else{\r\n      return (<div></div>);\r\n    }\r\n  }\r\n  createUserMenu() {\r\n    if (!this.state.isSubAccount) {\r\n      return (\r\n        <Menu className=\"dropdownmenuUser\">\r\n          <Menu.Item>\r\n            <a rel=\"noopener noreferrer\" target=\"_blank\" href=\"/user-operating-view/changepwd\">修改密码</a>\r\n          </Menu.Item>\r\n          <Menu.Item>\r\n            <a rel=\"noopener noreferrer\" onClick={()=>this.logout()} href=\"javascript:void(0)\">退出</a>\r\n          </Menu.Item>\r\n        </Menu>\r\n      );\r\n    }else {\r\n      return (\r\n        <Menu className=\"dropdownmenuUser\">\r\n          <Menu.Item>\r\n            <a rel=\"noopener noreferrer\" onClick={()=>this.logout()} href=\"javascript:void(0)\">退出</a>\r\n          </Menu.Item>\r\n        </Menu>\r\n      );\r\n    }\r\n  }\r\n\r\n  componentDidMount(){\r\n      // const clientWidth = window.screen.availWidth -200 -200-80-100;\r\n      var w = document.documentElement.scrollWidth || document.body.scrollWidth;\r\n      const clientWidth = w - 200 - 84 - 140 - 85 - 10;\r\n    this.setState({\r\n      dyHeaderMinWidth:clientWidth,\r\n    });\r\n      var _this = this;\r\n      window.onresize = function(){\r\n          const {menus, selectKey} = _this.props;\r\n          _this.createMenu(menus, selectKey, 2)\r\n      }\r\n  }\r\n\r\n  render() {\r\n    const {menus, selectKey} = this.props;\r\n    return (\r\n      <div>\r\n        <div className=\"ui-header\">\r\n          <div className=\"operating-framewrok-onlytop-logo\">\r\n            <a href={this.state.mainDomain} target=\"_blank\" >{this.props.logo?<img src={this.props.logo} />:''}</a>\r\n          </div>\r\n          <h2>运营后台</h2>\r\n          <div className=\"userInfo\">\r\n            {/* cont>99添加className=\"mBadge\" */}\r\n            <Badge count={this.state.msgCount} className=\"ui-badge\" overflowCount={99}>\r\n              <a href=\"/operating-view/message/message-center\"><Icon type=\"new-icon72\" style={{fontSize:\"25px\", color:'#b2b2b2'}} /></a>\r\n            </Badge>\r\n            <Dropdown overlay={this.createUserMenu()} >\r\n              <a className=\"jc-dropdown-link\" href=\"javascript:void(0)\">\r\n                {this.state.userName} <Icon type=\"down\" />\r\n              </a>\r\n            </Dropdown>\r\n          </div>\r\n          {this.createMenu(menus, selectKey,1)}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}"]}