{"version":3,"sources":["../../../../../src/components/Release/PriceStockTable/v1.0.2/view/PriceModal.js"],"names":["TabPane","PriceModal","onChange","value","index","item","record","data","labelId","shopCustomerLabelId","labelPrice","labelName","props","changePrice","handleOk","type","state","isPrice","setState","dataPrice","filter","length","key","undefined","error","visible","handleModal","priceList","priceData","padding","maxHeight","overflow","map","lineHeight","color","toFixed","width","whiteSpace","textOverflow","display","textAlign","v","_i","Component"],"mappings":"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","file":"PriceModal.js","sourcesContent":["\r\nimport React, {Component} from 'react';\r\nimport { Modal, InputNumber, Tabs, message} from 'jdcloudui';\r\nconst TabPane = Tabs.TabPane;\r\n\r\n\r\nexport default class PriceModal extends Component {\r\n  constructor(){\r\n    super();\r\n    this.state = {\r\n      type: false\r\n    };\r\n\r\n  }\r\n\r\n  onChange = (value, index, item, record) => {\r\n    const data = {\r\n      labelId: item.shopCustomerLabelId,\r\n      labelPrice: value,\r\n      labelName: item.labelName,\r\n    };\r\n    this.props.changePrice(index, data, record);\r\n  };\r\n\r\n  handleOk = (record) => {\r\n    const {type} = this.state;\r\n    if(record.isPrice && !type) {\r\n      this.setState({\r\n        type: true\r\n      })\r\n    } else {\r\n      const {data} = this.props;\r\n      const dataPrice = data.filter(item => item.labelPrice);\r\n      if(dataPrice.length > 0) {\r\n        if(record.key === undefined) {\r\n          this.props.handleOk(true);\r\n        } else {\r\n          this.props.handleOk();\r\n        }\r\n      } else {\r\n        message.error('请至少设置一条分组价！');\r\n      }\r\n    }\r\n  };\r\n\r\n\r\n  render() {\r\n    // console.log(this.props.data, '11111111111111111111111111111111111111111111111');\r\n    const {visible, record, data, handleModal, priceList} = this.props;\r\n    const {type} = this.state;\r\n    const priceData = data.filter(item => item && item.labelPrice);\r\n\r\n\r\n    return (\r\n      <Modal\r\n        maskClosable={false}\r\n        className=\"tabs-box-content\"\r\n        title={record.isPrice && !type ? '查看分组价' : '添加分组价'}\r\n        visible={visible}\r\n        onOk={() => this.handleOk(record)}\r\n        onCancel={() => handleModal(false,{})}\r\n        cancelText={record.isPrice && !type ? '确认' : '取消'}\r\n        okText={record.isPrice && !type ? '编辑' : '确认'}\r\n      >\r\n        {\r\n          record.isPrice && !type  ? (\r\n            <div style={{padding: '20px 60px', maxHeight: '500px', overflow: 'auto'}}>\r\n              {\r\n                priceData.map(item => {\r\n                  return (\r\n                    <div style={{lineHeight: '30px'}}>\r\n                      <span style={{color: '#ccc'}}>{item.labelName}：</span>\r\n                      <span>￥{item.labelPrice.toFixed(2)}</span>\r\n                    </div>\r\n                  )\r\n                })\r\n              }\r\n            </div>\r\n          ) : (\r\n            <div>\r\n              <Tabs\r\n                type=\"card\"\r\n                hideAdd\r\n                forceRender\r\n              >\r\n                {\r\n                  priceList.map((item,index) => (\r\n                    <TabPane \r\n                        tab={<span title={item.labelName} style={{width:'46px',overflow:'hidden',whiteSpace: 'nowrap', textOverflow: 'ellipsis', display:'inline-block',textAlign:'center'}}>{item.labelName}</span>} \r\n                        key={item.shopCustomerLabelId}>\r\n                      <div style={{padding: '20px 100px 60px'}}>\r\n                        <span style={{color: '#ccc'}}>售价：</span>\r\n                        <span>￥</span>\r\n                        <InputNumber\r\n                          min={0}\r\n                          placeholder=\"请输入价格\"\r\n                          onChange={(v) => this.onChange(v, index, item, record)}\r\n                          style={{width: '200px'}}\r\n                          value={priceData.filter(_i => _i.labelId == item.shopCustomerLabelId)[0] && priceData.filter(_i => _i.labelId == item.shopCustomerLabelId)[0].labelPrice || null}\r\n                        />\r\n                      </div>\r\n                    </TabPane>\r\n                  ))\r\n                }\r\n              </Tabs>\r\n            </div>\r\n          )\r\n        }\r\n      </Modal>\r\n    );\r\n  }\r\n}\r\n"]}