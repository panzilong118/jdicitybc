{"version":3,"sources":["../../../../../src/components/Release/ReleaseSpecification/v1.0.0/view/ReleaseSpecification.js"],"names":["Panel","Option","ReleaseSpecification","props","componentDidMount","itemTmplPublishVo","cid","console","log","type","getAttributeByCategoryIdForPlatform","getAttributeByCategoryIdForShop","getDefaultValue4Input","attr","spec","j","length","aid","attrId","desc","getDefaultValue","mainIds","selectOptionIds","i","indexOf","vid","shouldBeDisable","onChangeAttr","e","attrObj","value","target","unit","result","itemTmplSkuVoList","attributes","orginData","specAttributes","k","updateItemTmplAction","forceUpdate","push","sourceData","matchAttr","state","attrbuteData","attrA","attrB","attrAArr","attrBArr","strA","sort","strB","nextProps","attributeData","data","attributeArr","JSON","parse","editData","map","item","index","flag","_item","baseAttrId","platformCategoryAttributeValues","status","_attrItem","_index","attrItem","baseAttrValueId","attrValueId","saleData","setState","skuList","sku","skuStatus","reduce","vName","attrName","style","selectDiv","width","marginRight","String","option","attrValueName","Component"],"mappings":"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","file":"ReleaseSpecification.js","sourcesContent":["/**\r\n * @file 发布商品-规格参数Tab组件\r\n */\r\n/**\r\n * type :\r\n * \"0\": (运营平台：平台商品库管理 发布、编辑),\r\n * \"1\": (运营平台：商品库管理/商品发布、编辑),\r\n * \"2\": (供应商),\r\n * \"3\": (店铺)\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Collapse, Select, Input} from 'jdcloudui';\r\nconst Panel = Collapse.Panel;\r\nconst Option = Select.Option;\r\nimport style from './style.less'\r\nimport './styles.css';\r\nexport default class ReleaseSpecification extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n        attrbuteData: []\r\n    }\r\n  }\r\n  componentDidMount=()=>{\r\n      if(this.props.itemTmplPublishVo && this.props.itemTmplPublishVo.cid){\r\n          console.log('mytest didmount,has cid');\r\n          if(this.props.type==1){\r\n              this.props.getAttributeByCategoryIdForPlatform(this.props.itemTmplPublishVo.cid);\r\n          }else if (this.props.type==2 || this.props.type==3){\r\n              this.props.getAttributeByCategoryIdForShop(this.props.itemTmplPublishVo.cid);\r\n          }\r\n      }\r\n  }\r\n    getDefaultValue4Input=(attr,spec,)=>{\r\n        for(let j=0;j<(spec||[]).length;++j){\r\n            if(spec[j].aid==attr.attrId){\r\n                return spec[j].desc;\r\n            }\r\n        }\r\n        return \"\";\r\n    }\r\n  getDefaultValue=(mainIds,selectOptionIds,attr,spec)=>{\r\n      // // 优先进行置灰的匹配\r\n      for(let i=0;i<mainIds.length;++i){\r\n          if(selectOptionIds.indexOf(mainIds[i])!=-1){\r\n              return mainIds[i];\r\n          }\r\n      }\r\n      // 未匹配到，返回全量数据里对应的回显数据\r\n      for(let j=0;j<(spec||[]).length;++j){\r\n        if(spec[j].aid==attr.attrId){\r\n          return spec[j].vid;\r\n        }\r\n      }\r\n      return \"\";\r\n  }\r\n  shouldBeDisable=(mainIds,selectOptionIds)=>{\r\n    for(let i=0;i<mainIds.length;++i){\r\n      if(selectOptionIds.indexOf(mainIds[i])!=-1){\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n  //比较两个属性值是否为同一商品\r\n  matchAttr(attrA,attrB){\r\n      let attrAArr = [];\r\n      for(let i =0;i<(attrA||[]).length;++i){\r\n          attrAArr.push(attrA[i].aid +':'+attrA[i].vid);\r\n      }\r\n      let attrBArr = [];\r\n      for(let j =0;j<(attrB||[]).length;++j){\r\n          attrBArr.push(attrB[j].aid +':'+attrB[j].vid);\r\n      }\r\n        if (attrAArr && attrBArr){\r\n            let strA = JSON.stringify(attrAArr.sort());\r\n            let strB = JSON.stringify(attrBArr.sort());\r\n            return strA == strB\r\n        } else {\r\n            return false\r\n        }\r\n    }\r\n  onChangeAttr=(e,aid,attrObj,type)=>{\r\n    let value = type=='select'?e:e.target.value;\r\n    let unit = {aid:aid,vid:'',desc:''};\r\n    let result = '';\r\n\r\n      //未匹配到场景：选择了类目，默认生成一条sku数据，该sku的attr为空\r\n      //操作：直接对第一条进行赋值\r\n      if(this.props.itemTmplPublishVo && this.props.itemTmplPublishVo.cid && this.props.itemTmplPublishVo.itemTmplSkuVoList.length==1 && !this.props.itemTmplPublishVo.itemTmplSkuVoList[0].attributes){\r\n          let orginData = this.props.itemTmplPublishVo.itemTmplSkuVoList[0].specAttributes\r\n          for(let k =0;k<(orginData||[]).length;++k){\r\n              if(orginData[k].aid==aid){\r\n                  if(type=='select'){\r\n                      orginData[k].vid = value\r\n                  }\r\n                  if(type=='input'){\r\n                      orginData[k].desc = value\r\n                  }\r\n                  // 此处调用redux回调\r\n              result = this.props.itemTmplPublishVo;\r\n              result.itemTmplSkuVoList[0].specAttributes = orginData;\r\n              this.props.updateItemTmplAction(result);\r\n              this.forceUpdate();\r\n              return;\r\n              }\r\n          }\r\n          //未匹配到 specAttribute的aid 新增\r\n          // 此处调用redux回调\r\n          result = this.props.itemTmplPublishVo;\r\n          type=='select'?unit.vid = value : unit.desc = value;\r\n          if(orginData){\r\n              orginData.push(unit)\r\n          }else{\r\n              orginData=[unit]\r\n          }\r\n          result = this.props.itemTmplPublishVo;\r\n          result.itemTmplSkuVoList[0].specAttributes = orginData;\r\n          this.props.updateItemTmplAction(result);\r\n          this.forceUpdate();\r\n          return;\r\n      }\r\n      // 全量数据\r\n      let sourceData = this.props.itemTmplPublishVo.itemTmplSkuVoList;\r\n    // 从全量的数据中，找到匹配的sku\r\n\r\n      for(let i =0;i<sourceData.length;++i){\r\n        if(this.matchAttr(attrObj.attributes,sourceData[i].attributes)){\r\n          // 循环 匹配specAttribute的aid 更新\r\n          for(let j=0;j<(sourceData[i].specAttributes||[]).length;++j){\r\n            if(sourceData[i].specAttributes[j].aid == aid){\r\n                if(type=='select'){\r\n                  if(sourceData[i].specAttributes[j]){\r\n                      sourceData[i].specAttributes[j].vid = value;\r\n                  }else{\r\n                      //  ???\r\n                      // unit.vid = value;\r\n                      // sourceData[i].specAttributes = [unit];\r\n                  }\r\n                }\r\n                if(type=='input'){\r\n                    if(sourceData[i].specAttributes[j]){\r\n                        sourceData[i].specAttributes[j].desc = value;\r\n                    }else{\r\n                        //  ???\r\n                        // unit.desc = value;\r\n                        // sourceData[i].specAttributes = [unit];\r\n                    }\r\n                }\r\n                // 此处调用redux回调\r\n                result = this.props.itemTmplPublishVo;\r\n                result.itemTmplSkuVoList = sourceData;\r\n                this.props.updateItemTmplAction(result);\r\n                this.forceUpdate();\r\n                return;\r\n            }\r\n          }\r\n          //未匹配到 specAttribute的aid 新增\r\n            type=='select'?unit.vid = value : unit.desc = value;\r\n            sourceData[i].specAttributes?sourceData[i].specAttributes.push(unit):sourceData[i].specAttributes = [unit];\r\n            // 此处调用redux回调\r\n            result = this.props.itemTmplPublishVo;\r\n            result.itemTmplSkuVoList = sourceData;\r\n            this.props.updateItemTmplAction(result);\r\n            this.forceUpdate();\r\n            return ;\r\n\r\n        }\r\n      }\r\n  }\r\n\r\n    componentWillReceiveProps(nextProps){\r\n        console.log('mytest--------------------willReceiveProps---------------------');\r\n      if(\r\n          ((!this.props.itemTmplPublishVo || !this.props.itemTmplPublishVo.cid) &&nextProps.itemTmplPublishVo && nextProps.itemTmplPublishVo.cid )\r\n          ||\r\n          (this.props.itemTmplPublishVo && this.props.itemTmplPublishVo.cid && nextProps.itemTmplPublishVo && nextProps.itemTmplPublishVo.cid && nextProps.itemTmplPublishVo.cid !=this.props.itemTmplPublishVo.cid)\r\n      )\r\n      {\r\n          console.log('mytest--------------------willReceiveProps,cid changed---------------------');\r\n          if(this.props.type==1){\r\n              this.props.getAttributeByCategoryIdForPlatform(this.props.itemTmplPublishVo.cid);\r\n          }else if (this.props.type==2 || this.props.type==3){\r\n              this.props.getAttributeByCategoryIdForShop(this.props.itemTmplPublishVo.cid);\r\n          }\r\n      }\r\n\r\n        if(nextProps.attributeData && nextProps.attributeData.data && nextProps.attributeData.data.data){\r\n            let attributeArr = JSON.parse(JSON.stringify(nextProps.attributeData.data.data || []));\r\n            console.log(this.props.editData.attrbuteData, attributeArr);\r\n            if(this.props.editData.attrbuteData && this.props.editData.attrbuteData.length > 0) {\r\n                this.props.editData.attrbuteData.map((item, index) => {\r\n                    let flag = false;\r\n                    attributeArr.map((_item, index) => {\r\n                        if((item.baseAttrId && _item.baseAttrId && item.baseAttrId == _item.baseAttrId) || item.attrId == _item.attrId) {\r\n                            flag = true;\r\n                            attributeArr[index].attrId = item.attrId;\r\n                            item.platformCategoryAttributeValues.map(attrItem => {\r\n                                let status = false;\r\n                                _item.platformCategoryAttributeValues.map((_attrItem, _index) => {\r\n                                    if((attrItem.baseAttrValueId && _attrItem.baseAttrValueId && attrItem.baseAttrValueId == _attrItem.baseAttrValueId) || attrItem.attrValueId == _attrItem.attrValueId) {\r\n                                        status = true;\r\n                                        attributeArr[index].platformCategoryAttributeValues[_index].attrValueId = attrItem.attrValueId;\r\n                                    }\r\n                                });\r\n                                if(!status) {\r\n                                    attributeArr[index].platformCategoryAttributeValues.push(attrItem);\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                    if(!flag) {\r\n                        attributeArr.push(item);\r\n                    }\r\n                });\r\n            }\r\n\r\n            if(this.props.editData.saleData && this.props.editData.saleData.length > 0) {\r\n                this.props.editData.saleData.map((item, index) => {\r\n                    let flag = false;\r\n                    attributeArr.map((_item, index) => {\r\n                        if((item.baseAttrId && _item.baseAttrId && item.baseAttrId == _item.baseAttrId) || item.attrId == _item.attrId) {\r\n                            flag = true;\r\n                            attributeArr[index].attrId = item.attrId;\r\n                            item.platformCategoryAttributeValues.map(attrItem => {\r\n                                let status = false;\r\n                                _item.platformCategoryAttributeValues.map((_attrItem, _index) => {\r\n                                    if((attrItem.baseAttrValueId && _attrItem.baseAttrValueId && attrItem.baseAttrValueId == _attrItem.baseAttrValueId) || attrItem.attrValueId == _attrItem.attrValueId) {\r\n                                        status = true;\r\n                                        attributeArr[index].platformCategoryAttributeValues[_index].attrValueId = attrItem.attrValueId;\r\n                                    }\r\n                                });\r\n                                if(!status) {\r\n                                    attributeArr[index].platformCategoryAttributeValues.push(attrItem);\r\n                                }\r\n                            });\r\n                        }\r\n                    });\r\n                    if(!flag) {\r\n                        attributeArr.push(item);\r\n                    }\r\n                });\r\n            }\r\n\r\n            this.setState({\r\n                attrbuteData: attributeArr\r\n            });\r\n        }\r\n    }\r\n  render() {\r\n        console.log('mytestitemTmplPublishVoitemTmplPublishVoitemTmplPublishVo:',this.props.itemTmplPublishVo);\r\n    //const attrbuteData = this.props.attributeData.data && this.props.attributeData.data.data;\r\n    const {attrbuteData} = this.state;\r\n    let skuList = this.props.itemTmplPublishVo && this.props.itemTmplPublishVo.itemTmplSkuVoList && this.props.itemTmplPublishVo.itemTmplSkuVoList.length>0?\r\n        this.props.itemTmplPublishVo.itemTmplSkuVoList:[{attributes:[],specAttributes:[]}];\r\n    return (\r\n      <div>\r\n        <Collapse accordion>\r\n            {\r\n                this.props.itemTmplPublishVo.cid && skuList.map((sku)=>{\r\n                if(sku && sku.skuStatus==1){return (\r\n                    <Panel header = {sku && sku.attributes && sku.attributes.reduce((result,sku)=>{return result+=' '+sku.vName},'')}>\r\n                        {\r\n                            attrbuteData && attrbuteData.map && attrbuteData.map((attr,index)=> {\r\n                                return (\r\n                                    <div>\r\n                                      <span>\r\n                                          {attr.attrName||' '}:\r\n                                      </span>\r\n                                      <div className={style.selectDiv}>\r\n                                        <Select\r\n                                            onChange = {(e,aid,attrObj,type)=>{this.onChangeAttr(e,attr.attrId,sku,'select')}}\r\n                                            defaultValue=\"\"\r\n                                            style={{ width: 120, marginRight:'10px' }}\r\n                                            value={this.getDefaultValue(sku.attributes && sku.attributes.map((i)=>{return String(i.vid)})||[],(attr.platformCategoryAttributeValues||[]).map((i)=>{return String(i.attrValueId)})||[],attr,sku.specAttributes)}\r\n                                            disabled ={this.shouldBeDisable(sku.attributes && sku.attributes.map((i)=>{return String(i.vid)})||[],(attr.platformCategoryAttributeValues||[]).map((i)=>{return String(i.attrValueId)})||[])}\r\n                                        >\r\n                                          <Option value=\"\">请选择</Option>\r\n                                            {\r\n                                                (attr.platformCategoryAttributeValues||[]).map((option)=>{\r\n                                                  return (\r\n                                                      <Option value={String(option.attrValueId)}>{option.attrValueName}</Option>\r\n                                                      )\r\n                                                })\r\n                                            }\r\n                                        </Select>\r\n                                        <Input\r\n                                            value={this.getDefaultValue4Input(attr,sku.specAttributes,attrbuteData)}\r\n                                            style={{ width: 500 }}\r\n                                            onChange = {(e)=>{this.onChangeAttr(e,attr.attrId,sku,'input')}}\r\n                                            disabled ={this.shouldBeDisable(sku.attributes && sku.attributes.map((i)=>{return String(i.vid)})||[],(attr.platformCategoryAttributeValues||[]).map((i)=>{return String(i.attrValueId)})||[])}\r\n                                        />\r\n                                      </div>\r\n                                    </div>\r\n                                )\r\n                            })\r\n                        }\r\n                    </Panel>\r\n                );}\r\n              })\r\n            }\r\n\r\n        </Collapse>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]}