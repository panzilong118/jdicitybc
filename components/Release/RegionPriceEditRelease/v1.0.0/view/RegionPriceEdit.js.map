{"version":3,"sources":["../../../../../src/components/Release/RegionPriceEditRelease/v1.0.0/view/RegionPriceEdit.js"],"names":["Content","CheckboxGroup","Group","RadioGroup","FormItem","Item","uuid","RegionPriceEdit","create","props","regionalClick","type","params","requestInfo","push","shopAddressId","itemTmplPublishVo","itemPerfectVo","placeDeliveryId","length","getRegionalPrice","then","res","code","showModal","warning","console","log","preSkuPriceVoList","index","areaPriceList","initialAllSourceData","setState","visible","handleCancel","e","k","state","visiblePop","visibleView","initdata","key","count","totalPrice","inventory","attributes","ifchecked","addressDATA","checkedList","afterChecked","optionsList","regionalList","supplyPrice","column","columns","lastKey","initialData","form","validateFields","err","values","buildData","JSON","parse","supplyStatus","Number","updateItemTmplAction","arealist","checkarealist","priceList","Array","keys","price","areaList","area","tmp","areaId","split","areaName","areaNumber","splice","formItemLayout","labelCol","span","wrapperCol","getFieldDecorator","getFieldValue","formItems","map","createAreaGroup","showArea","initialValue","initialAreaTitle","rules","required","message","border","createCheckboxGroup","showCheckArea","validateTrigger","pattern","remove","areaOptions","regionalArr","item","id","value","name","label","defaultvalue","skuParamList","slice","indexOf","areaIds","areaNames","i","formValue","getFieldsValue","allCheckedValue","concat","disableResult","x","y","disabled","width","checkedValues","onChangeCheckboxGroup","hideArea","edit","shift","nextKeys","setFieldsValue","filter","areaTitle","areaTitile2Str","valueStr","areaTitleStr","areaTitleTmp","hideCheckArea","result","substr","regionDataTransform","initialKeys","initTotalPrice","handleOk","createAreaPriceDom","add","marginTop","Component"],"mappings":"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","file":"RegionPriceEdit.js","sourcesContent":["/**\r\n * @file 发布商品-供货信息-设置地域价组件\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Form,Button,Layout,Modal,Checkbox,Table,Col,Row,\r\n         Popover,Radio,InputNumber,message,Input,Icon } from 'jdcloudui';\r\n\r\n\r\nconst { Content } = Layout;\r\nconst CheckboxGroup = Checkbox.Group;\r\nconst RadioGroup = Radio.Group;\r\nconst FormItem = Form.Item\r\n\r\nlet uuid = 0;\r\n@Form.create()\r\n\r\nexport default class RegionPriceEdit extends Component {\r\n  constructor(props){\r\n    super(props);\r\n\r\n    this.initdata=[{\r\n      key: 0,\r\n      count: 0,\r\n      totalPrice: null,//供货价\r\n      inventory: null,//销量\r\n      attributes: null,\r\n      ifchecked: 1\r\n    }],\r\n    this.state={\r\n      addressDATA:[],\r\n      checkedList:[],\r\n      afterChecked: [],\r\n      optionsList:[],\r\n      regionalList:[],\r\n      initdata:this.initdata,\r\n      inventory:{},\r\n      supplyPrice:{},\r\n      visible:false,\r\n      visiblePop:{},\r\n      visibleView:{},\r\n      column:this.columns,\r\n    };\r\n    this.lastKey = 0;\r\n    this.initialData=[];\r\n  }\r\n\r\n  //地域价Modal\r\n  regionalClick=()=>{\r\n\r\n    if(this.props.type == 2){\r\n      let params = {}\r\n      params.requestInfo = [];\r\n      params.requestInfo.push({\r\n        shopAddressId:this.props.itemTmplPublishVo.itemPerfectVo.placeDeliveryId\r\n      })\r\n      if(params.requestInfo[0].shopAddressId&&params.requestInfo[0].shopAddressId.length > 0){\r\n        params.requestInfo = JSON.stringify(params.requestInfo)\r\n        this.props.getRegionalPrice(params).then((res)=>{\r\n          if( res.code == 0){\r\n            this.showModal()\r\n          }\r\n        })\r\n      } else {\r\n        message.warning('请选择发货地')\r\n      }\r\n    } else {\r\n      this.showModal()\r\n    }\r\n  }\r\n\r\n  showModal = () => {\r\n    console.log(this.props.itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList[this.props.index].areaPriceList)\r\n     this.initialAllSourceData();\r\n    this.setState({\r\n        visible: true,\r\n    });\r\n  }\r\n\r\n    //表单递交按钮\r\n    handleOk() {\r\n    this.props.form.validateFields((err, values) => {\r\n      if (!err) {\r\n        console.log('Received values of form: ', values);\r\n       this.buildData(values)\r\n      let itemTmplPublishVo = JSON.parse(JSON.stringify(this.props.itemTmplPublishVo));\r\n      if(itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList[this.props.index]){\r\n          itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList[this.props.index].areaPriceList=this.buildData(values)\r\n       } else {\r\n          itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList[this.props.index] = {};\r\n          itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList[this.props.index].areaPriceList=this.buildData(values)\r\n          itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList[this.props.index].supplyStatus = 1;\r\n       }\r\n      itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList[this.props.index].supplyPrice = Number(this.buildData(values)[0].supplyPrice)\r\n      this.props.updateItemTmplAction(itemTmplPublishVo)\r\n\r\n        //关闭选择地域和查看地域弹窗\r\n      for(var k in this.state.visiblePop){\r\n        this.state.visiblePop[k]=false;\r\n      }\r\n\r\n      for(var k in this.state.visibleView){\r\n        this.state.visibleView[k]=false;\r\n      }\r\n\r\n        this.setState({\r\n          visible: false,\r\n          arealist:[],\r\n          checkarealist:[],\r\n          visiblePop:this.state.visiblePop,\r\n          visibleView:this.state.visibleView,\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n      //重组表单数据\r\n  buildData(values){\r\n    var priceList=new Array();\r\n    //根据keys获取：{price，id+Name}  多个地域对应一个价格--->拆分为单个价格对应单个地域\r\n    var keys = values.keys;\r\n    for(var k in keys){\r\n      var price = values[`price-${keys[k]}`];\r\n      var areaList = values[`areaList-${keys[k]}`];\r\n      if(areaList && areaList.length>0){\r\n        for(var area in areaList){\r\n          var tmp={\r\n            supplyPrice:price,\r\n            areaId:areaList[area].split(',')[0],\r\n            areaName:areaList[area].split(',')[1],\r\n            //preCommitSkuPriceId:this.findPreCommitSkuPriceId(areaList[area].split(',')[0]),\r\n            areaNumber: 1,\r\n          };\r\n          priceList.push(tmp);\r\n        }\r\n      }\r\n    }\r\n    priceList.splice(0,0,{\r\n        areaId:0,\r\n        areaName:'全国',\r\n        areaNumber:1,\r\n        supplyPrice:values.totalPrice\r\n    })\r\n    return priceList;\r\n    //return {index:this.props.index,totalPrice:values.totalPrice,priceList:priceList,updatePrice:true}\r\n  }\r\n\r\n  handleCancel = (e) => {\r\n\r\n    //关闭选择地域和查看地域弹窗\r\n    for(var k in this.state.visiblePop){\r\n      this.state.visiblePop[k]=false;\r\n    }\r\n\r\n    for(var k in this.state.visibleView){\r\n      this.state.visibleView[k]=false;\r\n    }\r\n    this.setState({\r\n        visible: false,\r\n        visiblePop:this.state.visiblePop,\r\n        visibleView:this.state.visibleView,\r\n    });\r\n  }\r\n\r\n    //生成  地域价组件\r\n    createAreaPriceDom(){\r\n      const formItemLayout = {\r\n        labelCol: {span: 3},\r\n        wrapperCol: {span: 21},\r\n      };\r\n      const { getFieldDecorator, getFieldValue } = this.props.form;\r\n     const keys = getFieldValue('keys');\r\n      const formItems = keys && keys.length>0 && keys.map((k) => {\r\n          var supplyPrice = '';\r\n          if(this.initialData && this.initialData[k]){\r\n            supplyPrice = this.initialData[k].supplyPrice;\r\n          }\r\n          // //地区选择框 显示状态\r\n          // var state = false;\r\n         // if(this.state.arealist && this.state.arealist[k]){\r\n        //    state = this.state.arealist[k];\r\n         // }\r\n          return (\r\n            <div key={`${k}-areaDomDiv`}>\r\n              <FormItem require={true} key={`${k}-areaDomItem`}>\r\n                <Row>\r\n                  <Col span={3} className=\"selectRegion\">\r\n                    <Popover\r\n                      content={this.createAreaGroup(k)}\r\n                      overlayClassName=\"rArea\"\r\n                      trigger=\"click\"\r\n                      placement=\"bottomLeft\"\r\n                      visible={this.state.visiblePop[k]}\r\n                    >\r\n                      <a onClick={()=>this.showArea(k)}>选择地域<Icon type=\"caret-down\"/></a>\r\n                    </Popover>\r\n                  </Col>\r\n                  <Col span={7}>\r\n                    {getFieldDecorator(`areaTitle-${k}`, {\r\n                      initialValue:this.initialAreaTitle(k),\r\n                      rules: [{\r\n                        required: true,\r\n                        message: \"请选择地域！\",\r\n                      }],\r\n                    })(\r\n                      <Input disabled={true} maxLength=\"15\" style={{ border: 0}} className=\"f-toe\"/>\r\n                    )}\r\n                  </Col>\r\n                  <Col span={3} offset={11}>\r\n                    <Popover\r\n                      content={this.createCheckboxGroup(k)}\r\n                      trigger=\"click\"\r\n                      placement=\"bottomLeft\"\r\n                      visible={this.state.visibleView[k]}\r\n                    >\r\n                      <a onClick={()=>this.showCheckArea(k)}>查看地域</a>\r\n                    </Popover>\r\n                  </Col>\r\n                </Row>\r\n              </FormItem>\r\n              <FormItem {...formItemLayout} label=\"供货价\" key={`${k}-areaPrice`}>\r\n                <span>￥</span>\r\n                <span className=\"w160\">\r\n                  {getFieldDecorator(`price-${k}`, {\r\n                    initialValue: supplyPrice,\r\n                    validateTrigger: ['onChange', 'onBlur'],\r\n                    rules: [{\r\n                      required: true,\r\n                      message: \"请输入地域价！\",\r\n                    },{\r\n                       pattern:/^(?!0+(?:\\.0+)?$)(?:[1-9]\\d*|0)(?:\\.\\d{1,2})?$/,\r\n                      message:'请输入数字且最多为两位小数！'\r\n                    }],\r\n                  })(\r\n                    <Input />\r\n                  )}\r\n              </span>\r\n                <a className=\"actionDel\" onClick={()=> this.remove(k)}>删除地域</a>\r\n              </FormItem>\r\n            </div>\r\n          );\r\n    });\r\n    return formItems;\r\n  }\r\n\r\n   //生成 选择地域弹框\r\n   createAreaGroup(k){\r\n    let areaOptions=[];\r\n      areaOptions = this.props.regionalArr && this.props.regionalArr.map((item,index) => {\r\n          return {\r\n            index:index,\r\n            id:item.id,\r\n            code:item.code,\r\n            value:item.code+','+item.name,\r\n            label:item.name,     \r\n          };\r\n        });\r\n    var defaultvalue = new Array();\r\n    let skuParamList = this.initialData.slice(0);\r\n    //获取省份默认选中信息\r\n    if(skuParamList && skuParamList.length>0 && skuParamList[k]){\r\n      if(skuParamList[k].areaId && skuParamList[k].areaId.indexOf(',')!=-1 && skuParamList[k].areaName &&skuParamList[k].areaName.indexOf(',')!=-1){\r\n        var areaIds = skuParamList[k].areaId.split(',');\r\n        var areaNames = skuParamList[k].areaName.split(',');\r\n        if(areaIds.length>0 && areaNames.length>0){\r\n          for(var i=0;i<areaIds.length;++i){\r\n            if(areaIds[i]!=0){\r\n              var tmp = areaIds[i]+','+areaNames[i];\r\n              defaultvalue.push(tmp);\r\n            }\r\n          }\r\n        }\r\n      }else{\r\n        var areaId = skuParamList[k].areaId;\r\n        var areaName = skuParamList[k].areaName;\r\n        var tmp = areaId+','+areaName;\r\n        defaultvalue.push(tmp);\r\n      }\r\n    }\r\n\r\n    let formValue = this.props.form.getFieldsValue();\r\n    let keys = formValue.keys;\r\n    let allCheckedValue=[];\r\n\r\n    for(let i in keys){\r\n      let tmp = formValue[`areaList-${keys[i]}`];\r\n      if(tmp &&　k!=keys[i]){\r\n        allCheckedValue = allCheckedValue.concat(tmp);\r\n      }\r\n    }\r\n\r\n    let disableResult =[];\r\n    for(var x in areaOptions){\r\n      for(var y in allCheckedValue){\r\n        if(areaOptions[x].value==allCheckedValue[y]){\r\n          areaOptions[x].disabled = true;\r\n        }\r\n      }\r\n    }\r\n    const { getFieldDecorator, getFieldValue } = this.props.form;\r\n    return(\r\n      <FormItem key={`${k}-checkgroup`}>\r\n        <div className=\"areaList\" style={{width:'500px'}}>\r\n          {getFieldDecorator(`areaList-${k}`, {\r\n           initialValue: defaultvalue?defaultvalue:'',\r\n          })(\r\n            <CheckboxGroup\r\n              //options={this.state.regionalList}\r\n              options={areaOptions}\r\n              onChange={(checkedValues)=>this.onChangeCheckboxGroup(checkedValues)}\r\n            />\r\n          )}\r\n          <div className=\"popButton\">\r\n            <Button type=\"primary\" size=\"small\" onClick={()=>this.hideArea(k)}>确定</Button>\r\n          </div>\r\n        </div>\r\n      </FormItem>\r\n    );\r\n  }\r\n\r\n  onChangeCheckboxGroup(checkedValues){\r\n    console.log(checkedValues);\r\n  }\r\n\r\n    //根据数据数量，生成keys。发布和编辑不同状态无法调平，所以用了不同的方式生成keys\r\n    initialKeys(){\r\n      var keys=new Array();\r\n      if(this.props.edit){\r\n        var i=-1;     \r\n      } else {\r\n        var i=0;\r\n      };\r\n\r\n      if(this.props.edit){\r\n        var areaList = this.initialData;\r\n        if(areaList && areaList.length>0){\r\n          if(areaList[0].areaId == '0'){\r\n            areaList.shift();\r\n          }\r\n       }\r\n      } else {\r\n       var areaList =  this.props.itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList[this.props.index].areaPriceList\r\n      }\r\n\r\n      var tmp = (areaList || []).map((item)=>{\r\n          keys.push(++i);\r\n        });\r\n        \r\n        if(!this.props.edit){\r\n          let formValue = this.props.form.getFieldsValue();\r\n          keys = formValue.keys || []\r\n        };\r\n      return keys;\r\n    }\r\n\r\n    //添加地域条\r\n    add(){\r\n      const { form } = this.props;\r\n      const keys = form.getFieldValue('keys');\r\n      console.log('nextKeys',this.lastKey)\r\n      const nextKeys = keys.concat(this.lastKey);\r\n      form.setFieldsValue({\r\n        keys: nextKeys,\r\n      });\r\n      this.lastKey++;\r\n      //新增设置地域、查看地域 窗口状态\r\n      var arealist = this.state.regionalList;\r\n  \r\n      this.setState({\r\n        arealist:arealist,\r\n        // checkarealist:checkarealist\r\n      });\r\n    }\r\n\r\n      //删除地域条\r\n  remove(k){\r\n    console.log('remove k is:',k);\r\n    var arealist = this.state.regionalList;\r\n    delete arealist[k];\r\n\r\n    this.setState({\r\n      arealist: arealist,\r\n     // checkarealist: checkarealist\r\n    });\r\n    //更新keys\r\n    const { form } = this.props;\r\n    let keys = form.getFieldValue('keys');\r\n    this.props.form.setFieldsValue({\r\n      keys: keys.filter(key => key !== k),\r\n    });\r\n  }\r\n\r\n  showArea(k){\r\n    this.state.visiblePop[k]=true\r\n    this.setState({\r\n      visiblePop:this.state.visiblePop\r\n    })\r\n  }\r\n\r\n    //选择省份：隐藏\r\n    hideArea(k) {\r\n      //保存到title\r\n      const { form } = this.props;\r\n      var areaTitle = form.getFieldValue(`areaList-${k}`);\r\n      areaTitle = this.areaTitile2Str(areaTitle);\r\n      this.props.form.setFieldsValue({\r\n        [`areaTitle-${k}`]: areaTitle\r\n      });\r\n      this.state.visiblePop[k]=false\r\n      this.setState({\r\n        visiblePop:this.state.visiblePop\r\n      })\r\n    }\r\n\r\n      //查看省份：隐藏\r\n  hideCheckArea(k) {\r\n    this.state.visibleView[k]=false\r\n    this.setState({\r\n      visibleView:this.state.visibleView\r\n    })\r\n  }\r\n  \r\n\r\n      //初始化选择地域栏的 \"选中展示\" Title\r\n    initialAreaTitle(k){\r\n          //bugfix HNCBTOB-327 商品待审核状态下，再次编辑设置地域价，获取不到地域，即Title无回显数据\r\n          const { getFieldDecorator, getFieldValue } = this.props.form;\r\n          var value = this.props.form.getFieldValue(`areaList-${k}`);\r\n\r\n          var valueStr = this.areaTitile2Str(value);\r\n          return valueStr;\r\n        }\r\n    //areaTitle数据 数组为字符串\r\n    areaTitile2Str(areaTitle){\r\n      var areaTitleStr='';\r\n      if(areaTitle){\r\n        for(var i in areaTitle){\r\n          var areaTitleTmp = areaTitle[i].split(',')[1]+' ';\r\n          areaTitleStr+=areaTitleTmp;\r\n        }        \r\n      }\r\n      return areaTitleStr;\r\n    }\r\n\r\n      //查看省份\r\n  createCheckboxGroup(k){\r\n    const { getFieldDecorator, getFieldValue } = this.props.form;\r\n\r\n    var value = this.props.form.getFieldValue(`areaList-${k}`);\r\n    var valueStr = this.areaTitile2Str(value);\r\n\r\n    return(\r\n      <div className=\"areaList\" style={{width:'240px'}}>\r\n        {valueStr}\r\n        <div className=\"popButton\">\r\n          <Button type=\"primary\" size=\"small\" onClick={()=>this.hideCheckArea(k)}>确定</Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  showCheckArea(k) {\r\n    this.state.visibleView[k]=true\r\n    this.setState({\r\n      visibleView:this.state.visibleView\r\n    })\r\n  }\r\n\r\n  regionDataTransform(){\r\n    let priceList = this.props.itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList[this.props.index].areaPriceList;\r\n    console.log(priceList)\r\n    var result = [];\r\n    var price = '';\r\n    var areaName = '';\r\n    var areaId='';\r\n\r\n\r\n    // if(this.props.edit){     \r\n    // //过滤全国价\r\n    // if(priceList.length>1){\r\n    //     console.log(priceList.length)\r\n    //     for(var j in priceList){\r\n    //       if(priceList[j].areaId==0 || priceList[j].areaId=='0'){\r\n    //         priceList.splice(j,1);\r\n    //       }\r\n    //     }\r\n    //   }\r\n    // }\r\n\r\n    if(priceList.length>0){\r\n      price =priceList[0].supplyPrice;\r\n      for(var k in priceList){\r\n        if(price===priceList[k].supplyPrice){\r\n          price = priceList[k].supplyPrice;\r\n          areaName = areaName+priceList[k].areaName+',';\r\n          areaId = areaId+priceList[k].areaId+',';\r\n        }else{\r\n          areaName = areaName.substr(0,areaName.length-1);\r\n          areaId = areaId.substr(0,areaId.length-1);\r\n          result.push({areaId:areaId,areaName:areaName,supplyPrice:price});\r\n          price = priceList[k].supplyPrice;\r\n          areaName = priceList[k].areaName+',';\r\n          areaId = priceList[k].areaId+',';\r\n        }\r\n      }\r\n      areaName = areaName.substr(0,areaName.length-1);\r\n      areaId = areaId.substr(0,areaId.length-1);\r\n      result.push({areaId:areaId,areaName:areaName,supplyPrice:price});\r\n    }\r\n     console.log(result)\r\n\r\n    return result;\r\n  }\r\n\r\n  initialAllSourceData(){\r\n    //if(this.props.updatePrice || (this.props.areaList && this.props.areaList.length > 0)){\r\n      this.initialData = this.regionDataTransform()\r\n     if(this.props.edit){\r\n      if(this.initialData.length == '1'){\r\n        this.lastKey = this.initialData.length-1;\r\n      } else {\r\n        this.lastKey = this.initialData.length;\r\n      }\r\n     } else {\r\n      this.lastKey = this.initialData.length;\r\n     }\r\n\r\n      this.props.form.setFieldsValue({\r\n        keys:this.initialKeys(),\r\n        totalPrice:this.props.itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList[this.props.index].areaPriceList[0].supplyPrice || ''\r\n      });\r\n  }\r\n  \r\n  render() {\r\n    console.log(this.props,\"---\")\r\n    const { getFieldDecorator, getFieldValue } = this.props.form;\r\n\r\n    const initTotalPrice = this.props.itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList[this.props.index].areaPriceList[0].supplyPrice || '';\r\n    this.props.form.setFieldsValue\r\n    getFieldDecorator('keys', {value:this.initialKeys()});\r\n    const formItemLayout = {\r\n      labelCol: {span: 3},\r\n      wrapperCol: {span: 21},\r\n    };\r\n\r\n    return (\r\n        <span>\r\n        <a className=\"ml10 text-link\" onClick={()=>this.regionalClick()}>设置地域价</a>\r\n        <Modal\r\n          title='设置地域价'\r\n          className=\"rModal\"\r\n          visible={this.state.visible}\r\n          onOk={()=>this.handleOk()} \r\n          onCancel={this.handleCancel}\r\n          width={'640px'}\r\n        //  key={this.state.modalKey}\r\n          maskClosable={false}\r\n        >\r\n          <Form>\r\n          <div className=\"countryBox\">\r\n              <h3>全国统一价</h3>\r\n              <FormItem {...formItemLayout}  label=\"供货价\">\r\n                <span>￥</span>\r\n                <span className=\"w160\">\r\n                {getFieldDecorator(`totalPrice`, {\r\n                  initialValue: initTotalPrice,\r\n                  validateTrigger: ['onChange', 'onBlur'],\r\n                  rules: [{\r\n                    required: true,\r\n                    message: \"请填写价格！\",\r\n                  },{\r\n                    pattern:/^(?!0+(?:\\.0+)?$)(?:[1-9]\\d*|0)(?:\\.\\d{1,2})?$/,\r\n                    message:'请输入数字且最多为两位小数！'\r\n                  }],\r\n                })(\r\n                  <Input maxLength='10'/>\r\n                )}\r\n                </span>\r\n              </FormItem>\r\n            </div>\r\n            <div className=\"regionBox\">\r\n              <h3>地域价</h3>\r\n              <div className=\"regionList\">\r\n                {this.createAreaPriceDom()}\r\n                <Button type=\"dashed\" size=\"large\" \r\n                        icon=\"plus\" onClick={()=>this.add()} \r\n                        style={{width:'100%',marginTop:'10px'}}>添加地域</Button>\r\n              </div>\r\n            </div>\r\n          </Form>\r\n        </Modal>\r\n      </span>\r\n    );\r\n  }\r\n}\r\n"]}