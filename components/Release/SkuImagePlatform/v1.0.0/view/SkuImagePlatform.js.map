{"version":3,"sources":["../../../../../src/components/Release/SkuImagePlatform/v1.0.0/view/SkuImagePlatform.js"],"names":["RadioGroup","Group","SkuImagePlatform","props","handleColumns","title","dataIndex","key","render","value","row","map","item","index","vName","text","skuImgInfos","url","alt","info","handleReChange","handleCancel","e","handleALTChange","handleOnChange","flag","isEdit","setState","radioValue","target","handleGetSaleAttributes","data","aName","aid","state","itemImgInfos","i","saleAttributes","attributes","k","vid","push","itemTmplPublishVo","itemSkuPicVoList","updateItemTmplAction","error","init","radio","params","length","result","dataArr","cName","bName","m","aName1","Aot","_item","aName2","aName3","Component"],"mappings":"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","file":"SkuImagePlatform.js","sourcesContent":["/**\r\n * @file 发布商品-商品图片\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport { Radio, Table,message } from 'jdcloudui';\r\nimport UploadSelect from '../../../GoodImagePlatform/v1.0.0/view/UploadSelect/UploadSelect';\r\nimport './style/basic_img.css';\r\nconst RadioGroup = Radio.Group;\r\n\r\nclass SkuImagePlatform extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            radioValue: 0\r\n        };\r\n        //用来判断用户是否已经按照商品属性编辑过\r\n        this.flag = false;\r\n        //用来判断用户所上传的规格参数\r\n        this.isEdit = [];\r\n    }\r\n\r\n    //sku表格的columns\r\n    handleColumns = () => {\r\n        return [{\r\n            title: '规格1',\r\n            dataIndex: 'aName1',\r\n            key: 'attrName1',\r\n            render: (value, row) => (<div>{value ? value.map((item, index) => <p className=\"attr-name-p\" key={index}>{item.vName}</p>) : null}</div>)\r\n        }, {\r\n            title: '规格2',\r\n            dataIndex: 'aName2',\r\n            key: 'attrName2',\r\n            render: (value, row) => (<div>{value ? value.map((item, index) => <p className=\"attr-name-p\" key={index}>{item.vName}</p>) : null}</div>)\r\n        }, {\r\n            title: '规格3',\r\n            dataIndex: 'aName3',\r\n            key: 'attrName3',\r\n            render: (value, row) => (<div>{value ? value.map((item, index) => <p className=\"attr-name-p\" key={index}>{item.vName}</p>) : null}</div>)\r\n        }, {\r\n            title: '上传文件',\r\n            key: 'active',\r\n            render: (text, row, index) => {\r\n                let skuImgInfos = [\r\n                    {\r\n                        url:row.url,\r\n                        alt:row.alt\r\n                    }\r\n                ];\r\n                return (\r\n                    <UploadSelect\r\n                        itemImgInfos={skuImgInfos}\r\n                        handleReChange={(info) => this.handleReChange(info, index, row)}\r\n                        handleCancel={() => this.handleCancel(index, row)}\r\n                        handleALTChange={(e) => this.handleALTChange(e, index, row)}\r\n                    />\r\n                )\r\n            }\r\n        }]\r\n    };\r\n\r\n\r\n    //选项卡change\r\n    handleOnChange = (e) => {\r\n        this.flag = false;\r\n        this.isEdit = [];\r\n        this.setState({\r\n            radioValue: e.target.value\r\n        })\r\n    };\r\n\r\n\r\n    //初始化radio数据\r\n    handleGetSaleAttributes = data => {\r\n        return data.map(item => {\r\n            return {\r\n                aName: item.aName,\r\n                aid: item.aid\r\n            }\r\n        });\r\n    };\r\n\r\n    //重新上传\r\n    handleReChange = (info, index, row) => {\r\n        if(info) {\r\n            if(this.state.radioValue == 0) {\r\n                this.itemImgInfos[index].url = info.url;\r\n                this.itemImgInfos[index].alt = null;\r\n            } else {\r\n                this.flag = true;\r\n                this.itemImgInfos.map((item, i) => {\r\n                    let saleAttributes = item.attributes;\r\n                    saleAttributes.map(k => {\r\n                        if(k.aid == row.aid && k.vid == row.vid) {\r\n                            this.isEdit.push({aid: row.aid, vid: row.vid});\r\n                            this.itemImgInfos[i].url = info.url;\r\n                            this.itemImgInfos[i].alt = null;\r\n                        }\r\n                    });\r\n                });\r\n            }\r\n            this.props.itemTmplPublishVo.itemSkuPicVoList = this.itemImgInfos;\r\n            this.props.updateItemTmplAction(this.props.itemTmplPublishVo);\r\n        } else {\r\n            message.error(\"上传失败\");\r\n        }\r\n    };\r\n\r\n    //删除\r\n    handleCancel = (index, row) => {\r\n        if(this.state.radioValue == 0) {\r\n            this.itemImgInfos[index].url = null;\r\n            this.itemImgInfos[index].alt = null;\r\n        } else {\r\n            this.itemImgInfos.map((item, i) => {\r\n                let saleAttributes = item.attributes;\r\n                saleAttributes.map(k => {\r\n                    if(k.aid == row.aid && k.vid == row.vid) {\r\n                        this.itemImgInfos[i].url = null;\r\n                        this.itemImgInfos[i].alt = null;\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        this.props.itemTmplPublishVo.itemSkuPicVoList = this.itemImgInfos;\r\n        this.props.updateItemTmplAction(this.props.itemTmplPublishVo);\r\n    };\r\n\r\n    //改变ALT\r\n    handleALTChange = (e, index, row) => {\r\n        if(this.state.radioValue == 0) {\r\n            this.itemImgInfos[index].alt = e.target.value;\r\n        } else {\r\n            this.itemImgInfos.map((item, i) => {\r\n                let saleAttributes = item.attributes;\r\n                saleAttributes.map(k => {\r\n                    if(k.aid == row.aid && k.vid == row.vid) {\r\n                        this.itemImgInfos[i].alt = e.target.value;\r\n                    }\r\n                });\r\n            });\r\n        }\r\n        this.props.itemTmplPublishVo.itemSkuPicVoList = this.itemImgInfos;\r\n        this.props.updateItemTmplAction(this.props.itemTmplPublishVo);\r\n    };\r\n\r\n    //初始化数据\r\n    init = (data, radio) => {\r\n        if(radio == 0) {\r\n            return data.map(item => {\r\n                let params = {\r\n                    url: item.url,\r\n                    alt: item.alt\r\n                };\r\n                item.attributes && item.attributes.length >0 && item.attributes.map((result, index) => {\r\n                    params[`aName${index + 1}`] = [result];\r\n                });\r\n                return params;\r\n            })\r\n        }else{\r\n            let dataArr = [], cName = { aName: [] }, bName = { aName: [] };\r\n            let index = 0;\r\n            data.map(item => {\r\n                item.attributes &&item.attributes.length>0 && item.attributes.map((result) => {\r\n                    if(result.aid == radio) {\r\n                        let flag = false;\r\n                        dataArr.map(m => {\r\n                            if(result.vid == m.vid) {\r\n                                flag = true;\r\n                            }\r\n                        });\r\n                        if(!flag) {\r\n                            dataArr[index] = {\r\n                                aid: result.aid,\r\n                                vid: result.vid,\r\n                                aName1: [result],\r\n                            };\r\n                            let Aot = false;\r\n                            this.isEdit.map(_item => {\r\n                                if(_item.aid == result.aid && _item.vid == result.vid) {\r\n                                    Aot = true;\r\n                                }\r\n                            });\r\n                            if(Aot) {\r\n                                dataArr[index].url = this.flag ? item.url : null\r\n                                dataArr[index].alt = this.flag ? item.alt : null\r\n                            }\r\n                            index ++;\r\n                        }\r\n                    } else {\r\n                        if(!cName.aid || cName.aid == result.aid) {\r\n                            let flag = false;\r\n                            cName.aid = result.aid;\r\n                            cName.aName.map(m => {\r\n                                if(result.vid == m.vid) {\r\n                                    flag = true;\r\n                                }\r\n                            });\r\n                            if(!flag) {\r\n                                cName.aName.push(result);\r\n                            }\r\n                        } else {\r\n                            let flag = false;\r\n                            bName.aid = result.aid;\r\n                            bName.aName.map(m => {\r\n                                if(result.vid == m.vid) {\r\n                                    flag = true;\r\n                                }\r\n                            });\r\n                            if(!flag) {\r\n                                bName.aName.push(result);\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n            });\r\n            dataArr.map((item, index) => {\r\n                dataArr[index].aName2 = cName.aName;\r\n                dataArr[index].aName3 = bName.aName;\r\n            });\r\n            return dataArr;\r\n        }\r\n    };\r\n\r\n\r\n    render() {\r\n        this.itemImgInfos = this.props.itemTmplPublishVo && this.props.itemTmplPublishVo.itemSkuPicVoList ? this.props.itemTmplPublishVo.itemSkuPicVoList : [];\r\n        let saleAttributes = this.itemImgInfos.length > 0 ? this.itemImgInfos[0].attributes : '';\r\n        let attributes = saleAttributes && this.handleGetSaleAttributes(saleAttributes);\r\n        let data = this.itemImgInfos.length > 0 ? this.init(this.itemImgInfos, this.state.radioValue)  : [];\r\n        let flag = this.itemImgInfos[0] && this.itemImgInfos[0].attributes && this.itemImgInfos[0].attributes.length > 0 ? 1 : 0;\r\n        return (\r\n            <div>\r\n                {\r\n                    this.itemImgInfos.length > 0 && flag ? (\r\n                        <div>\r\n                            <div className=\"skuSelect\">\r\n                                <span className=\"mr20 f-fs14\">\r\n                                  SKU图片\r\n                                </span>\r\n                                <span>\r\n                                  <RadioGroup defaultValue=\"0\" onChange={this.handleOnChange}>\r\n                                    <Radio value=\"0\">分别上传</Radio>\r\n                                      {attributes && attributes.map((item, index) => <Radio key={index} value={item.aid}>{`按商品${item.aName}属性上传`}</Radio>)}\r\n                                  </RadioGroup>\r\n                                </span>\r\n                                <span className=\"text-red\">(如按销售属性分组编辑，会覆盖对应SKU已编辑图片相关信息)</span>\r\n                            </div>\r\n                            <Table\r\n                                showHeader={false}\r\n                                columns={this.handleColumns()}\r\n                                dataSource={data}\r\n                                className=\"tableBorder\"\r\n                                pagination ={false}\r\n                            />\r\n                        </div>\r\n                    ) : null\r\n                }\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default SkuImagePlatform;\r\n"]}