{"version":3,"sources":["../../../../../src/components/Release/GoodImagePlatform/v1.0.0/view/GoodImagePlatform.js"],"names":["GoodImagePlatform","props","handleChange","info","map","data","url","item","alt","itemImgInfos","length","push","itemTmplPublishVo","itemPicVoList","updateItemTmplAction","error","handleReChange","index","console","log","splice","handleCancel","handleALTChange","e","target","value","styles","basic_img","UploadSelect","Component"],"mappings":"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","file":"GoodImagePlatform.js","sourcesContent":["/**\r\n * @file 发布商品-商品图片\r\n */\r\n\r\nimport React, {Component} from 'react';\r\nimport { message  } from 'jdcloudui';\r\nimport UploadSelect from './UploadSelect/UploadSelect';\r\nimport styles from \"./style/basic_img.less\";\r\n\r\nclass GoodImagePlatform extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n    }\r\n    //上传图片\r\n    handleChange = (info) => {\r\n        if(info) {\r\n            info.map(item => {\r\n                let data = {\r\n                    url: item.url,\r\n                    alt: null,\r\n                };\r\n                if(this.itemImgInfos.length < 10) {\r\n                    this.itemImgInfos.push(data);\r\n                }\r\n            });\r\n            this.props.itemTmplPublishVo.itemPicVoList = this.itemImgInfos;\r\n            this.props.updateItemTmplAction(this.props.itemTmplPublishVo);\r\n        } else {\r\n            message.error(\"上传失败\");\r\n        }\r\n    };\r\n\r\n    //重新上传\r\n    handleReChange = (info, index) => {\r\n        console.log(\"重新上传\",info,\"index\",index);\r\n        if(info) {\r\n            let item = {\r\n                url: info.url,\r\n                alt: null,\r\n            };\r\n            this.itemImgInfos.splice(index, 1, item);\r\n            this.props.itemTmplPublishVo.itemPicVoList = this.itemImgInfos;\r\n            this.props.updateItemTmplAction(this.props.itemTmplPublishVo);\r\n        } else {\r\n            message.error(\"上传失败\");\r\n        }\r\n    };\r\n\r\n    //删除\r\n    handleCancel = (index) => {\r\n        console.log(\"删除 index\",index);\r\n        this.itemImgInfos.splice(index, 1);\r\n        this.props.itemTmplPublishVo.itemPicVoList = this.itemImgInfos;\r\n        this.props.updateItemTmplAction(this.props.itemTmplPublishVo);\r\n    };\r\n\r\n    //改变ALT\r\n    handleALTChange = (e, index) => {\r\n        console.log(\"改变ALT index\",e.target.value,index);\r\n        this.itemImgInfos[index].alt = e.target.value;\r\n        this.props.itemTmplPublishVo.itemPicVoList = this.itemImgInfos;\r\n        this.props.updateItemTmplAction(this.props.itemTmplPublishVo);\r\n    };\r\n\r\n    render() {\r\n        this.itemImgInfos = this.props.itemTmplPublishVo && this.props.itemTmplPublishVo.itemPicVoList ? this.props.itemTmplPublishVo.itemPicVoList : [];\r\n        return (\r\n            <div>\r\n                <div className={styles.basic_img}>\r\n                    <span className=\"mr20 f-fs14 f-fwn\">\r\n                      <i className=\"text-red mr5\">*</i>\r\n                      商品图片\r\n                    </span>\r\n                    (至少添加一张，最多允许十张；单张图片不能大于5M；允许的图片格式有jpg、jpeg、png、JPG、JPEG、PNG ; 图片最佳尺寸为800x800)\r\n                </div>\r\n                <div className={styles.UploadSelect}>\r\n                    <UploadSelect\r\n                        itemImgInfos={this.itemImgInfos}\r\n                        num={10}\r\n                        type={true}\r\n                        handleChange={this.handleChange}\r\n                        handleReChange={this.handleReChange}\r\n                        handleCancel={this.handleCancel}\r\n                        handleALTChange={this.handleALTChange}\r\n                    />\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\nexport default GoodImagePlatform;\r\n"]}