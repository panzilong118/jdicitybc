{"version":3,"sources":["../../../../../src/components/Release/ReleaseBtns/v.1.0.0/view/ReleaseBtns.js"],"names":["confirm","Footer","ReleaseBtns","querySaveItemRedux","querySubmitItemRedux","addLibraryItemRedux","store","querySaveItem","querySubmitItem","addLibraryItem","props","handleSubmit","console","log","itemTmplPublishVo","itemTmplSkuVoList","isRule","itemName","error","cid","secondCid","itemPicVoList","length","url","calcRule","map","item","index","skuStatus","width","height","weight","type","itemPerfectVo","placeDeliveryId","preSkuPriceVoList","supplyStatus","allDisable","statusItem","attributes","statusItemArr","aidItem","aidIndex","push","aid","vid","skuItemArr","preSkuItem","preaidItem","preaidIndex","inventory","areaPriceList","_item","_index","areaId","supplyPrice","freightTmplVo","tmplId","noInventory","operatorId","setState","submitting","extendSkuFields","label","indexOf","itemPicpdfVoList","uid","hasChannel","channelArr","itemSkuPicVoList","picUrl","edit","then","res","code","ifSave","window","location","href","showConfirm","msg","updateItemTmplAction","handleSave","handleCancel","bind","title","content","onOk","success","onCancel","state","Component"],"mappings":"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","file":"ReleaseBtns.js","sourcesContent":["/**\r\n * @file 发布商品-商品发布、保存、取消 按钮组件\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Button,Layout,message,Modal } from 'jdcloudui';\r\nconst confirm = Modal.confirm;\r\nimport './style.css'\r\nimport { connect } from 'react-redux';\r\nimport inject from \"../../../../../../../src/redux/inject\";\r\nimport querySaveItemRedux , { querySaveItem } from './redux/itemsave_redux';\r\nimport querySubmitItemRedux , { querySubmitItem } from './redux/itemsubmit_redux';\r\nimport addLibraryItemRedux , { addLibraryItem } from './redux/addlibrary_redux';\r\nconst {Footer} = Layout;\r\n\r\n@inject({\r\n  querySaveItemRedux,\r\n  querySubmitItemRedux,\r\n    addLibraryItemRedux\r\n})\r\n@connect(store => ({\r\n  querySaveItemRedux: store.querySaveItemRedux,\r\n  querySubmitItemRedux: store.querySubmitItemRedux,\r\n  addLibraryItemRedux: store.addLibraryItemRedux\r\n}), {\r\n  querySaveItem,\r\n  querySubmitItem,\r\n  addLibraryItem\r\n})\r\n\r\nexport default class ReleaseBtns extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state = {\r\n        submitting:false,//正在保存中状态\r\n    }\r\n  }\r\n\r\n  //发布\r\n  handleSubmit = ()=>{\r\n    console.log('商品发布')\r\n    let itemTmplPublishVo = this.props.itemTmplPublishVo;\r\n    let itemTmplSkuVoList = itemTmplPublishVo.itemTmplSkuVoList;\r\n    let isRule = true;\r\n    if(!itemTmplPublishVo.itemName){\r\n      message.error('请输入商品名称！')\r\n      isRule = false;\r\n      return;\r\n    }\r\n    if(!itemTmplPublishVo.cid){\r\n      message.error('请选择平台分类！')\r\n      isRule = false;\r\n      return;\r\n    }\r\n    if(itemTmplPublishVo.cid == itemTmplPublishVo.secondCid){\r\n      message.error('第二分类不能与平台分类相同！')\r\n      isRule = false;\r\n      return;\r\n    }\r\n    if(!itemTmplPublishVo.itemPicVoList || itemTmplPublishVo.itemPicVoList.length==0 || !itemTmplPublishVo.itemPicVoList[0].url ){\r\n      message.error('请上传商品图片！')\r\n      isRule = false;\r\n      return;\r\n    }\r\n    if(this.props.calcRule){\r\n      if(this.props.calcRule == 3){\r\n        console.log('运费模板为按体积计算运费类型')\r\n        let error = false;\r\n        itemTmplSkuVoList.map((item,index)=>{\r\n          if(item.skuStatus == 1){\r\n            if(!item.length || !item.width || !item.height){\r\n              error = true;\r\n              return;\r\n            }\r\n          }\r\n        })\r\n        if(error){\r\n          message.error('请完善商品的长、宽、高信息！');\r\n          isRule = false;\r\n          return;\r\n        }\r\n      } else if(this.props.calcRule == 1){\r\n        console.log('运费模板为按重量计算运费类型')\r\n        let error = false;\r\n        itemTmplSkuVoList.map((item,index)=>{\r\n          if(item.skuStatus == 1){\r\n            if(!item.weight){\r\n              error = true;\r\n              return;\r\n            }\r\n          }\r\n        })\r\n        if(error){\r\n          message.error('请完善商品的毛重信息！');\r\n          isRule = false;\r\n          return;\r\n        }\r\n      }\r\n    }\r\n\r\n    if(this.props.type == 2){\r\n      console.log('校验供货信息内容')\r\n      if(!itemTmplPublishVo.itemPerfectVo.placeDeliveryId){\r\n        message.error('请选择发货地！');\r\n        isRule = false;\r\n        return;\r\n      }\r\n      if(!itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList || itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList.length==0){\r\n        message.error('请完善供货信息！');\r\n        isRule = false;\r\n        return;\r\n      } else {\r\n        if(itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList.length == 1){\r\n          if(itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList[0].supplyStatus == 0){\r\n            console.log('只有一条sku，且已经置灰')\r\n            message.error('至少供应一个sku！');\r\n            isRule = false;\r\n            return;\r\n          }\r\n        } else {\r\n          let allDisable = true\r\n          itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList.map((item,index)=>{\r\n            if(item.supplyStatus == 1){\r\n              allDisable = false;\r\n              return;\r\n            }\r\n          })\r\n          if(allDisable){\r\n            console.log('所有sku都已置灰')\r\n            message.error('至少供应一个sku！');\r\n            isRule = false;\r\n            return;\r\n          }\r\n        }\r\n\r\n        itemTmplPublishVo.itemTmplSkuVoList.map(statusItem=>{\r\n          if(statusItem.attributes && statusItem.attributes.length >0){\r\n            if(statusItem.skuStatus == 1){\r\n              let statusItemArr = [];\r\n              statusItem.attributes.map((aidItem,aidIndex)=>{\r\n                statusItemArr.push(aidItem.aid,aidItem.vid)\r\n              })\r\n              itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList.map(preSkuItem=>{\r\n                let skuItemArr = [];\r\n                preSkuItem.attributes.map((preaidItem,preaidIndex)=>{\r\n                  skuItemArr.push(preaidItem.aid,preaidItem.vid)\r\n                })\r\n                console.log(JSON.stringify(statusItemArr),JSON.stringify(skuItemArr),JSON.stringify(statusItemArr) == JSON.stringify(skuItemArr))\r\n                if(JSON.stringify(statusItemArr) == JSON.stringify(skuItemArr)){\r\n                  if(preSkuItem.supplyStatus == 1){\r\n                    if(!preSkuItem.inventory){\r\n                      message.error('请完善常规备货信息！');\r\n                      isRule = false;\r\n                      return;\r\n                    }\r\n                    if(preSkuItem.areaPriceList.length == 0){\r\n                      message.error('请完善供货价！');\r\n                      isRule = false;\r\n                      return;\r\n                    } else {\r\n                      preSkuItem.areaPriceList.map((_item,_index)=>{\r\n                        if(_item.areaId == 0 ){\r\n                          if(!_item.supplyPrice || _item.supplyPrice ==0){\r\n                            message.error('请完善供货价！');\r\n                            isRule = false;\r\n                            return;\r\n                          }\r\n                        }\r\n                      })\r\n                    }\r\n                  }\r\n                }\r\n              })\r\n            }\r\n          } else {\r\n            itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList.map((item,index)=>{\r\n              if(item.supplyStatus == 1){\r\n                if(!item.inventory){\r\n                  message.error('请完善常规备货信息！');\r\n                  isRule = false;\r\n                  return;\r\n                }\r\n                if(item.areaPriceList.length == 0){\r\n                  message.error('请完善供货价！');\r\n                  isRule = false;\r\n                  return;\r\n                } else {\r\n                  item.areaPriceList.map((_item,_index)=>{\r\n                    if(_item.areaId == 0 ){\r\n                      if(!_item.supplyPrice || _item.supplyPrice ==0){\r\n                        message.error('请完善供货价！');\r\n                        isRule = false;\r\n                        return;\r\n                      }\r\n                    }\r\n                  })\r\n                }\r\n              }\r\n            })\r\n          }\r\n        })\r\n      }\r\n    }\r\n\r\n    if(this.props.type == 3){\r\n      //校验运费模板\r\n      if(itemTmplPublishVo.freightTmplVo && !itemTmplPublishVo.freightTmplVo.tmplId){\r\n          message.error('请选择运费模板！');\r\n          isRule = false;\r\n          return;\r\n      }\r\n      //校验库存\r\n      let noInventory = false;\r\n      itemTmplPublishVo.itemPerfectVo.preSkuPriceVoList.map((item,index)=>{\r\n        if(!item.inventory && item.inventory!=0){\r\n          noInventory = true;\r\n          isRule = false;\r\n          return;\r\n        }\r\n      })\r\n      if(noInventory){\r\n        message.error('请完善常规备货信息！');\r\n      }\r\n    }\r\n\r\n    if(this.props.type == 1 || this.props.type == 0){\r\n      console.log('验证平台商品运营人员')\r\n      if(!itemTmplPublishVo.operatorId){\r\n        message.error('请选择运营人员！');\r\n        isRule = false;\r\n        return;\r\n      }\r\n    }\r\n\r\n    if(isRule){\r\n      console.log('符合校验，可以发布')\r\n      this.setState({\r\n        submitting:true\r\n      })\r\n      //处理数据\r\n      let itemTmplSkuVoList = itemTmplPublishVo.itemTmplSkuVoList;\r\n      itemTmplSkuVoList.map((item,index)=>{\r\n        let extendSkuFields = [];\r\n        for(let label in item){\r\n          if(label.indexOf('extendSkuFields_')!=-1){\r\n            extendSkuFields.push(item[label]);\r\n            delete item[label];\r\n          }\r\n        }\r\n        item.extendSkuFields = extendSkuFields;\r\n      })\r\n      let itemPicpdfVoList = itemTmplPublishVo.itemPicpdfVoList;\r\n      itemPicpdfVoList.map((item,index)=>{\r\n        delete item.uid;\r\n      })\r\n      if(!this.props.hasChannel){\r\n        console.log('未加载渠道组件，初始化数据')\r\n        itemTmplPublishVo.channelArr = [1,2,3,4,5,6]\r\n      }\r\n      //处理图片数据\r\n      let itemSkuPicVoList = itemTmplPublishVo.itemSkuPicVoList;\r\n      let picUrl = itemTmplPublishVo.itemPicVoList[0].url;\r\n      if(itemSkuPicVoList && itemSkuPicVoList.length>0){\r\n        itemSkuPicVoList.map((item,index)=>{\r\n          if(!item.url){\r\n            item.url = picUrl\r\n          }\r\n        })\r\n      }\r\n      console.log('------------拼接后的数据')\r\n      console.log(itemTmplPublishVo);\r\n      this.props.querySubmitItem({itemTmplPublishVo:JSON.stringify(itemTmplPublishVo)},this.props.type,this.props.edit).then((res)=>{\r\n        if(res.code == 0){\r\n          console.log('商品发布成功，跳转到商品列表页面')\r\n          let url = ''\r\n          if(this.props.type == 1){\r\n            url = '/operating-item-view/item-base';\r\n              if(this.props.edit && !this.props.ifSave){\r\n                  window.location.href = url;\r\n              }else{\r\n                  this.showConfirm(itemTmplPublishVo, url);\r\n              }\r\n          } else if(this.props.type == 2){\r\n            url = '/item-shop-view/iteminfo';\r\n            window.location.href = url;\r\n          } else if(this.props.type == 3){\r\n            url = '/item-shop-view/productsmanage';\r\n            window.location.href = url;\r\n          } else if(this.props.type == 0){\r\n            url = '/operating-item-view/supply-audit';\r\n            window.location.href = url;\r\n          }\r\n        } else {\r\n          if(res.msg){\r\n            message.error(res.msg,2)\r\n          } else {\r\n            message.error('商品发布失败',2)\r\n          }\r\n          if(itemTmplPublishVo.itemPicpdfVoList){\r\n            itemTmplPublishVo.itemPicpdfVoList.map((item,index)=>{\r\n            item.uid = index\r\n            })\r\n          }\r\n          console.log(itemTmplPublishVo)\r\n          this.props.updateItemTmplAction(itemTmplPublishVo)\r\n        }\r\n        this.setState({\r\n          submitting:false\r\n        })\r\n      })\r\n    }\r\n  }\r\n\r\n  //保存\r\n  handleSave = ()=>{\r\n    console.log('商品保存');\r\n    let itemTmplPublishVo = this.props.itemTmplPublishVo;\r\n    let itemTmplSkuVoList = itemTmplPublishVo.itemTmplSkuVoList;\r\n    let isRule = true;\r\n    if(!itemTmplPublishVo.itemName){\r\n      message.error('请输入商品名称！')\r\n      isRule = false;\r\n      return;\r\n    }\r\n    if(!itemTmplPublishVo.cid){\r\n      message.error('请选择平台分类！')\r\n      isRule = false;\r\n      return;\r\n    }\r\n    if(!itemTmplPublishVo.itemPicVoList || itemTmplPublishVo.itemPicVoList.length==0 || !itemTmplPublishVo.itemPicVoList[0].url ){\r\n      message.error('请上传商品图片！')\r\n      isRule = false;\r\n      return;\r\n    }\r\n    if(isRule){\r\n      this.setState({\r\n        submitting:true\r\n      })\r\n      //处理数据\r\n      let itemTmplSkuVoList = itemTmplPublishVo.itemTmplSkuVoList;\r\n      itemTmplSkuVoList.map((item,index)=>{\r\n        let extendSkuFields = [];\r\n        for(let label in item){\r\n          if(label.indexOf('extendSkuFields_')!=-1){\r\n            extendSkuFields.push(item[label]);\r\n            delete item[label];\r\n          }\r\n        }\r\n        item.extendSkuFields = extendSkuFields;\r\n      })\r\n      let itemPicpdfVoList = itemTmplPublishVo.itemPicpdfVoList;\r\n      itemPicpdfVoList.map((item,index)=>{\r\n        delete item.uid;\r\n      })\r\n      //处理图片数据\r\n      let itemSkuPicVoList = itemTmplPublishVo.itemSkuPicVoList;\r\n      let picUrl = itemTmplPublishVo.itemPicVoList[0].url;\r\n      if(itemSkuPicVoList && itemSkuPicVoList.length>0){\r\n        itemSkuPicVoList.map((item,index)=>{\r\n          if(!item.url){\r\n            item.url = picUrl\r\n          }\r\n        })\r\n      }\r\n    }\r\n    console.log('------------拼接后的数据')\r\n    console.log(itemTmplPublishVo)\r\n\r\n    this.props.querySaveItem({itemTmplPublishVo:JSON.stringify(itemTmplPublishVo)},this.props.type,this.props.edit).then((res)=>{\r\n      if(res.code == 0){\r\n        console.log('商品保存成功，跳转到商品列表页面')\r\n        let url = ''\r\n        if(this.props.type == 1){\r\n          url = '/operating-item-view/item-base';\r\n        } else if(this.props.type == 2){\r\n          url = '/item-shop-view/iteminfo';\r\n        } else if(this.props.type == 3){\r\n          url = '/item-shop-view/productsmanage';\r\n        } else if(this.props.type == 0){\r\n          url = '/operating-item-view/supply-audit';\r\n        }\r\n        window.location.href = url;\r\n      } else {\r\n        if(res.msg){\r\n          message.error(res.msg,2)\r\n        } else {\r\n          message.error('商品保存失败',2)\r\n        }\r\n      }\r\n      this.setState({\r\n        submitting:false\r\n      })\r\n    });\r\n  }\r\n\r\n  //取消\r\n  handleCancel = ()=>{\r\n    console.log('取消发布，跳转到商品列表页')\r\n    let url = ''\r\n    if(this.props.type == 1){\r\n      url = '/operating-item-view/item-base';\r\n    } else if(this.props.type == 2){\r\n      url = '/item-shop-view/iteminfo';\r\n    } else if(this.props.type == 3){\r\n      url = '/item-shop-view/productsmanage';\r\n    } else if(this.props.type == 0){\r\n      url = '/operating-item-view/supply-audit';\r\n    }\r\n    window.location.href = url;\r\n  }\r\n\r\n  showConfirm = (itemTmplPublishVo, url)=> {\r\n      let addLibraryItem = this.props.addLibraryItem.bind(this);\r\n      confirm({\r\n          title: '',\r\n          content: '确定同步该商品到标准库吗？',\r\n          onOk() {\r\n              console.log('OK');\r\n              addLibraryItem({itemTmplPublishVo: JSON.stringify(itemTmplPublishVo)}).then((res) => {\r\n                  message.success('同步到标准库成功！');\r\n                  window.location.href = url;\r\n              });\r\n\r\n          },\r\n          onCancel() {\r\n              console.log('Cancel');\r\n              window.location.href = url;\r\n          },\r\n      });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className='footer'>\r\n        <div className=\"footer-btns\">\r\n            <Button type=\"primary\" size='large' onClick={this.handleSubmit} loading={this.state.submitting} className=\"mr10\"\r\n                >发布</Button>\r\n            {this.props.ifSave && this.props.type!=2?\r\n            <Button type=\"primary\" size='large' onClick={this.handleSave} loading={this.state.submitting} className=\"mr10\"\r\n                >保存</Button>\r\n            :null}\r\n            <Button size='large' onClick={this.handleCancel}\r\n                >取消</Button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]}