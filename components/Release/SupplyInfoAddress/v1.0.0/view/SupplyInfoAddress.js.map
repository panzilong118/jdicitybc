{"version":3,"sources":["../../../../../src/components/Release/SupplyInfoAddress/v1.0.0/view/SupplyInfoAddress.js"],"names":["TabPane","Content","CheckboxGroup","Group","RadioGroup","ReleaseSupplyInfo","props","showModal","setState","visible","uid","Math","random","handleOk","e","state","afterChecked","checkedList","console","log","creatAddressId","deleteItem","item","num","indexOf","splice","handleCancel","addressChange","checkedValues","addressDATA","optionsList","getAddressInfo","type","next","nextProps","JSON","parse","addressData","loaded","data","code","result","creatAddress","address","map","push","label","addressName","value","id","itemTmplPublishVo","itemPerfectVo","placeDeliveryId","arrValue","item1","recived","addressId","index","updateItemTmplAction","Component"],"mappings":"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","file":"SupplyInfoAddress.js","sourcesContent":["/**\r\n * @file 发布商品-供货信息Tab组件\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Tabs,Button,Layout,Modal,Checkbox,Table,Popover,Radio,InputNumber } from 'jdcloudui';\r\nimport index from 'jdcloudui/lib/cascader';\r\n\r\nconst TabPane = Tabs.TabPane;\r\nconst { Content } = Layout;\r\nconst CheckboxGroup = Checkbox.Group;\r\nconst RadioGroup = Radio.Group;\r\n\r\nexport default class ReleaseSupplyInfo extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state={\r\n      uid:Math.random(),\r\n      addressDATA:[],\r\n      checkedList:[],\r\n      afterChecked: [],\r\n      optionsList:[],\r\n    }\r\n    this.addressDATA=[];\r\n  }\r\n\r\n  componentWillMount(){\r\n    console.log(10)\r\n    this.props.getAddressInfo({type:1})\r\n  }\r\n\r\n  componentWillReceiveProps(next){\r\n    let nextProps= JSON.parse(JSON.stringify(next));\r\n    console.log(nextProps)\r\n    if(nextProps.addressData.loaded){\r\n      if(nextProps.addressData.data.code==0){\r\n        let addressDATA = nextProps.addressData.data.data.result || [];\r\n        this.creatAddress(addressDATA,nextProps)\r\n      }\r\n    }\r\n  }\r\n\r\n  // 选择发货地\r\n  creatAddress(data,nextProps){\r\n    let address = []\r\n    data.map(item=>{\r\n      address.push({\r\n        label: item.addressName,\r\n        value:item.addressName,\r\n        id:item.id,\r\n      })\r\n    })\r\n\r\n    if(nextProps.itemTmplPublishVo.itemPerfectVo.placeDeliveryId){\r\n      let arrValue=[]\r\n      nextProps.itemTmplPublishVo.itemPerfectVo.placeDeliveryId.map(item=>{\r\n        address.map(item1=>{\r\n          if(item==item1.id){\r\n            arrValue.push(item1.value)\r\n          }\r\n        })\r\n      })\r\n      this.setState({\r\n        checkedList:arrValue,\r\n        afterChecked:arrValue\r\n      })\r\n    } else {\r\n      this.setState({\r\n        checkedList:[],\r\n        afterChecked:[]\r\n      })\r\n    }\r\n    this.addressDATA = address\r\n  }\r\n\r\n  showModal = () => {\r\n    this.setState({\r\n        visible: true,\r\n        uid:Math.random()\r\n    });\r\n  }\r\n  handleOk = (e) => {\r\n    this.state.afterChecked = this.state.checkedList\r\n    console.log(this.state.afterChecked)\r\n    this.creatAddressId(this.state.afterChecked)\r\n    this.setState({\r\n      visible:false\r\n    });\r\n  }\r\n\r\n  deleteItem=(item)=>{\r\n    let num = this.state.afterChecked.indexOf(item)\r\n    this.state.afterChecked.splice(num,1);\r\n    this.creatAddressId(this.state.afterChecked)\r\n    this.setState({\r\n      afterChecked:this.state.afterChecked,\r\n      checkedList:this.state.afterChecked\r\n    })\r\n  }\r\n\r\n  handleCancel = (e) => {\r\n    this.state.checkedList = this.state.afterChecked;\r\n    this.setState({\r\n        visible: false,\r\n    });\r\n  }\r\n\r\n  addressChange=(checkedValues)=>{\r\n    console.log('aa',checkedValues)\r\n    this.setState({\r\n      checkedList:checkedValues\r\n    }) \r\n  }\r\n  // 获取发货地id\r\n  creatAddressId(recived){\r\n    let itemTmplPublishVo = JSON.parse(JSON.stringify(this.props.itemTmplPublishVo));\r\n    let addressId = [];\r\n    recived.map(item=>{\r\n      this.addressDATA.map((item1,index)=>{\r\n        if(item == item1.value){\r\n          addressId.push(`${item1.id}`)\r\n        }\r\n      })\r\n    })\r\n    itemTmplPublishVo.itemPerfectVo.placeDeliveryId = addressId;\r\n    this.props.updateItemTmplAction(itemTmplPublishVo);\r\n  }\r\n  \r\n  render() {\r\n    console.log(this.props.itemTmplPublishVo.itemPerfectVo.placeDeliveryId)\r\n    this.state.optionsList = this.state.afterChecked.map((item,index)=>\r\n    <div key={index} className='sale-area'>{item}<a className=\"sale-area-a\" onClick={()=>this.deleteItem(item)}>-</a></div>)\r\n    return (\r\n      <div>\r\n        <div>\r\n        <div className=\"rHeaderTtle\"><h2>发货地</h2></div>\r\n          <div className=\"rAdress\">\r\n                <Button type=\"primary\" onClick={this.showModal}>选择发货地</Button>\r\n                <Modal title=\"选择发货地\" mashClosable={false} visible={this.state.visible}\r\n                    onOk={this.handleOk} onCancel={this.handleCancel}\r\n                    width={'600px'}\r\n                    className=\"ui-shop\"\r\n                    key={this.state.uid}\r\n                >\r\n                    <CheckboxGroup \r\n                        options={this.addressDATA}\r\n                        value={this.state.checkedList}\r\n                        //defaultValue={[\"101704\"]}\r\n                        onChange={this.addressChange} />\r\n                </Modal>\r\n            </div>\r\n            <Layout className=\"rLayout\">\r\n              <Content className=\"rContent\">\r\n                {this.state.optionsList}\r\n              </Content>\r\n            </Layout>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]}