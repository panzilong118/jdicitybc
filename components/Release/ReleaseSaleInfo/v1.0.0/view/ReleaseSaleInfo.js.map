{"version":3,"sources":["../../../../../src/components/Release/ReleaseSaleInfo/v1.0.0/view/ReleaseSaleInfo.js"],"names":["RadioGroup","Group","ReleaseSaleInfo","props","defaultDataSource","columns","initColumns","itemTmplPublishVo","JSON","parse","dataSource","itemTmplSkuVoList","setDataSourceKey","state","skuUnitDS","data","wholeColumnData","length","selectedRowKeys","cid","undefined","nextProps","new_cid","type","skuUnit","querySkuUnit","skuUnitData","editData","skuUnits","edit","ifValid","map","skuUnitsStr","join","indexOf","item","push","setEditData","console","log","setState","rowSelection","onChange","onSelectChange","handleCheckAll","handleReverseCheck","handleMultiEnablOrDisabled","x","y","Component","new_dataSource","forEach","index","key","allRowKeys","i","new_selectedRowKeys","filter","includes","v","skuStatus","rowkeys","updateItemTmplAction","handleSingleDataChange","value","field","weight","handleWholeColumnChange","fields","storeWholeInputData","preState","onRemoveFile","file","ifDefaultData","attributes","title","dataIndex","width","render","context","vName","modelCode","content","e","target","record","productCode","weight_content","weight_title","colSpan","unit","size_content","size_title","extendColumnFields","Array","label","labelName","newValue","result","url","size","suffix","logoUrl","fileList","disabled","that","newData"],"mappings":"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","file":"ReleaseSaleInfo.js","sourcesContent":["/**\r\n * @author chenyanhua\r\n * @date 2018-07-26\r\n * @file 销售信息组件\r\n * 逻辑：根据销售规格选中的属性合成该列表数据\r\n * 该页面涉及到用户自定义列\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Table, Button, Input, InputNumber, Select, Popover, Radio } from 'jdcloudui';\r\nimport { UploadSelect } from 'jdcloudecc/components';\r\nimport UploadImage from '../../../UploadImage/v1.0.0/view';\r\nimport UploadFile from '../../../UploadFile/v1.0.0/view';\r\nimport './style/index.css';\r\n\r\nconst RadioGroup = Radio.Group;\r\n\r\nexport default class ReleaseSaleInfo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    // 默认表格\r\n    this.defaultDataSource = [{\r\n      \"key\": 0,\r\n      \"attributes\": null, //销售属性[{\"aName\":\"颜值\",\"aid\":\"17504\",\"desc\":\"\",\"vName\":\"10\",\"vid\":\"33066\"}]\r\n      \"skuStatus\": 1 //停用启用操作(必选，默认启用) sku 状态,1:启用;0:停用\r\n    }];\r\n    const columns = this.initColumns(props);\r\n    const itemTmplPublishVo = JSON.parse(JSON.stringify(props.itemTmplPublishVo || {})); // 总数据源\r\n    var dataSource = JSON.parse(JSON.stringify(itemTmplPublishVo.itemTmplSkuVoList || []));\r\n    dataSource = this.setDataSourceKey(dataSource);\r\n    this.state = {\r\n      skuUnitDS: props.skuUnitDS.data || [], // 单位数据源\r\n      wholeColumnData: {}, // 存储当前对应列的全部设置input框数据，例如 { barCode: 54, field: value }\r\n      columns: columns, // 表格列\r\n      dataSource: dataSource.length > 0 ? dataSource : this.defaultDataSource, // 表格数据\r\n      selectedRowKeys: [] // 表格选中行\r\n    };\r\n    this.cid = itemTmplPublishVo.cid || undefined;\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    // 需要展示单位列 && 平台分类存在且已经变更，重新加载单位数据源\r\n    const new_cid = nextProps.itemTmplPublishVo && nextProps.itemTmplPublishVo.cid || undefined;\r\n    const type = this.props.type || undefined;\r\n    if (nextProps.skuUnit && new_cid && this.cid != new_cid) {\r\n      this.cid = new_cid;\r\n      nextProps.querySkuUnit({ cid: nextProps.itemTmplPublishVo.cid }, type);\r\n    }\r\n\r\n    let skuUnitData = nextProps.skuUnitDS.data || [];\r\n    if(skuUnitData.length > 0){\r\n        if(!this.props.editData.skuUnits && this.props.edit && this.props.ifValid) {\r\n          let skuUnits = [];\r\n            let itemTmplSkuVoList = nextProps.itemTmplPublishVo && nextProps.itemTmplPublishVo.itemTmplSkuVoList || [];\r\n            itemTmplSkuVoList.map(item => {\r\n              let skuUnitsStr = skuUnits.join('-');\r\n              if(skuUnitsStr.indexOf(item.skuUnit) === -1) {\r\n                  skuUnits.push(item.skuUnit);\r\n              }\r\n            });\r\n            this.props.setEditData('skuUnits', skuUnits);\r\n        }\r\n\r\n        if(this.props.editData.skuUnits) {\r\n            let skuUnits = [];\r\n            let skuUnitsStr = skuUnitData.join('-');\r\n            this.props.editData.skuUnits.map(item => {\r\n                if(skuUnitsStr.indexOf(item) === -1) {\r\n                    skuUnits.push(item);\r\n                }\r\n            });\r\n            skuUnitData = [...nextProps.skuUnitDS.data, ...skuUnits];\r\n        }\r\n    }\r\n    console.log('11111111111111111111111111111111', nextProps, skuUnitData);\r\n    // 表格数据\r\n    const columns = this.initColumns(nextProps);\r\n    const itemTmplPublishVo = JSON.parse(JSON.stringify(nextProps.itemTmplPublishVo || {})); // 总数据源\r\n    var dataSource = JSON.parse(JSON.stringify(itemTmplPublishVo.itemTmplSkuVoList || []));\r\n    dataSource = this.setDataSourceKey(dataSource);\r\n    this.setState({\r\n      skuUnitDS: skuUnitData, // 单位数据源\r\n      columns: columns,\r\n      dataSource: dataSource.length > 0 ? dataSource : this.defaultDataSource\r\n    });\r\n\r\n  }\r\n  componentDidMount() {\r\n    // 需要展示单位列 && 平台分类存在，加载单位数据源\r\n    const cid = this.props.itemTmplPublishVo && this.props.itemTmplPublishVo.cid || undefined;\r\n    const type = this.props.type || undefined;\r\n    //this.props.skuUnit\r\n    if (this.props.skuUnit && cid) {\r\n      this.props.querySkuUnit({ cid: this.props.itemTmplPublishVo.cid }, type);\r\n    }\r\n  }\r\n  // 为dataSource增加key\r\n  setDataSourceKey = (dataSource) => {\r\n    let new_dataSource = [];\r\n    dataSource.forEach((item, index) => {\r\n      new_dataSource.push({\r\n        ...item,\r\n        key: index\r\n      });\r\n    });\r\n    return new_dataSource;\r\n  }\r\n  // 表格checkbox变化，更新选中行数据源\r\n  onSelectChange = (selectedRowKeys) => {\r\n    this.setState({ selectedRowKeys });\r\n  }\r\n  render() {\r\n    const rowSelection = {\r\n      selectedRowKeys: this.state.selectedRowKeys,\r\n      onChange: this.onSelectChange\r\n    };\r\n    return (\r\n      [\r\n        <h3 className='h3-title'>销售信息</h3>,\r\n        <div className='btn-group-horizontal'>\r\n          <Button onClick={this.handleCheckAll}>全选</Button>\r\n          <Button onClick={this.handleReverseCheck}>反选</Button>\r\n          <Button onClick={() => { this.handleMultiEnablOrDisabled(0); }}>批量停用</Button>\r\n          <Button onClick={() => { this.handleMultiEnablOrDisabled(1); }} >批量启用</Button>\r\n        </div>,\r\n        <div className='table-bordered'>\r\n          <Table\r\n            rowSelection={rowSelection}\r\n            columns={this.state.columns}\r\n            dataSource={this.state.dataSource}\r\n            pagination={false}\r\n            scroll={{ x: true, y: 400 }}\r\n          />\r\n        </div>\r\n      ]\r\n    );\r\n  }\r\n  /**\r\n   * 全选按钮事件，获取所有的key，更新state\r\n   */\r\n  handleCheckAll = () => {\r\n    const { dataSource } = this.state;\r\n    let allRowKeys = [];\r\n    for (let i = 0; i < dataSource.length; i++) {\r\n      allRowKeys.push(i);\r\n    }\r\n    this.setState({\r\n      selectedRowKeys: allRowKeys\r\n    });\r\n  }\r\n  /**\r\n   * 反选按钮事件，反选 key，更新state\r\n   */\r\n  handleReverseCheck = () => {\r\n    const { dataSource, selectedRowKeys } = this.state;\r\n    var allRowKeys = [];\r\n    for (var i = 0; i < dataSource.length; i++) {\r\n      allRowKeys.push(i);\r\n    }\r\n    let new_selectedRowKeys = allRowKeys.filter(v => !selectedRowKeys.includes(v));\r\n    this.setState({\r\n      selectedRowKeys: new_selectedRowKeys\r\n    });\r\n  }\r\n  /**\r\n   * 批量停用/启用按钮\r\n   * @param skuStatus: 0-停用，1-启用\r\n   */\r\n  handleMultiEnablOrDisabled = (skuStatus) => {\r\n    const { selectedRowKeys } = this.state;\r\n    let dataSource = JSON.parse(JSON.stringify(this.state.dataSource));\r\n    selectedRowKeys.forEach((rowkeys) => {\r\n      dataSource[rowkeys].skuStatus = skuStatus;\r\n    });\r\n\r\n    // 更新总数据源\r\n    var itemTmplPublishVo = JSON.parse(JSON.stringify(this.props.itemTmplPublishVo));\r\n\r\n    itemTmplPublishVo.itemTmplSkuVoList = dataSource;\r\n    this.props.updateItemTmplAction(itemTmplPublishVo);\r\n  }\r\n  /**\r\n   * td里 input text类型，更新总数据源\r\n   * @param value 改变的值\r\n   * @param field 改变的字段\r\n   * @param key 当前操作数据行\r\n   */\r\n  handleSingleDataChange = (value, field, key) => {\r\n    var dataSource = JSON.parse(JSON.stringify(this.state.dataSource));\r\n    if(value == undefined){\r\n      value = null;\r\n    }\r\n    dataSource[key][field] = value;\r\n\r\n    // 当是变换单位字段时，weight字段需要根据单位进行换算\r\n    if (field == 'weightUnit') {\r\n      const weight = dataSource[key]['weight'];\r\n      if(typeof weight == 'number'){\r\n        if (value == 'g') {\r\n          dataSource[key]['weight'] = weight * 1000;\r\n        } else if (value = 'kg') {\r\n          dataSource[key]['weight'] = weight / 1000;\r\n        }\r\n      }\r\n    }\r\n\r\n    // 总数据源\r\n    var itemTmplPublishVo = JSON.parse(JSON.stringify(this.props.itemTmplPublishVo));\r\n    // 更新总数据源：销售信息数据\r\n    itemTmplPublishVo.itemTmplSkuVoList = dataSource;\r\n    this.props.updateItemTmplAction(itemTmplPublishVo);\r\n  }\r\n\r\n  /**\r\n   * 列头部input text，设置按钮 click，更新总数据源\r\n   * @param fields 改变的字段 [string]\r\n   */\r\n  handleWholeColumnChange = (fields) => {\r\n    var dataSource = JSON.parse(JSON.stringify(this.state.dataSource));\r\n\r\n    fields.forEach((field) => {\r\n      const value = this.state.wholeColumnData[field];\r\n      // 数据存在\r\n      if (typeof value == 'string' || typeof value == 'number') {\r\n        // 更改所有数据\r\n        dataSource.forEach((item) => {\r\n          // 处于启用状态的数据才可进行重新赋值，停用状态的数据不可赋值\r\n          if (item.skuStatus == '1') {\r\n            item[field] = value;\r\n          }\r\n        });\r\n      }\r\n    });\r\n\r\n    // 更新总数据源\r\n    var itemTmplPublishVo = JSON.parse(JSON.stringify(this.props.itemTmplPublishVo));\r\n    itemTmplPublishVo.itemTmplSkuVoList = dataSource;\r\n    this.props.updateItemTmplAction(itemTmplPublishVo);\r\n  }\r\n\r\n  /**\r\n   * 列头部 input text，onChange时保存变化的数据到state中\r\n   * @param e: input对象\r\n   * @param field:改变的字段\r\n   */\r\n  storeWholeInputData = (value, field) => {\r\n    this.setState((preState) => {\r\n      let wholeColumnData = JSON.parse(JSON.stringify(preState.wholeColumnData));\r\n      wholeColumnData[field] = value;\r\n      return {\r\n        wholeColumnData: wholeColumnData\r\n      };\r\n    });\r\n  }\r\n\r\n  // 删除附件\r\n  onRemoveFile = (file) => {\r\n    console.log('file-----', file);\r\n  }\r\n  /**\r\n   * 根据config配置信息，确定表格由哪些列组成\r\n   * @return columns\r\n   */\r\n  initColumns = (props) => {\r\n\r\n    let itemTmplSkuVoList = props.itemTmplPublishVo && props.itemTmplPublishVo.itemTmplSkuVoList || [];\r\n    // 没有勾选销售规格属性\r\n    let ifDefaultData = itemTmplSkuVoList.length == 1 && itemTmplSkuVoList[0].attributes == null ? true : false;\r\n\r\n    let columns = [];\r\n\r\n    // 如果选了销售规格，则展示商品信息列\r\n    if (!ifDefaultData) {\r\n      columns.push({\r\n        title: '商品信息',\r\n        dataIndex: 'attributes',\r\n        key: 'attributes',\r\n        width: 200,\r\n        render: (data) => {\r\n          var context = '';\r\n          (data || []).forEach((item) => {\r\n            context += item.vName + ' ';\r\n          });\r\n          return (<span>{context}</span>);\r\n        }\r\n      });\r\n    }\r\n    // 商品型号\r\n    if (props.modelCode) {\r\n      const content = (\r\n        <div>\r\n          <label>型号</label>\r\n          <Input\r\n            className='inline-input'\r\n            onChange={(e) => { this.storeWholeInputData(e.target.value, \"modelCode\"); }}\r\n          />\r\n          <a\r\n            href='javascript:void(0)'\r\n            className='a-link'\r\n            onClick={() => { this.handleWholeColumnChange(['modelCode']); }}\r\n          >设置</a>\r\n        </div>\r\n      );\r\n      const title = (\r\n        <div>\r\n          <label className='inline-label'>型号</label>\r\n          <Popover content={content}>\r\n            <a href='javascript:void(0)' className='a-link'>设置全部</a>\r\n          </Popover>\r\n        </div>\r\n      );\r\n      columns.push({\r\n        title: title,\r\n        dataIndex: 'modelCode',\r\n        key: 'modelCode',\r\n        width: 150,\r\n        render: (data, record) => {\r\n          return (\r\n            <Input\r\n              value={data}\r\n              disabled={record.skuStatus == '0' ? true : false}\r\n              onChange={(e) => { this.handleSingleDataChange(e.target.value, \"modelCode\", record.key); }}\r\n            />\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    // 商品物料号\r\n    if (props.productCode) {\r\n      const content = (\r\n        <div>\r\n          <label>物料号</label>\r\n          <Input\r\n            className='inline-input'\r\n            onChange={(e) => { this.storeWholeInputData(e.target.value, \"productCode\"); }}\r\n          />\r\n          <a href='javascript:void(0)'\r\n            className='a-link'\r\n            onClick={() => { this.handleWholeColumnChange(['productCode']); }}\r\n          >设置</a>\r\n        </div>\r\n      );\r\n      const title = (\r\n        <div>\r\n          <label className='inline-label'>物料号</label>\r\n          <Popover content={content}>\r\n            <a href='javascript:void(0)' className='a-link'>设置全部</a>\r\n          </Popover>\r\n        </div>\r\n      );\r\n      columns.push({\r\n        title: title,\r\n        dataIndex: 'productCode',\r\n        key: 'productCode',\r\n        width: 150,\r\n        render: (data, record) => {\r\n          return (\r\n            <Input\r\n              value={data}\r\n              disabled={record.skuStatus == '0' ? true : false}\r\n              onChange={(e) => { this.handleSingleDataChange(e.target.value, \"productCode\", record.key); }}\r\n            />\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    // 商品条形码\r\n    if (props.modelCode) {\r\n      const content = (\r\n        <div>\r\n          <label>商品条码</label>\r\n          <Input\r\n            className='inline-input'\r\n            onChange={(e) => { this.storeWholeInputData(e.target.value, \"barCode\"); }}\r\n          />\r\n          <a\r\n            href='javascript:void(0)'\r\n            className='a-link'\r\n            onClick={() => { this.handleWholeColumnChange(['barCode']); }}\r\n          >设置</a>\r\n        </div>\r\n      );\r\n      const title = (\r\n        <div>\r\n          <label className='inline-label'>商品条码</label>\r\n          <Popover content={content}>\r\n            <a href='javascript:void(0)' className='a-link'>设置全部</a>\r\n          </Popover>\r\n        </div>\r\n      );\r\n      columns.push({\r\n        title: title,\r\n        dataIndex: 'barCode',\r\n        key: 'barCode',\r\n        width: 150,\r\n        render: (data, record) => {\r\n          return (\r\n            <Input\r\n              value={data}\r\n              disabled={record.skuStatus == '0' ? true : false}\r\n              onChange={(e) => { this.handleSingleDataChange(e.target.value, \"barCode\", record.key); }}\r\n            />\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    // 商品毛重\r\n    const weight_content = (\r\n      <div>\r\n        <label>商品毛重</label>\r\n        <InputNumber\r\n          min={0}\r\n          className='inline-input-number'\r\n          onChange={(value) => { this.storeWholeInputData(value, \"weight\"); }}\r\n        />\r\n        <RadioGroup\r\n          defaultValue='g'\r\n          onChange={(e) => { this.storeWholeInputData(e.target.value, \"weightUnit\"); }}\r\n        >\r\n          <Radio value='g'>g</Radio>\r\n          <Radio value='kg'>kg</Radio>\r\n        </RadioGroup>\r\n        <a\r\n          href='javascript:void(0)'\r\n          className='a-link'\r\n          onClick={() => {\r\n            this.handleWholeColumnChange(['weight', 'weightUnit']);\r\n          }}\r\n        >设置</a>\r\n      </div>\r\n    );\r\n    const weight_title = (\r\n      <div>\r\n        <label className='inline-label'>商品毛重</label>\r\n        <Popover content={weight_content}>\r\n          <a href='javascript:void(0)' className='a-link'>设置全部</a>\r\n        </Popover>\r\n      </div>\r\n    );\r\n    columns.push({\r\n      title: weight_title,\r\n      dataIndex: 'weight',\r\n      key: 'weight',\r\n      colSpan: 2,\r\n      width: 90,\r\n      render: (data, record) => {\r\n        return (\r\n          <InputNumber\r\n            min={0}\r\n            value={data}\r\n            disabled={record.skuStatus == '0' ? true : false}\r\n            className='inline-input-number'\r\n            onChange={(value) => { this.handleSingleDataChange(value, \"weight\", record.key); }}\r\n          />\r\n        );\r\n      }\r\n    });\r\n    columns.push({\r\n      title: '',\r\n      dataIndex: 'weightUnit',\r\n      key: 'weightUnit',\r\n      colSpan: 0,\r\n      width: 70,\r\n      render: (data, record) => {\r\n        var unit = data ? data : 'g';\r\n        return (\r\n          <Select\r\n            value={unit}\r\n            disabled={record.skuStatus == '0' ? true : false}\r\n            onChange={(value) => { this.handleSingleDataChange(value, \"weightUnit\", record.key); }}\r\n          >\r\n            <Select.Option value=\"g\">g</Select.Option>\r\n            <Select.Option value=\"kg\">kg</Select.Option>\r\n          </Select>\r\n        );\r\n      }\r\n    });\r\n\r\n    // 包装尺寸，默认有该列\r\n    const size_content = (\r\n      <div>\r\n        <label>包装尺寸（mm） </label>\r\n        &nbsp;&nbsp;长:\r\n          <InputNumber\r\n          min={0}\r\n          className='inline-input-number'\r\n          onChange={(value) => { this.storeWholeInputData(value, \"length\"); }}\r\n        />\r\n        &nbsp;&nbsp;宽:\r\n          <InputNumber\r\n          min={0}\r\n          className='inline-input-number'\r\n          onChange={(value) => { this.storeWholeInputData(value, \"width\"); }}\r\n        />\r\n        &nbsp;&nbsp;高:\r\n          <InputNumber\r\n          min={0}\r\n          className='inline-input-number'\r\n          onChange={(value) => { this.storeWholeInputData(value, \"height\"); }}\r\n        />\r\n        <a\r\n          href='javascript:void(0)'\r\n          className='a-link'\r\n          onClick={() => {\r\n            this.handleWholeColumnChange(['length', 'width', 'height']);\r\n          }}\r\n        >设置</a>\r\n      </div>\r\n    );\r\n    const size_title = (\r\n      <div>\r\n        <label className='inline-label'>包装尺寸（mm）</label>\r\n        <Popover content={size_content}>\r\n          <a href='javascript:void(0)' className='a-link'>设置全部</a>\r\n        </Popover>\r\n      </div>\r\n    );\r\n    columns.push({\r\n      title: size_title,\r\n      dataIndex: 'length',\r\n      key: 'length',\r\n      colSpan: 3,\r\n      width: 110,\r\n      render: (data, record) => {\r\n        return (\r\n          <div>\r\n            长:\r\n              <InputNumber\r\n              min={0}\r\n              value={data}\r\n              disabled={record.skuStatus == '0' ? true : false}\r\n              className='inline-input-number'\r\n              onChange={(value) => { this.handleSingleDataChange(value, \"length\", record.key); }}\r\n            />\r\n          </div>\r\n        );\r\n      }\r\n    });\r\n    columns.push({\r\n      dataIndex: 'width',\r\n      key: 'width',\r\n      colSpan: 0,\r\n      width: 110,\r\n      render: (data, record) => {\r\n        return (\r\n          <div>\r\n            宽:\r\n              <InputNumber\r\n              min={0}\r\n              value={data}\r\n              disabled={record.skuStatus == '0' ? true : false}\r\n              className='inline-input-number'\r\n              onChange={(value) => { this.handleSingleDataChange(value, \"width\", record.key); }}\r\n            />\r\n          </div>\r\n        );\r\n      }\r\n    });\r\n    columns.push({\r\n      dataIndex: 'height',\r\n      key: 'height',\r\n      colSpan: 0,\r\n      width: 110,\r\n      render: (data, record) => {\r\n        return (\r\n          <div>\r\n            高:\r\n              <InputNumber\r\n              min={0}\r\n              value={data}\r\n              disabled={record.skuStatus == '0' ? true : false}\r\n              className='inline-input-number'\r\n              onChange={(value) => { this.handleSingleDataChange(value, \"height\", record.key); }}\r\n            />\r\n          </div>\r\n        );\r\n      }\r\n    });\r\n\r\n    /**\r\n     * 自定义扩展列，从config页面配置\r\n     * props.extendColumnFields = [{ id:1, key:'中文名1', type:'图片|file|input', width: *** }]\r\n     */\r\n    if (props.extendColumnFields && props.extendColumnFields instanceof Array && props.extendColumnFields.length > 0) {\r\n      props.extendColumnFields.forEach((item) => {\r\n        let label = `extendSkuFields_${item.label}`;\r\n        columns.push({\r\n          title: item.labelName,\r\n          dataIndex: label,\r\n          key: label,\r\n          width: item.width || 120,\r\n          render: (data, record) => {\r\n            if (item.type == 'input') {\r\n              return (\r\n                <Input\r\n                  value={data && data.value || ''}\r\n                  disabled={record.skuStatus == '0' ? true : false}\r\n                  onChange={(e) => {\r\n                    let newValue = {\r\n                      label: item.label,\r\n                      value: e.target.value\r\n                    };\r\n                    this.handleSingleDataChange(newValue, label, record.key);\r\n                  }}\r\n                />\r\n              );\r\n            } else if (item.type == 'image') {\r\n              if (props.type == '0' || props.type == '1') { // platform\r\n                return (\r\n                  <div className={record.skuStatus == '0' ? 'image-diabled' : ''}>\r\n                    <UploadSelect\r\n                      onChange={(result) => {\r\n                        let newValue = {\r\n                          label: item.label,\r\n                          value: result.url || ''\r\n                        };\r\n                        this.handleSingleDataChange(newValue, label, record.key)\r\n                      }}\r\n                      onRemove={(result) => {\r\n                        let newValue = {\r\n                          label: item.label,\r\n                          value: ''\r\n                        };\r\n                        this.handleSingleDataChange(newValue, label, record.key)\r\n                      }}\r\n                      limit={{ size: 5, suffix: ['JPG', 'JPEG', 'PNG', 'GIF'] }}\r\n                      imgUrl={data && data.value || ''}\r\n                      showRemoveIcon={true}\r\n                    >\r\n                    </UploadSelect>\r\n                  </div>\r\n                );\r\n              } else {  // shop\r\n                return (\r\n                  // 添加图片禁用样式\r\n                  <div className={record.skuStatus == '0' ? 'image-diabled' : ''}>\r\n                    <UploadImage\r\n                      onChange={(result) => {\r\n                        let newValue = {\r\n                          label: item.label,\r\n                          value: result.logoUrl || ''\r\n                        };\r\n                        this.handleSingleDataChange(newValue, label, record.key)\r\n                      }}\r\n                      relation=\"logoUrl\"\r\n                      onRemove={(result) => {\r\n                        let newValue = {\r\n                          label: item.label,\r\n                          value: ''\r\n                        };\r\n                        this.handleSingleDataChange(newValue, label, record.key)\r\n                      }}\r\n                      imgType={['JPG', 'JPEG', 'PNG', 'GIF']}\r\n                      action=\"/proxy/base/upload/uploadImgLimitOneMega\"\r\n                      maxFileSize=\"500\"\r\n                      fileSizeType=\"KB\"\r\n                      imageUrl={data && data.value || ''}\r\n                    />\r\n                  </div>\r\n                );\r\n              }\r\n            } else if (item.type == 'file') {\r\n              const fileList = JSON.parse(data && data.value || JSON.stringify([]));\r\n              const disabled = (record.skuStatus == '0' || fileList.length >= 1) ? true : false;\r\n              return (\r\n                <UploadFile\r\n                  fileLength={1}\r\n                  disabled={disabled}\r\n                  fileType={['png', 'jpg', 'word', 'excel', 'pdf']}\r\n                  action='/proxy/base/upload/uploadFileLimit'\r\n                  fileList={fileList}\r\n                  onRemove={(file) => {\r\n                    // 启用状态时，可删除\r\n                    if (record.skuStatus == '1') {\r\n                      let newValue = {\r\n                        label: item.label,\r\n                        value: JSON.stringify([])\r\n                      };\r\n                      this.handleSingleDataChange(newValue, label, record.key);\r\n                    } else if (record.skuStatus == '0') {\r\n                      // 停用状态不可删除\r\n                      return false;\r\n                    }\r\n                  }}\r\n                  onChange={(file) => {\r\n                    let newValue = {\r\n                      label: item.label,\r\n                      value: JSON.stringify([file])\r\n                    };\r\n                    this.handleSingleDataChange(newValue, label, record.key);\r\n                  }}\r\n                />\r\n              );\r\n            }\r\n          }\r\n        });\r\n      });\r\n    }\r\n\r\n    // 单位\r\n    if (props.skuUnit) {\r\n      let that = this;\r\n      columns.push({\r\n        title: '单位',\r\n        dataIndex: 'skuUnit',\r\n        key: 'skuUnit',\r\n        width: 100,\r\n        render: (data, record) => {\r\n          return (\r\n            <Select\r\n              style={{ width: 80 }}\r\n              value={data}\r\n              disabled={record.skuStatus == '0' ? true : false}\r\n              onChange={(value) => { this.handleSingleDataChange(value, \"skuUnit\", record.key); }}\r\n              allowClear={true}\r\n            >\r\n              {\r\n                that.state.skuUnitDS.map((item) => {\r\n                  return <Select.Option value={item}>{item}</Select.Option>\r\n                })\r\n              }\r\n            </Select>\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    // 如果选了销售规格，则展示操作列\r\n    if (!ifDefaultData) {\r\n      columns.push({\r\n        title: '操作',\r\n        dataIndex: 'skuStatus',\r\n        key: 'skuStatus',\r\n        width: 60,\r\n        render: (data, record) => {\r\n          // sku 状态,1:启用; 0:停用\r\n          return (\r\n            <a\r\n              href='javascript:void(0);'\r\n              className='a-link'\r\n              onClick={() => {\r\n                const newData = (data == '1') ? 0 : 1;\r\n                this.handleSingleDataChange(newData, \"skuStatus\", record.key);\r\n              }}\r\n            >\r\n              {data == \"0\" ? \"启用\" : \"停用\"}\r\n            </a>\r\n          );\r\n        }\r\n      });\r\n    }\r\n\r\n    // 纯粹为了当只有尺寸和毛重时，列不至于太宽导致样式变形进行的控制\r\n    if(columns.length < 6){\r\n      columns.push({\r\n        title: '',\r\n        dataIndex: 'skuUnit',\r\n        key: 'skuUnit',\r\n        width: 300\r\n      });\r\n    }\r\n\r\n    return columns;\r\n  }\r\n\r\n}\r\n\r\n\r\n"]}