{"version":3,"sources":["../../../../../src/components/Release/OtherDeliverySet/v1.0.0/view/OtherDeliverySet.js"],"names":["RadioGroup","Group","CheckboxGroup","TextArea","Option","confirm","OtherDeliverySet","props","deliveryClick","console","log","getDeliverySet","then","res","code","data","shopFareTemplateForItemVo","showConfirm","title","content","onOk","window","open","onCancel","onChange","e","target","checked","itemTmplPublishVo","JSON","parse","freightTmplVo","homeDelivery","updateItemTmplAction","selectChange","value","setState","selectValue","tmplId","state","deliveryData","nextProps","DeliveryData","loaded","deliveryDATA","length","map","item","templateType","id","fareName","type","width","Boolean","Component"],"mappings":"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","file":"OtherDeliverySet.js","sourcesContent":["/**\r\n * @file 其他设置--配送设置\r\n */\r\nimport React, { Component } from 'react';\r\nimport {Checkbox, message,Radio,InputNumber,Input,Select,Modal } from 'jdcloudui';\r\nimport './style/index.css';\r\n\r\nconst RadioGroup = Radio.Group;\r\nconst CheckboxGroup = Checkbox.Group;\r\nconst {TextArea} = Input;\r\nconst Option = Select.Option;\r\nconst confirm = Modal.confirm;\r\n\r\nexport default class OtherDeliverySet extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n      deliveryData:[],\r\n      selectValue : this.props.itemTmplPublishVo.freightTmplVo.tmplId||'',\r\n      checked:false\r\n    };\r\n  }\r\n  componentWillMount(){\r\n    this.props.getDeliverySet();\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps){\r\n    console.log(nextProps)\r\n    if(nextProps.DeliveryData.loaded){\r\n      if(nextProps.DeliveryData.data.code==0){\r\n        let deliveryDATA = nextProps.DeliveryData.data.data.shopFareTemplateForItemVo;\r\n        console.log(deliveryDATA)\r\n        if(deliveryDATA){\r\n          if(!this.state.deliveryData.length){\r\n            if(!this.props.itemTmplPublishVo.freightTmplVo.tmplId){\r\n              deliveryDATA.map(item=>{\r\n                if(item.templateType == 1){\r\n                  this.selectChange(item.id)\r\n                }\r\n              })\r\n            } else {\r\n              this.selectChange(this.props.itemTmplPublishVo.freightTmplVo.tmplId)\r\n            }\r\n          }\r\n          this.setState({\r\n            deliveryData:deliveryDATA\r\n          })\r\n        } else {\r\n          this.setState({\r\n            checked:true,\r\n            selectValue:0,\r\n            deliveryData:[{id:0,fareName:'未设置'}]\r\n          })\r\n        }\r\n      }\r\n    }\r\n  }\r\n  deliveryClick=()=>{\r\n    console.log(11)\r\n    this.props.getDeliverySet().then(res=>{\r\n      if(res.code==0){\r\n        if(!res.data.shopFareTemplateForItemVo){\r\n          this.showConfirm();\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  showConfirm = () => {\r\n    confirm({\r\n      title: '提示',\r\n      content: '当前店铺未设置运费模板，是否立即前往设置？',\r\n      onOk: () => {window.open('/item-shop-view/freightCostTemplate');},\r\n      onCancel() {},\r\n    });\r\n  };\r\n\r\n  onChange=(e)=>{\r\n    console.log(e.target.checked)\r\n    let itemTmplPublishVo = JSON.parse(JSON.stringify(this.props.itemTmplPublishVo));\r\n    if(!e.target.checked){\r\n      itemTmplPublishVo.freightTmplVo.homeDelivery = 0;\r\n    } else {\r\n      itemTmplPublishVo.freightTmplVo.homeDelivery = 1;\r\n    }\r\n\r\n    this.props.updateItemTmplAction(itemTmplPublishVo);\r\n  }\r\n\r\n  selectChange=(value)=> {\r\n    console.log(`Selected: ${value}`);\r\n    this.setState({\r\n      selectValue:value\r\n    })\r\n    let itemTmplPublishVo = JSON.parse(JSON.stringify(this.props.itemTmplPublishVo));\r\n    itemTmplPublishVo.freightTmplVo.tmplId = value;\r\n    this.props.updateItemTmplAction(itemTmplPublishVo);\r\n  }\r\n\r\n  render() {\r\n    console.log(this.props.type)\r\n    console.log(this.props.itemTmplPublishVo)\r\n    return (\r\n      <div> \r\n          <h3 className = 'h3-title'>配送设置</h3>\r\n          <div>\r\n            <div className = 'otherMt202'>\r\n              <span className='smallColor smaillest'>商品运费模板:</span>\r\n              <span onClick={this.deliveryClick}>\r\n              <Select style={{width:200}}\r\n                  onChange={this.selectChange} \r\n                 // onFocus={this.selectFocus}\r\n                  value={this.state.selectValue} >\r\n                {this.state.deliveryData.map(item=><Option value={item.id}>{item.fareName}</Option>)}\r\n              </Select>\r\n              </span>\r\n              <Checkbox className='delivery-check'\r\n                        disabled ={this.state.checked}\r\n                        checked={Boolean(this.props.itemTmplPublishVo.freightTmplVo.homeDelivery)} \r\n                        onChange={this.onChange}>支持同城配送</Checkbox>\r\n            </div>\r\n          </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]}