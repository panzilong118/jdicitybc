{"version":3,"sources":["../../../../../src/components/Release/OtherElseInfo/v1.0.0/view/OtherElseInfo.js"],"names":["RadioGroup","Group","CheckboxGroup","TextArea","OtherElseInfo","props","textChange","e","console","log","target","value","itemTmplPublishVo","JSON","parse","packingList","setState","textValue","updateItemTmplAction","onFileListChange","fileList","new_fileList","map","item","push","uid","url","response","data","name","itemPicpdfVoList","onRemove","file","state","fileAddr","nextProps","minRows","maxRows","result","length","Component"],"mappings":"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","file":"OtherElseInfo.js","sourcesContent":["/**\r\n * @file 其他设置--其他信息\r\n */\r\nimport React, { Component } from 'react';\r\nimport { Checkbox, message, Radio, Input, Icon, Button } from 'jdcloudui';\r\nimport './style/index.css';\r\nimport UploadFile from './../../../UploadFile/v1.0.0/view/UploadFile';\r\n//import FileUp from '../../../FileUp/v1.0.0/view';\r\n\r\nconst RadioGroup = Radio.Group;\r\nconst CheckboxGroup = Checkbox.Group;\r\nconst { TextArea } = Input;\r\n\r\nexport default class OtherElseInfo extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state={\r\n      fileAddr: [],\r\n      textValue: ''\r\n    }\r\n  }\r\n  componentWillReceiveProps(nextProps) {\r\n    console.log(nextProps)\r\n  }\r\n\r\n  textChange=(e)=>{\r\n    console.log(e.target.value)\r\n    let itemTmplPublishVo = JSON.parse(JSON.stringify(this.props.itemTmplPublishVo));\r\n    itemTmplPublishVo.packingList = e.target.value;\r\n    this.setState({\r\n      textValue: itemTmplPublishVo.packingList\r\n    });\r\n    this.props.updateItemTmplAction(itemTmplPublishVo);\r\n  }\r\n\r\n  render() {\r\n    let fileList = this.props.itemTmplPublishVo && this.props.itemTmplPublishVo.itemPicpdfVoList || [];\r\n    return (\r\n      <div>\r\n        <h3 className='h3-title'>其他信息</h3>\r\n        <div>\r\n          <div className='otherMt202 elseInfo'>\r\n            <span className='smallColor smaillest'>包装清单:</span>\r\n            <TextArea autosize={{ minRows: 4, maxRows: 8 }}\r\n                      value={this.props.itemTmplPublishVo.packingList || ''}\r\n                      onChange={this.textChange} />\r\n          </div>\r\n          <div className='otherMt202 clearfix'>\r\n            <span className='smallColor smaillest pull-left'>商品手册:</span>\r\n            <div className='pull-left uploadify'>\r\n              <UploadFile\r\n                btnTitle='添加附件'\r\n                fileLength={5}\r\n                fileType={['png', 'jpg', 'word', 'excel', 'pdf']}\r\n                action='/proxy/base/upload/uploadFileLimit'\r\n                fileList={fileList}\r\n                onRemove={(result)=>{\r\n                  this.onRemove(result);\r\n                }}\r\n                onFileListChange={(fileList)=>{ this.onFileListChange(fileList) }}\r\n              />\r\n              {\r\n                fileList.length>=5?null:<span className='upload-tips'>只支持PDF、jpg、png、word和excel文档，大小5M以内</span>\r\n              }\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n  // 上传文件，更新数据源\r\n  onFileListChange = (fileList)=>{\r\n    let new_fileList = [];\r\n    (fileList || []).map((item)=>{\r\n      new_fileList.push({\r\n        uid: item.uid,\r\n        url: item.url || item.response && item.response.data || '',\r\n        name: item.name\r\n      });\r\n    })\r\n     // 更新总数据源\r\n     var itemTmplPublishVo = JSON.parse(JSON.stringify(this.props.itemTmplPublishVo));\r\n     itemTmplPublishVo.itemPicpdfVoList = new_fileList;\r\n     this.props.updateItemTmplAction(itemTmplPublishVo);\r\n  }\r\n\r\n  // 移除文件\r\n  onRemove = (file)=>{\r\n    // 更新总数据源\r\n    var itemTmplPublishVo = JSON.parse(JSON.stringify(this.props.itemTmplPublishVo));\r\n    var new_fileList = [];\r\n    (itemTmplPublishVo.itemPicpdfVoList || []).map((item)=>{\r\n      if(item.name != file.name || item.url != file.url || item.uid != file.uid){\r\n        new_fileList.push({...item});\r\n      }\r\n    });\r\n    itemTmplPublishVo.itemPicpdfVoList = new_fileList;\r\n    this.props.updateItemTmplAction(itemTmplPublishVo);\r\n  }\r\n}\r\n"]}