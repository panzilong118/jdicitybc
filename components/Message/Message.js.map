{"version":3,"sources":["../../src/components/Message/Message.js"],"names":["SubMenu","MenuItemGroup","ItemGroup","moment","locale","Message","props","context","state","shopDomain","buyerDomain","paltformDomain","domain","activeMenu","client","ApiClient","get","then","res","console","log","code","data","setState","icon","logo","userLogo","err","getWebsiteConfig","rs","map","_item","domainType","window","url","location","href","indexOf","zh_CN","display","minHeight","children","Component"],"mappings":"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","file":"Message.js","sourcesContent":["import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Helmet from 'react-helmet';\r\nimport {Menu, Icon} from 'jdcloudui';\r\nimport TopTools from '../TopTools/TopTools';\r\nconst SubMenu = Menu.SubMenu;\r\nconst MenuItemGroup = Menu.ItemGroup;\r\n\r\nimport './style/message.css';\r\nimport ApiClient from '../../apiClient/ApiClient';\r\n\r\n// 国际化中文\r\nimport { LocaleProvider } from 'jdcloudui';\r\nimport zh_CN from 'jdcloudui/lib/locale-provider/zh_CN';\r\nimport moment from 'moment';\r\nmoment.locale('zh-cn');\r\n\r\nexport default class Message extends Component {\r\n  constructor(props, context) {\r\n    super(props, context);\r\n    this.state = {\r\n      shopDomain: '',\r\n      buyerDomain: '',\r\n      paltformDomain: '',\r\n      domain: '',\r\n    };\r\n    this.activeMenu = '1';\r\n  }\r\n\r\n  //------------------获取ICON--------------------------------------------\r\n  getWebsiteConfig() {\r\n    var client = new ApiClient();\r\n    client.get('/platform-service/mallInfo/getMallInfo')\r\n      .then(\r\n        (res) => {\r\n          console.log(res)\r\n          if (res.code == 0 && res.data) {\r\n            this.setState({icon: res.data.icon, logo: res.data.userLogo})\r\n          }\r\n        },\r\n        (err) => {\r\n        }\r\n      )\r\n  }\r\n\r\n  componentWillMount() {\r\n    this.getWebsiteConfig();\r\n\r\n  }\r\n\r\n  componentDidMount() {\r\n    const client = new ApiClient();\r\n    client.get('passport/logout', {}).then(rs => {\r\n      if (rs.code == 0) {\r\n        rs.data.map(_item => {\r\n          if (_item.domainType == 3) this.setState({shopDomain: _item.domain});\r\n          if (_item.domainType == 2) this.setState({buyerDomain: _item.domain});\r\n          if (_item.domainType == 5) this.setState({paltformDomain: _item.domain});\r\n          if (_item.domainType == 1) this.setState({domain: _item.domain});\r\n        });\r\n      }\r\n    });\r\n    if (window) {\r\n      const url = window.location.href;\r\n      return url.indexOf('buyer') >= 0 ? this.activeMenu = '2' : this.activeMenu = '1';\r\n    }\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <LocaleProvider locale={zh_CN}>\r\n        <div>\r\n          <Helmet>\r\n            <title>消息中心</title>\r\n            <link rel=\"icon\" href={this.state.icon} mce_href={this.state.icon} type=\"image/x-icon\"/>\r\n          </Helmet>\r\n          <TopTools />\r\n          <div className=\"shop-framework-body-container\" style={{display: 'flex'}}>\r\n            <div className='shop-framework-body-container-left'>\r\n              <Menu\r\n                selectedKeys={[this.activeMenu]}\r\n                defaultOpenKeys={['sub1']}\r\n                mode=\"inline\"\r\n              >\r\n                <MenuItemGroup key=\"g1\" title=\"消息中心\">\r\n                  <Menu.Item key=\"1\">\r\n                    <a\r\n                      href={`http://${this.state.shopDomain}/shop-view/message/message-center`}\r\n                      className=\"a_block\">\r\n                      供应商消息\r\n                    </a>\r\n                  </Menu.Item>\r\n                  <Menu.Item key=\"2\">\r\n                    <a\r\n                      href={`http://${this.state.buyerDomain}/buyer-view/message/message-center`}\r\n                      className=\"a_block\">\r\n                      采购商消息\r\n                    </a>\r\n                  </Menu.Item>\r\n                </MenuItemGroup>\r\n              </Menu>\r\n            </div>\r\n            <div className='shop-framework-body-container-right' style={{minHeight: this.minHeight + \"px\"}}>\r\n              {this.props.children}\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </LocaleProvider>\r\n    )\r\n  }\r\n}"]}