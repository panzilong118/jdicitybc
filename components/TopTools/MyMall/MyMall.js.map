{"version":3,"sources":["../../../src/components/TopTools/MyMall/MyMall.js"],"names":["MyMall","getBusinessMenu","getBusinessMenuAction","dispatch","props","state","businessData","then","rs","length","setState","id","key","name","businessMenuLinkVos","menuName","menuUrl","buyer","shop","data","el","num","map","_item","_index","elList","push","_busi","num1","i","renderBussinessMenu","Component"],"mappings":"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","file":"MyMall.js","sourcesContent":["/* *************************\r\n * @author: FengYan\r\n * @update: 20180206\r\n * @description:我的商城\r\n * ************************/\r\n\r\n/* ***********  基础组件  ************ */\r\nimport React, {Component} from 'react';\r\nimport {Icon} from 'jdcloudui';\r\n\r\n/* ***********  自定义组件  ************ */\r\nimport getBusinessMenu, {getBusinessMenuAction} from './get_business_menu_redux';\r\n/* ***********  ajax  ************ */\r\nimport {bindActionCreators} from 'redux';\r\nimport {connect} from 'react-redux';\r\n@connect(\r\n    state => (getBusinessMenu),\r\n    dispatch => bindActionCreators({getBusinessMenuAction}, dispatch)\r\n)\r\nexport default class MyMall extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            businessData: []\r\n        }\r\n    }\r\n\r\n    /*\r\n     * @获取buyer,shop头部我的商城下菜单\r\n     * */\r\n    componentDidMount() {\r\n        this.props.getBusinessMenuAction().then(rs => {\r\n            if (rs && rs.length > 0) {\r\n                this.setState({businessData: rs});\r\n            }else{\r\n                const businessData = [\r\n                    {\r\n                        id: 1,\r\n                        key: 1,\r\n                        name: '采购商',\r\n                        businessMenuLinkVos: [\r\n                            {\r\n                                id: 11,\r\n                                key: 11,\r\n                                menuName: '已买到的产品',\r\n                                menuUrl: `//${this.props.buyer}/order-buyer-view/purchasedlist`\r\n                            }, {\r\n                                id: 12,\r\n                                key: 12,\r\n                                menuName: '优惠券',\r\n                                menuUrl: `//${this.props.buyer}/promotion-buyer-view/coupon/grid`\r\n                            }, {\r\n                                id: 13,\r\n                                key: 13,\r\n                                menuName: '退款/售后',\r\n                                menuUrl: `//${this.props.buyer}/customer-service-buyer-view/refund/grid`\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        id: 2,\r\n                        key: 2,\r\n                        name: '商家',\r\n                        businessMenuLinkVos: [\r\n                            {\r\n                                id: 21,\r\n                                key: 21,\r\n                                menuName: '商家中心',\r\n                                menuUrl: `//${this.props.buyer}/user-buyer-view/store-manage`\r\n                            }, {\r\n                                id: 22,\r\n                                key: 22,\r\n                                menuName: '商家入驻',\r\n                                menuUrl: `//${this.props.shop}/user-shop-view/sellerinfo/defaultshophome`\r\n                            }\r\n                        ]\r\n                    },\r\n                    {\r\n                        id: 3,\r\n                        key: 3,\r\n                        name: '自营供应商',\r\n                        businessMenuLinkVos: [\r\n                            {\r\n                                id: 31,\r\n                                key: 31,\r\n                                menuName: '供应商中心',\r\n                                menuUrl: `//${this.props.buyer}/user-buyer-view/store-manage`\r\n                            }, {\r\n                                id: 32,\r\n                                key: 32,\r\n                                menuName: '供应商入驻',\r\n                                menuUrl: `//${this.props.shop}/user-shop-view/sellerinfo/defaultsupplyhome`\r\n                            }\r\n                        ]\r\n                    }\r\n                ]\r\n                this.setState({businessData})\r\n            }\r\n        });\r\n    }\r\n\r\n    /*\r\n     * @渲染业务菜单\r\n     * */\r\n    renderBussinessMenu(data) {\r\n        const el = [];\r\n        let num = 0;\r\n        data.map(_item => {\r\n            if (_item.businessMenuLinkVos.length > num) {\r\n                num = _item.businessMenuLinkVos.length\r\n            }\r\n        });\r\n        data.map((_item, _index) => {\r\n            const elList = [];\r\n            _item.businessMenuLinkVos.map(_busi => {\r\n                elList.push(\r\n                    <dd key={`${_index}-${_busi.id}`}>\r\n                        <a href={_busi.menuUrl}\r\n                           className=\"text-999\">{_busi.menuName}</a>\r\n                    </dd>\r\n                )\r\n            });\r\n\r\n            const num1 = num - _item.businessMenuLinkVos.length;\r\n            for (let i = 0; i < num1; i++) {\r\n                elList.push(\r\n                    <dd key={i}>\r\n                        <a className=\"text-999\"> </a>\r\n                    </dd>\r\n                )\r\n            }\r\n\r\n            el.push(\r\n                <li key={_index}>\r\n                    <dl>\r\n                        <dt><strong className=\"text-333\">{_item.name}</strong></dt>\r\n                        {elList}\r\n                    </dl>\r\n                </li>\r\n            )\r\n        });\r\n        return el;\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"down-menu f-ib deg180\">\r\n                <a>我的商城<Icon type=\"down\" className=\"ml5 arrows\"/></a>\r\n                <ul className=\"down-menu-cont my-mall\">\r\n                    {this.renderBussinessMenu(this.state.businessData)}\r\n                </ul>\r\n            </div>\r\n        );\r\n    }\r\n}"]}