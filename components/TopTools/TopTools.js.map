{"version":3,"sources":["../../src/components/TopTools/TopTools.js"],"names":["company","CompanyLayer","TopTools","getUrl","getUrlAction","dispatch","props","state","shop","buyer","platform","defaultDomain","then","rs","code","domain","data","map","_item","domainType","setState","window","urlPath","location","href","indexOf","isCompanyId","isCompanyShopShow","isBuyer","getMessageDomain","Component"],"mappings":"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","file":"TopTools.js","sourcesContent":["/* *************************\r\n * @author: FengYan\r\n * @update: 20180206\r\n * @description:采购部、供应商、店铺顶端菜单\r\n * ************************/\r\n\r\n/* ***********  基础组件  ************ */\r\nimport React, {Component} from 'react';\r\nimport {Row, Col, Icon, Modal} from 'jdcloudui';\r\nimport {bindActionCreators} from 'redux';\r\nimport {connect} from 'react-redux';\r\n/* ***********  自定义组件  ************ */\r\nimport ChooseLocal from './ChooseLocal/ChooseLocal';\r\nimport UserInfo from './UserInfo/UserInfo';\r\nimport CompanyInfo from './CompanyInfo/CompanyInfo';\r\nimport ShopInfo from './ShopInfo/ShopInfo';\r\nimport MyMall from './MyMall/MyMall';\r\nimport ShoppingCart from './ShoppingCart/ShoppingCart';\r\nimport MyOrder from './MyOrder/MyOrder';\r\nimport MyMessage from './MyMessage/MyMessage';\r\nimport MobileMall from './MobileMall/MobileMall';\r\nimport IndexLinkBtn from './IndexLinkBtn/IndexLinkBtn';\r\nimport getUrl, {getUrlAction} from './redux/getUrl_redux';\r\nimport './styles/toptools.less';\r\nimport CompanyLayer from './CompanyLayer/CompanyLayer';\r\nconst company = new CompanyLayer();\r\n\r\n/* ***********  redux  ************ */\r\n@connect(\r\n  state => (getUrl),\r\n  dispatch => bindActionCreators({getUrlAction}, dispatch)\r\n)\r\nexport default class TopTools extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      shop: '',\r\n      buyer: '',\r\n      platform: '',\r\n      defaultDomain: ''\r\n    };\r\n  }\r\n\r\n  /*\r\n   * 发送获取域名请求\r\n   * */\r\n  componentWillMount() {\r\n    this.props.getUrlAction().then(rs => {\r\n      if (rs.code != 0) return;\r\n      const domain = {};\r\n      rs.data.map(_item => {\r\n        if (_item.domainType == 3) domain.shop = _item.domain;\r\n        if (_item.domainType == 2) domain.buyer = _item.domain;\r\n        if (_item.domainType == 5) domain.platform = _item.domain;\r\n        if (_item.domainType == 1) domain.defaultDomain = _item.domain;\r\n      });\r\n      this.setState({...domain});\r\n    });\r\n  }\r\n\r\n  /*\r\n   * 消息中心url生成判断\r\n   * 根据域名buyer或者shop生成对应的消息中心url\r\n   * */\r\n  getMessageDomain() {\r\n    if (typeof window !== 'undefined') {\r\n      const urlPath = window.location.href;\r\n      if (urlPath.indexOf('buyer.') !== -1) {\r\n        return this.state.buyer;\r\n      }\r\n      return this.state.shop;\r\n    }\r\n  }\r\n\r\n  /*\r\n   * 判断是否显示店铺列表或者公司列表\r\n   * */\r\n  isBuyer() {\r\n    if (typeof window === 'undefined') return;\r\n    const urlPath = window.location.href;\r\n    if (urlPath.indexOf('buyer.') !== -1 || urlPath.indexOf('passport.') !== -1) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  /*\r\n   * 判断是否显示店铺列表、公司列表\r\n   * */\r\n  isCompanyShopShow() {\r\n    if (typeof window === 'undefined') return;\r\n    const urlPath = window.location.href;\r\n    if (urlPath.indexOf('sellerinfo/') !== -1 || urlPath.indexOf('accountmanage/') !== -1) {\r\n      return false;\r\n    }\r\n    return true;\r\n  }\r\n\r\n\r\n  render() {\r\n    company.isCompanyId();\r\n    return (\r\n      <div className=\"top-tools-wrap\">\r\n        <div className=\"top-tools-container f-cb\">\r\n          <div className=\"f-fl\">\r\n            {/*  选择收货地  */}\r\n            <ChooseLocal defaultDomain={this.state.defaultDomain}/>\r\n            {/*  分隔线  */}\r\n            <span className=\"vertical bg-666\"/>\r\n            {/*  用户信息  */}\r\n            <UserInfo buyer={this.state.buyer}/>\r\n            {/*  分隔线  */}\r\n            <span className=\"vertical bg-666\"/>\r\n            {/*  公司/店铺选择  */}\r\n            {\r\n              this.isCompanyShopShow() ?\r\n                this.isBuyer() ? (\r\n                  <CompanyInfo defaultDomain={this.state.defaultDomain} buyer={this.state.buyer}/>\r\n                ) : (\r\n                  <ShopInfo defaultDomain={this.state.defaultDomain} shop={this.state.shop}/>\r\n                ) : ''\r\n            }\r\n          </div>\r\n          <div className=\"f-fr\">\r\n            {/*  首页按钮  */}\r\n            <IndexLinkBtn defaultDomain={this.state.defaultDomain}/>\r\n            {/*  分隔线  */}\r\n            <span className=\"vertical bg-666\"/>\r\n            {/*  我的商城  */}\r\n            <MyMall buyer={this.state.buyer} shop={this.state.shop}/>\r\n            {/*  分隔线  */}\r\n            <span className=\"vertical bg-666\"/>\r\n            {/*  进货车  */}\r\n            <ShoppingCart defaultDomain={this.state.defaultDomain}/>\r\n            {/*  分隔线  */}\r\n            <span className=\"vertical bg-666\"/>\r\n            {/*  我的订单  */}\r\n            <MyOrder buyer={this.state.buyer}/>\r\n            {/*  分隔线  */}\r\n            <span className=\"vertical bg-666\"/>\r\n            {/*  消息  */}\r\n            <MyMessage domain={this.getMessageDomain()}/>\r\n            {/*  分隔线  */}\r\n            <span className=\"vertical bg-666\"/>\r\n            {/*  手机商城  */}\r\n            <MobileMall/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]}