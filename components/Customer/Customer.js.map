{"version":3,"sources":["../../src/components/Customer/Customer.js"],"names":["Customer","props","content","state","scrollTop","feedbackUrl","client","ApiClient","get","then","res","code","data","map","_item","domainType","domain","setState","err","document","addEventListener","onChange","body","defaultUrl","iWidth","iHeight","iTop","window","screen","availHeight","iLeft","availWidth","sqUrl","SqCode","open","handleCreateShangQiao","display","toTop","Component"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAGA;;;;AAEA;;AACA;;;;;;IACqBA,Q;;;AACnB,oBAAYC,KAAZ,EAAmBC,OAAnB,EAA4B;AAAA;;AAAA,0IACpBD,KADoB,EACbC,OADa;;AAE1B,UAAKC,KAAL,GAAa,EAACC,WAAW,CAAZ,EAAeC,aAAa,EAA5B,EAAb;AAF0B;AAG3B;;;;yCACoB;AAAA;;AACnB,UAAIC,SAAS,IAAIC,mBAAJ,EAAb;AACAD,aAAOE,GAAP,CAAW,kBAAX,EACGC,IADH,CAEI,UAACC,GAAD,EAAS;AACP,YAAGA,IAAIC,IAAJ,IAAY,CAAZ,IAAiBD,IAAIE,IAAxB,EAA8B;AAC5BF,cAAIE,IAAJ,CAASC,GAAT,CAAa,iBAAS;AACpB,gBAAIC,MAAMC,UAAN,IAAoB,CAAxB,EAA2B;AACzB,kBAAIV,0BAAwBS,MAAME,MAA9B,gCAAJ;AACA,qBAAKC,QAAL,CAAc,EAACZ,aAAaA,WAAd,EAAd;AACD;AACF,WALD;AAMD;AACF,OAXL,EAYI,UAACa,GAAD,EAAS,CACR,CAbL;AAeD;;;wCAEmB;AAAA;;AAClBC,eAASC,gBAAT,CAA0B,QAA1B,EAAoC;AAAA,eAAI,OAAKC,QAAL,EAAJ;AAAA,OAApC,EAAyD,IAAzD;AACD;;;4BACO;AACNF,eAASG,IAAT,CAAclB,SAAd,GAA0B,CAA1B;AACD;;;+BACU;AACT,WAAKa,QAAL,CAAc,EAACb,WAAWe,SAASG,IAAT,CAAclB,SAA1B,EAAd;AACD;;;4CACuB;AACtB,UAAImB,aAAa,kEAAjB;AACA,UAAIC,SAAS,GAAb;AACA,UAAIC,UAAU,GAAd;AACA,UAAIC,OAAO,CAACC,OAAOC,MAAP,CAAcC,WAAd,GAA4B,EAA5B,GAAiCJ,OAAlC,IAA6C,CAAxD;AACA,UAAIK,QAAQ,CAACH,OAAOC,MAAP,CAAcG,UAAd,GAA2B,EAA3B,GAAgCP,MAAjC,IAA2C,CAAvD;AACA,UAAIQ,QAAQ,KAAK/B,KAAL,CAAWgC,MAAX,GAAkB,KAAKhC,KAAL,CAAWgC,MAA7B,GAAoCV,UAAhD;AACA;AACAI,aAAOO,IAAP,CAAaX,UAAb,EAAyB,WAAzB,gHAAkJG,IAAlJ,cAA+JI,KAA/J;AACD;;;6BAEQ;AAAA;;AACP,aACE;AAAA;AAAA,UAAK,WAAU,UAAf;AACE;AAAA;AAAA,YAAK,SAAS;AAAA,qBAAI,OAAKK,qBAAL,EAAJ;AAAA,aAAd,EAAgD,WAAU,OAA1D;AACE;AAAA;AAAA,cAAM,WAAU,IAAhB;AACE,4DAAM,MAAK,aAAX;AADF,WADF;AAIE;AAAA;AAAA,cAAM,WAAU,OAAhB;AAAA;AAAA;AAJF,SADF;AAOE;AAAA;AAAA,YAAK,WAAU,OAAf,EAAuB,OAAO,KAAKhC,KAAL,CAAWC,SAAX,IAAwB,CAAxB,GAA4B,EAACgC,SAAS,MAAV,EAA5B,GAAgD,EAACA,SAAS,EAAV,EAA9E;AACE;AAAA;AAAA,cAAM,WAAU,KAAhB,EAAsB,SAAS;AAAA,uBAAI,OAAKC,KAAL,EAAJ;AAAA,eAA/B;AACE,4DAAM,MAAK,UAAX;AADF;AADF,SAPF;AAYE;AAAA;AAAA,YAAK,WAAU,UAAf;AACE;AAAA;AAAA,cAAG,MAAM,KAAKlC,KAAL,CAAWE,WAApB,EAAiC,QAAO,QAAxC;AACE;AAAA;AAAA,gBAAM,WAAU,IAAhB;AACE,8DAAM,MAAK,cAAX;AADF,aADF;AAIE;AAAA;AAAA,gBAAM,WAAU,OAAhB;AAAA;AAAA;AAJF;AADF;AAZF,OADF;AAuBD;;;EApEmCiC,gB,GAPtC;;;;;kBAOqBtC,Q","file":"Customer.js","sourcesContent":["/**\r\n * Created by huangxiao3 on 2017/6/8.\r\n */\r\nimport React,{Component} from 'react';\r\nimport {Icon} from 'jdcloudui';\r\nimport './styles.css';\r\nimport ApiClient from '../../apiClient/ApiClient';\r\nexport default class Customer extends Component {\r\n  constructor(props, content) {\r\n    super(props, content);\r\n    this.state = {scrollTop: 0, feedbackUrl: ''};\r\n  }\r\n  componentWillMount() {\r\n    var client = new ApiClient();\r\n    client.get('/passport/logout')\r\n      .then(\r\n        (res) => {\r\n          if(res.code == 0 && res.data) {\r\n            res.data.map(_item => {\r\n              if (_item.domainType == 1) {\r\n                let feedbackUrl = `http://${_item.domain}/website-view/user-feedback`;\r\n                this.setState({feedbackUrl: feedbackUrl});\r\n              }\r\n            });\r\n          }\r\n        },\r\n        (err) => {\r\n        }\r\n      );\r\n  }\r\n\r\n  componentDidMount() {\r\n    document.addEventListener('scroll', ()=>this.onChange(), true);\r\n  }\r\n  toTop() {\r\n    document.body.scrollTop = 0;\r\n  }\r\n  onChange() {\r\n    this.setState({scrollTop: document.body.scrollTop});\r\n  }\r\n  handleCreateShangQiao() {\r\n    let defaultUrl = 'http://p.qiao.baidu.com/cps/chat?siteId=10819178&userId=23978973';\r\n    var iWidth = 580;\r\n    var iHeight = 510;\r\n    var iTop = (window.screen.availHeight - 30 - iHeight) / 2;\r\n    var iLeft = (window.screen.availWidth - 10 - iWidth) / 2;\r\n    let sqUrl = this.props.SqCode?this.props.SqCode:defaultUrl;\r\n    // 去hnc 暂时拦截\r\n    window.open (defaultUrl, \"shangqiao\", `height=510, width=580, toolbar =no, menubar=no, scrollbars=no, resizable=no, location=no, status=no, top=${iTop},left=${iLeft}`);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"rightBox\">\r\n        <div onClick={()=>this.handleCreateShangQiao()} className=\"custo\">\r\n          <span className=\"tb\">\r\n            <Icon type=\"new-service\" />\r\n          </span>\r\n          <span className=\"wenzi\">在线客服</span>\r\n        </div>\r\n        <div className=\"toTop\" style={this.state.scrollTop == 0 ? {display: 'none'} : {display: ''}}>\r\n          <span className=\"top\" onClick={()=>this.toTop()}>\r\n            <Icon type=\"arrow-up\" />\r\n          </span>\r\n        </div>\r\n        <div className=\"feedback\">\r\n          <a href={this.state.feedbackUrl} target=\"_blank\">\r\n            <span className=\"tb\">\r\n              <Icon type=\"new-feedback\" />\r\n            </span>\r\n            <span className=\"wenzi\">反馈</span>\r\n          </a>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n"]}