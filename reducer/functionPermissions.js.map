{"version":3,"sources":["../src/reducer/functionPermissions.js"],"names":["getPlatformFuncPermission","getFuncPermission","getSubPageFuncPermission","FUNC_PERMISSIONS_LOADING","FUNC_PERMISSIONS_SUCCESS","FUNC_PERMISSIONS_FAIL","state","action","type","loading","console","log","result","loaded","data","error","msg","getCookieByArray","name","document","cookies","cookie","split","c","i","length","replace","types","promise","client","get","params","shopType","codes","props","routing","locationBeforeTransitions","query","codesArray"],"mappings":";;;;;;;;;;QA6CgBA,yB,GAAAA,yB;QAMAC,iB,GAAAA,iB;QAOAC,wB,GAAAA,wB;;;;;;;;;;AA1DhB,IAAMC,2BAA2B,sCAAjC;AACA,IAAMC,2BAA2B,sCAAjC;AACA,IAAMC,wBAAwB,mCAA9B;;eAEe,oBAA6B;AAAA,MAAnBC,KAAmB,uEAAb,EAAa;AAAA,MAAVC,MAAU,uEAAH,EAAG;;AAC1C,UAAOA,OAAOC,IAAd;AACE,SAAKL,wBAAL;AACE,wCACKG,KADL;AAEEG,iBAAQ;AAFV;AAIF,SAAKL,wBAAL;AACEM,cAAQC,GAAR,CAAYJ,OAAOK,MAAnB;AACA,wCACKN,KADL;AAEEG,iBAAQ,KAFV;AAGEI,gBAAO,IAHT;AAIEC,cAAKP,OAAOK;AAJd;AAMF,SAAKP,qBAAL;AACE,wCACKC,KADL;AAEEG,iBAAQ,KAFV;AAGEI,gBAAO,KAHT;AAIEE,eAAMR,OAAOS;AAJf;AAMF;AACE,aAAOV,KAAP;AAtBJ;AAwBD,C;;;AACD;;AACA,SAASW,gBAAT,CAA0BC,IAA1B,EAA+B;AAC7B,MAAG,OAAOC,QAAP,KAAoB,WAAvB,EAAmC;AACjC,QAAIC,UAAUD,SAASE,MAAT,CAAgBC,KAAhB,CAAsB,GAAtB,CAAd;AACA,QAAIC,CAAJ;AACA,SAAI,IAAIC,IAAE,CAAV,EAAaA,IAAEJ,QAAQK,MAAvB,EAAgCD,GAAhC,EAAoC;AAClCD,UAAIH,QAAQI,CAAR,EAAWF,KAAX,CAAiB,GAAjB,CAAJ;AACA,UAAIC,EAAE,CAAF,EAAKG,OAAL,CAAa,GAAb,EAAkB,EAAlB,KAAyBR,IAA7B,EAAmC;AACjC,eAAOK,EAAE,CAAF,CAAP;AACD;AACF;AACF,GATD,MASK;AACH,WAAO,IAAP;AACD;AACF;AACM,SAASvB,yBAAT,GAAoC;AACzC,SAAO;AACL2B,WAAM,CAACxB,wBAAD,EAA0BC,wBAA1B,EAAmDC,qBAAnD,CADD;AAELuB,aAAQ;AAAA,aAAQC,OAAOC,GAAP,CAAW,wDAAX,CAAR;AAAA;AAFH,GAAP;AAID;AACM,SAAS7B,iBAAT,GAA4B;AACjC,SAAO;AACL0B,WAAM,CAACxB,wBAAD,EAA0BC,wBAA1B,EAAmDC,qBAAnD,CADD;AAELuB,aAAQ;AAAA,aAAQC,OAAOC,GAAP,CAAW,qDAAX,EAAiE,EAAEC,QAAQ,EAACC,UAASf,iBAAiB,UAAjB,CAAV,EAAV,EAAjE,CAAR;AAAA;AAFH,GAAP;AAID;AACD;AACO,SAASf,wBAAT,GAAmC;AACtC,MAAI+B,QAAQ,KAAKC,KAAL,CAAWC,OAAX,CAAmBC,yBAAnB,CAA6CC,KAA7C,CAAmDJ,KAA/D;AACA,MAAIK,aAAaL,SAAUA,MAAMX,KAAN,CAAY,GAAZ,CAAV,IAA8B,EAA/C;AAEH;;;;;;;;;;;;0BA9DKnB,wB;0BACAC,wB;0BACAC,qB;0BA6BGY,gB;0BAcOjB,yB;0BAMAC,iB;0BAOAC,wB","file":"functionPermissions.js","sourcesContent":["const FUNC_PERMISSIONS_LOADING = \"func/permissions/PERMISSIONS_LOADING\";\r\nconst FUNC_PERMISSIONS_SUCCESS = \"func/permissions/PERMISSIONS_SUCCESS\";\r\nconst FUNC_PERMISSIONS_FAIL = \"func/permissions/PERMISSIONS_FAIL\";\r\n\r\nexport default function (state={},action={}){\r\n  switch(action.type){\r\n    case FUNC_PERMISSIONS_LOADING:\r\n      return {\r\n        ...state,\r\n        loading:true\r\n      };\r\n    case FUNC_PERMISSIONS_SUCCESS:\r\n      console.log(action.result);\r\n      return {\r\n        ...state,\r\n        loading:false,\r\n        loaded:true,\r\n        data:action.result\r\n      };\r\n    case FUNC_PERMISSIONS_FAIL:\r\n      return {\r\n        ...state,\r\n        loading:false,\r\n        loaded:false,\r\n        error:action.msg\r\n      };\r\n    default:\r\n      return state;\r\n  }\r\n}\r\n// 根据name获取cookie值\r\nfunction getCookieByArray(name){\r\n  if(typeof document !== 'undefined'){\r\n    var cookies = document.cookie.split(';');\r\n    var c;\r\n    for(var i=0; i<cookies.length ; i++){\r\n      c = cookies[i].split('=');\r\n      if (c[0].replace(' ', '') == name) {\r\n        return c[1];\r\n      }\r\n    }\r\n  }else{\r\n    return null;\r\n  }\r\n}\r\nexport function getPlatformFuncPermission(){\r\n  return {\r\n    types:[FUNC_PERMISSIONS_LOADING,FUNC_PERMISSIONS_SUCCESS,FUNC_PERMISSIONS_FAIL],\r\n    promise:client=>client.get('authority/platform/resource/queryResourceByCodeOrRefer')\r\n  }\r\n}\r\nexport function getFuncPermission(){\r\n  return {\r\n    types:[FUNC_PERMISSIONS_LOADING,FUNC_PERMISSIONS_SUCCESS,FUNC_PERMISSIONS_FAIL],\r\n    promise:client=>client.get('/authority/mall/resource/queryResourceByCodeOrRefer',{ params: {shopType:getCookieByArray('shopType')} })\r\n  }\r\n}\r\n//获取子页面的动作权限\r\nexport function getSubPageFuncPermission(){\r\n    let codes = this.props.routing.locationBeforeTransitions.query.codes;\r\n    var codesArray = codes &&  codes.split(\",\") || [];\r\n\r\n}\r\n"]}