{"version":3,"sources":["../src/routes/swigrender.js"],"names":["req","res","template","data","config","envData","micro_service_name","replace","_b2b_static_server_","__DEVELOPMENT__","webpackIsomorphicTools","refresh","assets","style","styles","map","key","serverData","render","css","join","js","javascript","mode","err","console","log","stack"],"mappings":";;;;;;;;;;;;;;;;;;kBACe,UAASA,GAAT,EAAaC,GAAb,EAAkBC,QAAlB,EAAsD;AAAA,MAA3BC,IAA2B,uEAAtB,EAAsB;AAAA,MAAnBC,MAAmB;AAAA,MAAZC,OAAY,uEAAJ,EAAI;;AACnE,MAAMC,qBAAqBF,OAAOE,kBAAP,CAA0BC,OAA1B,CAAkC,MAAlC,EAAyC,EAAzC,CAA3B;AACA,wBAAcF,OAAd,EAAsB,EAACG,qBAAoBJ,OAAOI,mBAAP,GAA2B,GAA3B,GAA+BF,kBAA/B,GAAkD,GAAvE,EAAtB;AACA,MAAIG,eAAJ,EAAqB;AACnBC,2BAAuBC,OAAvB;AACD;AACD,MAAI;AACF,QAAMC,SAASF,uBAAuBE,MAAvB,EAAf;AACA,QAAMC,QAAQ,oBAAYD,OAAOE,MAAnB,EAA2BC,GAA3B,CAA+B,UAACF,KAAD,EAAQG,GAAR,EAAgB;AAC1D,aAAO,iBAAiBJ,OAAOE,MAAP,CAAcD,KAAd,CAAjB,GAAwC,iFAA/C;AACF,KAFa,CAAd;AAGA,QAAMI,aAAa,mBAAiB,mCAAUZ,OAAV,CAApC;AACAJ,QAAIiB,MAAJ,CAAWhB,QAAX,2BAAsBiB,KAAIP,OAAOE,MAAjC,EAAwCD,OAAMA,MAAMO,IAAN,CAAW,GAAX,CAA9C,EAA8DH,sBAA9D,EAAyEI,IAAGT,OAAOU,UAAnF,EAA8FC,MAAKd,eAAnG,EAAmHH,sCAAnH,IAAyIH,IAAzI;AAED,GARD,CAQC,OAAMqB,GAAN,EAAW;AACVC,YAAQC,GAAR,CAAYF,IAAIG,KAAhB;AACD;AACF,C;;AAlBD","file":"swigrender.js","sourcesContent":["import serialize from 'serialize-javascript';\nexport default function(req,res, template,data={},config,envData={}) {\n  const micro_service_name = config.micro_service_name.replace(\"b2b-\",\"\")\n  Object.assign(envData,{_b2b_static_server_:config._b2b_static_server_+\"/\"+micro_service_name+\"/\"});\n  if (__DEVELOPMENT__) {\n    webpackIsomorphicTools.refresh();\n  }\n  try {\n    const assets = webpackIsomorphicTools.assets();\n    const style = Object.keys(assets.styles).map((style, key) => {\n       return '<link href=\"' + assets.styles[style] + '\" media=\"screen, projection\" rel=\"stylesheet\" type=\"text/css\" charSet=\"UTF-8\"/>'\n    });\n    const serverData = \"window.__data=\"+serialize(envData);\n    res.render(template, {css:assets.styles,style:style.join(\" \"),serverData,js:assets.javascript,mode:__DEVELOPMENT__,micro_service_name,...data});\n\n  }catch(err) {\n    console.log(err.stack)\n  }\n}"]}