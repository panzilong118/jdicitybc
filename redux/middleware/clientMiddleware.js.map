{"version":3,"sources":["../../src/redux/middleware/clientMiddleware.js"],"names":["clientMiddleware","helpers","dispatch","getState","action","promise","types","rest","next","REQUEST","SUCCESS","FAILURE","type","actionPromise","then","result","error","catch","console"],"mappings":";;;;;;;;;;;;;;;;;;kBAAwBA,gB;;;;;;;;;;AAAT,SAASA,gBAAT,CAA0BC,OAA1B,EAAmC;AAChD,SAAO;AAAA,QAAGC,QAAH,QAAGA,QAAH;AAAA,QAAaC,QAAb,QAAaA,QAAb;AAAA,WAA4B;AAAA,aAAQ,kBAAU;AACnD,YAAI,OAAOC,MAAP,KAAkB,UAAtB,EAAkC;AAChC,iBAAOA,OAAOF,QAAP,EAAiBC,QAAjB,CAAP;AACD;;AAHkD,YAK3CE,OAL2C,GAKfD,MALe,CAK3CC,OAL2C;AAAA,YAKlCC,KALkC,GAKfF,MALe,CAKlCE,KALkC;AAAA,YAKxBC,IALwB,0CAKfH,MALe;;AAMnD,YAAI,CAACC,OAAL,EAAc;AACZ,iBAAOG,KAAKJ,MAAL,CAAP;AACD;;AARkD,kDAUfE,KAVe;AAAA,YAU5CG,OAV4C;AAAA,YAUnCC,OAVmC;AAAA,YAU1BC,OAV0B;;AAWnDH,wCAAUD,IAAV,IAAgBK,MAAMH,OAAtB;;AAEA,YAAMI,gBAAgBR,QAAQJ,OAAR,EAAiBC,QAAjB,CAAtB;AACAW,sBACGC,IADH,CACQ;AAAA,iBAAUN,gCAAUD,IAAV,IAAgBQ,cAAhB,EAAwBH,MAAMF,OAA9B,IAAV;AAAA,SADR,EAC4D;AAAA,iBAASF,gCAAUD,IAAV,IAAgBS,YAAhB,EAAuBJ,MAAMD,OAA7B,IAAT;AAAA,SAD5D,EAEGM,KAFH,CAES,iBAAS;AACdC,kBAAQF,KAAR,CAAc,mBAAd,EAAmCA,KAAnC;AACAR,0CAAUD,IAAV,IAAgBS,YAAhB,EAAuBJ,MAAMD,OAA7B;AACD,SALH;;AAOA,eAAOE,aAAP;AACD,OAtBkC;AAAA,KAA5B;AAAA,GAAP;AAuBD;;;;;;;;;;;;0BAxBuBb,gB","file":"clientMiddleware.js","sourcesContent":["export default function clientMiddleware(helpers) {\r\n  return ({ dispatch, getState }) => next => action => {\r\n    if (typeof action === 'function') {\r\n      return action(dispatch, getState);\r\n    }\r\n\r\n    const { promise, types, ...rest } = action;\r\n    if (!promise) {\r\n      return next(action);\r\n    }\r\n\r\n    const [REQUEST, SUCCESS, FAILURE] = types;\r\n    next({ ...rest, type: REQUEST });\r\n\r\n    const actionPromise = promise(helpers, dispatch);\r\n    actionPromise\r\n      .then(result => next({ ...rest, result, type: SUCCESS }), error => next({ ...rest, error, type: FAILURE }))\r\n      .catch(error => {\r\n        console.error('MIDDLEWARE ERROR:', error);\r\n        next({ ...rest, error, type: FAILURE });\r\n      });\r\n\r\n    return actionPromise;\r\n  };\r\n}\r\n"]}