{"version":3,"sources":["../../components/_util/throttleByAnimationFrame.js"],"names":["throttleByAnimationFrame","throttleByAnimationFrameDecorator","reqAnimFrame","fn","requestId","later","args","throttled","cancel","target","key","descriptor","value","definingProperty","configurable","get","prototype","hasOwnProperty","boundFn","bind","Object","defineProperty","writable"],"mappings":";;;;;kBAIwBA,wB;QAqBRC,iC,GAAAA,iC;;AAzBhB;;;;;;;;AAEA,IAAMC,eAAe,yCAArB;;AAEe,SAASF,wBAAT,CAAkCG,EAAlC,EAAsC;AACjD,QAAIC,kBAAJ;;AAEA,QAAMC,QAAQ,SAARA,KAAQ,CAACC,IAAD,EAAU;AACpB,eAAO,YAAM;AACTF,wBAAY,IAAZ;AACAD,mDAAMG,IAAN;AACH,SAHD;AAIH,KALD;;AAOA,QAAMC,YAAY,SAAZA,SAAY,GAAa;AAAA,0CAATD,IAAS;AAATA,gBAAS;AAAA;;AAC3B,YAAIF,aAAa,IAAjB,EAAuB;AACnBA,wBAAYF,aAAaG,MAAMC,IAAN,CAAb,CAAZ;AACH;AACJ,KAJD;;AAMAC,cAAUC,MAAV,GAAmB;AAAA,eAAM,2DAA4BJ,SAA5B,CAAN;AAAA,KAAnB;;AAEA,WAAOG,SAAP;AACH;;AAEM,SAASN,iCAAT,GAA6C;AAChD,WAAO,UAAUQ,MAAV,EAAkBC,GAAlB,EAAuBC,UAAvB,EAAmC;AACtC,YAAMR,KAAKQ,WAAWC,KAAtB;AACA,YAAIC,mBAAmB,KAAvB;AACA,eAAO;AACHC,0BAAc,IADX;AAEHC,eAFG,iBAEG;AACF,oBAAIF,oBAAoB,SAASJ,OAAOO,SAApC,IAAiD,KAAKC,cAAL,CAAoBP,GAApB,CAArD,EAA+E;AAC3E,2BAAOP,EAAP;AACH;;AAED,oBAAMe,UAAUlB,yBAAyBG,GAAGgB,IAAH,CAAQ,IAAR,CAAzB,CAAhB;AACAN,mCAAmB,IAAnB;AACAO,uBAAOC,cAAP,CAAsB,IAAtB,EAA4BX,GAA5B,EAAiC;AAC7BE,2BAAOM,OADsB;AAE7BJ,kCAAc,IAFe;AAG7BQ,8BAAU;AAHmB,iBAAjC;AAKAT,mCAAmB,KAAnB;AACA,uBAAOK,OAAP;AACH;AAhBE,SAAP;AAkBH,KArBD;AAsBH","file":"throttleByAnimationFrame.js","sourcesContent":["import getRequestAnimationFrame, { cancelRequestAnimationFrame } from '../_util/getRequestAnimationFrame';\n\nconst reqAnimFrame = getRequestAnimationFrame();\n\nexport default function throttleByAnimationFrame(fn) {\n    let requestId;\n\n    const later = (args) => {\n        return () => {\n            requestId = null;\n            fn(...args);\n        };\n    };\n\n    const throttled = (...args) => {\n        if (requestId == null) {\n            requestId = reqAnimFrame(later(args));\n        }\n    };\n\n    throttled.cancel = () => cancelRequestAnimationFrame(requestId);\n\n    return throttled;\n}\n\nexport function throttleByAnimationFrameDecorator() {\n    return function (target, key, descriptor) {\n        const fn = descriptor.value;\n        let definingProperty = false;\n        return {\n            configurable: true,\n            get() {\n                if (definingProperty || this === target.prototype || this.hasOwnProperty(key)) {\n                    return fn;\n                }\n\n                const boundFn = throttleByAnimationFrame(fn.bind(this));\n                definingProperty = true;\n                Object.defineProperty(this, key, {\n                    value: boundFn,\n                    configurable: true,\n                    writable: true,\n                });\n                definingProperty = false;\n                return boundFn;\n            }\n        };\n    };\n}\n"]}