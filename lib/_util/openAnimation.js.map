{"version":3,"sources":["../../components/_util/openAnimation.js"],"names":["reqAnimFrame","animate","node","show","done","height","requestAnimationFrameId","start","style","offsetHeight","opacity","active","end","animation","enter","leave","appear"],"mappings":";;;;;;AAAA;;;;AAEA;;;;;;AAEA,IAAMA,eAAe,yCAArB;;AAEA,SAASC,OAAT,CAAiBC,IAAjB,EAAuBC,IAAvB,EAA6BC,IAA7B,EAAmC;AAC/B,QAAIC,eAAJ;AACA,QAAIC,gCAAJ;AACA,WAAO,4BAAaJ,IAAb,EAAmB,oBAAnB,EAAyC;AAC5CK,aAD4C,mBACpC;AACJ,gBAAI,CAACJ,IAAL,EAAW;AACPD,qBAAKM,KAAL,CAAWH,MAAX,GAAuBH,KAAKO,YAA5B;AACAP,qBAAKM,KAAL,CAAWE,OAAX,GAAqB,GAArB;AACH,aAHD,MAGO;AACHL,yBAASH,KAAKO,YAAd;AACAP,qBAAKM,KAAL,CAAWH,MAAX,GAAoB,KAApB;AACAH,qBAAKM,KAAL,CAAWE,OAAX,GAAqB,GAArB;AACH;AACJ,SAV2C;AAW5CC,cAX4C,oBAWnC;AACL,gBAAIL,uBAAJ,EAA6B;AACzB,2EAA4BA,uBAA5B;AACH;AACDA,sCAA0BN,aAAa,YAAM;AACzCE,qBAAKM,KAAL,CAAWH,MAAX,IAAuBF,OAAOE,MAAP,GAAgB,CAAvC;AACAH,qBAAKM,KAAL,CAAWE,OAAX,GAAqBP,OAAO,GAAP,GAAa,GAAlC;AACH,aAHyB,CAA1B;AAIH,SAnB2C;AAoB5CS,WApB4C,iBAoBtC;AACF,gBAAIN,uBAAJ,EAA6B;AACzB,2EAA4BA,uBAA5B;AACH;AACDJ,iBAAKM,KAAL,CAAWH,MAAX,GAAoB,EAApB;AACAH,iBAAKM,KAAL,CAAWE,OAAX,GAAqB,EAArB;AACAN;AACH;AA3B2C,KAAzC,CAAP;AA6BH;;AAED,IAAMS,YAAY;AACdC,SADc,iBACRZ,IADQ,EACFE,IADE,EACI;AACd,eAAOH,QAAQC,IAAR,EAAc,IAAd,EAAoBE,IAApB,CAAP;AACH,KAHa;AAIdW,SAJc,iBAIRb,IAJQ,EAIFE,IAJE,EAII;AACd,eAAOH,QAAQC,IAAR,EAAc,KAAd,EAAqBE,IAArB,CAAP;AACH,KANa;AAOdY,UAPc,kBAOPd,IAPO,EAODE,IAPC,EAOK;AACf,eAAOH,QAAQC,IAAR,EAAc,IAAd,EAAoBE,IAApB,CAAP;AACH;AATa,CAAlB;;kBAYeS,S","file":"openAnimation.js","sourcesContent":["import cssAnimation from 'css-animation';\r\n\r\nimport getRequestAnimationFrame, { cancelRequestAnimationFrame } from './getRequestAnimationFrame';\r\n\r\nconst reqAnimFrame = getRequestAnimationFrame();\r\n\r\nfunction animate(node, show, done) {\r\n    let height;\r\n    let requestAnimationFrameId;\r\n    return cssAnimation(node, 'jc-motion-collapse', {\r\n        start() {\r\n            if (!show) {\r\n                node.style.height = `${node.offsetHeight}px`;\r\n                node.style.opacity = '1';\r\n            } else {\r\n                height = node.offsetHeight;\r\n                node.style.height = '0px';\r\n                node.style.opacity = '0';\r\n            }\r\n        },\r\n        active() {\r\n            if (requestAnimationFrameId) {\r\n                cancelRequestAnimationFrame(requestAnimationFrameId);\r\n            }\r\n            requestAnimationFrameId = reqAnimFrame(() => {\r\n                node.style.height = `${show ? height : 0}px`;\r\n                node.style.opacity = show ? '1' : '0';\r\n            });\r\n        },\r\n        end() {\r\n            if (requestAnimationFrameId) {\r\n                cancelRequestAnimationFrame(requestAnimationFrameId);\r\n            }\r\n            node.style.height = '';\r\n            node.style.opacity = '';\r\n            done();\r\n        }\r\n    });\r\n}\r\n\r\nconst animation = {\r\n    enter(node, done) {\r\n        return animate(node, true, done);\r\n    },\r\n    leave(node, done) {\r\n        return animate(node, false, done);\r\n    },\r\n    appear(node, done) {\r\n        return animate(node, true, done);\r\n    }\r\n};\r\n\r\nexport default animation;\r\n"]}