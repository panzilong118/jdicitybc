{"version":3,"sources":["../../components/upload/utils.js"],"names":["T","fileToObject","genPercentAdd","getFileItem","removeFileItem","file","lastModified","lastModifiedDate","name","size","type","percent","uid","originFileObj","k","i","end","s","start","fileList","matchKey","undefined","filter","item","removed","length"],"mappings":";;;;;QAEgBA,C,GAAAA,C;QAMAC,Y,GAAAA,Y;QAiBAC,a,GAAAA,a;QAmBAC,W,GAAAA,W;QAKAC,c,GAAAA,c;AAjDhB;;AAEO,SAASJ,CAAT,GAAa;AAClB,SAAO,IAAP;AACD;;AAED;AACA;AACO,SAASC,YAAT,CAAsBI,IAAtB,EAA4B;AACjC,SAAO;AACLC,kBAAcD,KAAKC,YADd;AAELC,sBAAkBF,KAAKE,gBAFlB;AAGLC,UAAMH,KAAKG,IAHN;AAILC,UAAMJ,KAAKI,IAJN;AAKLC,UAAML,KAAKK,IALN;AAMLC,aAAS,CANJ;AAOLC,SAAKP,KAAKO,GAPL;AAQLC,mBAAeR;AARV,GAAP;AAUD;;AAED;;;;AAIO,SAASH,aAAT,GAAyB;AAC9B,MAAIY,IAAI,GAAR;AACA,MAAMC,IAAI,IAAV;AACA,MAAMC,MAAM,IAAZ;AACA,SAAO,UAAUC,CAAV,EAAa;AAClB,QAAIC,QAAQD,CAAZ;AACA,QAAIC,SAASF,GAAb,EAAkB;AAChB,aAAOE,KAAP;AACD;;AAEDA,aAASJ,CAAT;AACAA,QAAIA,IAAIC,CAAR;AACA,QAAID,IAAI,KAAR,EAAe;AACbA,UAAI,KAAJ;AACD;AACD,WAAOI,QAAQ,GAAf;AACD,GAZD;AAaD;;AAEM,SAASf,WAAT,CAAqBE,IAArB,EAA2Bc,QAA3B,EAAqC;AAC1C,MAAMC,WAAWf,KAAKO,GAAL,KAAaS,SAAb,GAAyB,KAAzB,GAAiC,MAAlD;AACA,SAAOF,SAASG,MAAT,CAAgB;AAAA,WAAQC,KAAKH,QAAL,MAAmBf,KAAKe,QAAL,CAA3B;AAAA,GAAhB,EAA2D,CAA3D,CAAP;AACD;;AAEM,SAAShB,cAAT,CAAwBC,IAAxB,EAA8Bc,QAA9B,EAAwC;AAC7C,MAAMC,WAAWf,KAAKO,GAAL,KAAaS,SAAb,GAAyB,KAAzB,GAAiC,MAAlD;AACA,MAAMG,UAAUL,SAASG,MAAT,CAAgB;AAAA,WAAQC,KAAKH,QAAL,MAAmBf,KAAKe,QAAL,CAA3B;AAAA,GAAhB,CAAhB;AACA,MAAII,QAAQC,MAAR,KAAmBN,SAASM,MAAhC,EAAwC;AACtC,WAAO,IAAP;AACD;AACD,SAAOD,OAAP;AACD","file":"utils.js","sourcesContent":["// import { RcFile, UploadFile } from './interface';\r\n\r\nexport function T() {\r\n  return true;\r\n}\r\n\r\n// Fix IE file.status problem\r\n// via coping a new Object\r\nexport function fileToObject(file) {\r\n  return {\r\n    lastModified: file.lastModified,\r\n    lastModifiedDate: file.lastModifiedDate,\r\n    name: file.name,\r\n    size: file.size,\r\n    type: file.type,\r\n    percent: 0,\r\n    uid: file.uid,\r\n    originFileObj: file,\r\n  };\r\n}\r\n\r\n/**\r\n * 生成Progress percent: 0.1 -> 0.98\r\n *   - for ie\r\n */\r\nexport function genPercentAdd() {\r\n  let k = 0.1;\r\n  const i = 0.01;\r\n  const end = 0.98;\r\n  return function (s) {\r\n    let start = s;\r\n    if (start >= end) {\r\n      return start;\r\n    }\r\n\r\n    start += k;\r\n    k = k - i;\r\n    if (k < 0.001) {\r\n      k = 0.001;\r\n    }\r\n    return start * 100;\r\n  };\r\n}\r\n\r\nexport function getFileItem(file, fileList) {\r\n  const matchKey = file.uid !== undefined ? 'uid' : 'name';\r\n  return fileList.filter(item => item[matchKey] === file[matchKey])[0];\r\n}\r\n\r\nexport function removeFileItem(file, fileList) {\r\n  const matchKey = file.uid !== undefined ? 'uid' : 'name';\r\n  const removed = fileList.filter(item => item[matchKey] !== file[matchKey]);\r\n  if (removed.length === fileList.length) {\r\n    return null;\r\n  }\r\n  return removed;\r\n}\r\n"]}