{"version":3,"sources":["../../components/notification/index.js"],"names":["React","notificationInstance","defaultDuration","defaultTop","defaultBottom","defaultPlacement","defaultGetContainer","setNotificationConfig","options","duration","placement","bottom","top","getContainer","undefined","getPlacementStyle","style","left","right","getNotificationInstance","prefixCls","callback","cacheKey","newInstance","className","notification","typeToIcon","success","info","error","warning","notice","args","outerPrefixCls","iconNode","icon","type","iconType","autoMarginTag","description","content","message","btn","closable","onClose","key","api","open","close","Object","keys","forEach","removeNotice","config","destroy","warn"],"mappings":";;;;;;kQAAA;;;;;AAGA;;IAAYA,K;;AAEZ;;;;AAEA;;;;;;;;AAMA,IAAMC,uBAAuB,EAA7B;AACA,IAAIC,kBAAkB,GAAtB;AACA,IAAIC,aAAa,EAAjB;AACA,IAAIC,gBAAgB,EAApB;AACA,IAAIC,mBAAmB,UAAvB;AACA,IAAIC,4BAAJ;;AAEA,SAASC,qBAAT,CAA+BC,OAA/B,EAAwC;AAAA,QAC5BC,QAD4B,GACuBD,OADvB,CAC5BC,QAD4B;AAAA,QAClBC,SADkB,GACuBF,OADvB,CAClBE,SADkB;AAAA,QACPC,MADO,GACuBH,OADvB,CACPG,MADO;AAAA,QACCC,GADD,GACuBJ,OADvB,CACCI,GADD;AAAA,QACMC,YADN,GACuBL,OADvB,CACMK,YADN;;AAEpC,QAAIJ,aAAaK,SAAjB,EAA4B;AACxBZ,0BAAkBO,QAAlB;AACH;AACD,QAAIC,cAAcI,SAAlB,EAA6B;AACzBT,2BAAmBK,SAAnB;AACH;AACD,QAAIC,WAAWG,SAAf,EAA0B;AACtBV,wBAAgBO,MAAhB;AACH;AACD,QAAIC,QAAQE,SAAZ,EAAuB;AACnBX,qBAAaS,GAAb;AACH;AACD,QAAIC,iBAAiBC,SAArB,EAAgC;AAC5BR,8BAAsBO,YAAtB;AACH;AACJ;;AAED,SAASE,iBAAT,CAA2BL,SAA3B,EAAsC;AAClC,QAAIM,cAAJ;AACA,YAAQN,SAAR;AACA,aAAK,SAAL;AACIM,oBAAQ;AACJC,sBAAM,CADF;AAEJL,qBAAKT,UAFD;AAGJQ,wBAAQ;AAHJ,aAAR;AAKA;AACJ,aAAK,UAAL;AACIK,oBAAQ;AACJE,uBAAO,CADH;AAEJN,qBAAKT,UAFD;AAGJQ,wBAAQ;AAHJ,aAAR;AAKA;AACJ,aAAK,YAAL;AACIK,oBAAQ;AACJC,sBAAM,CADF;AAEJL,qBAAK,MAFD;AAGJD,wBAAQP;AAHJ,aAAR;AAKA;AACJ;AACIY,oBAAQ;AACJE,uBAAO,CADH;AAEJN,qBAAK,MAFD;AAGJD,wBAAQP;AAHJ,aAAR;AAKA;AA5BJ;AA8BA,WAAOY,KAAP;AACH;;AAED,SAASG,uBAAT,CAAiCC,SAAjC,EAA4CV,SAA5C,EAAuDW,QAAvD,EAAiE;AAC7D,QAAMC,WAAcF,SAAd,SAA2BV,SAAjC;AACA,QAAIT,qBAAqBqB,QAArB,CAAJ,EAAoC;AAChCD,iBAASpB,qBAAqBqB,QAArB,CAAT;AACA;AACH;AACD,6BAAeC,WAAf,CAA2B;AACvBH,4BADuB;AAEvBI,mBAAcJ,SAAd,SAA2BV,SAFJ;AAGvBM,eAAOD,kBAAkBL,SAAlB,CAHgB;AAIvBG,sBAAcP;AAJS,KAA3B,EAKG,UAACmB,YAAD,EAAuB;AACtBxB,6BAAqBqB,QAArB,IAAiCG,YAAjC;AACAJ,iBAASI,YAAT;AACH,KARD;AASH;;AAED,IAAMC,aAAa;AACfC,aAAS,gBADM;AAEfC,UAAM,eAFS;AAGfC,WAAO,gBAHQ;AAIfC,aAAS;AAJM,CAAnB;;AAOA,SAASC,MAAT,CAAgBC,IAAhB,EAAsB;AAClB,QAAMC,iBAAiBD,KAAKZ,SAAL,IAAkB,iBAAzC;AACA,QAAMA,YAAea,cAAf,YAAN;AACA,QAAMxB,WAAWuB,KAAKvB,QAAL,KAAkBK,SAAlB,GAA8BZ,eAA9B,GAAgD8B,KAAKvB,QAAtE;;AAEA,QAAIyB,WAA4B,IAAhC;AACA,QAAIF,KAAKG,IAAT,EAAe;AACXD,mBACI;AAAA;AAAA,cAAM,WAAcd,SAAd,UAAN;AACKY,iBAAKG;AADV,SADJ;AAKH,KAND,MAMO,IAAIH,KAAKI,IAAT,EAAe;AAClB,YAAMC,WAAWX,WAAWM,KAAKI,IAAhB,CAAjB;AACAF,mBACI;AACI,uBAAcd,SAAd,cAAgCA,SAAhC,cAAkDY,KAAKI,IAD3D;AAEI,kBAAMC;AAFV,UADJ;AAMH;;AAED,QAAMC,gBAAiB,CAACN,KAAKO,WAAN,IAAqBL,QAAtB,GAChB,8BAAM,WAAcd,SAAd,qCAAN,GADgB,GAEhB,IAFN;;AAIAD,4BAAwBc,cAAxB,EAAwCD,KAAKtB,SAAL,IAAkBL,gBAA1D,EAA4E,UAACoB,YAAD,EAAkB;AAC1FA,qBAAaM,MAAb,CAAoB;AAChBS,qBACI;AAAA;AAAA,kBAAK,WAAWN,WAAcd,SAAd,kBAAsC,EAAtD;AACKc,wBADL;AAEI;AAAA;AAAA,sBAAK,WAAcd,SAAd,aAAL;AACKkB,iCADL;AAEKN,yBAAKS;AAFV,iBAFJ;AAMI;AAAA;AAAA,sBAAK,WAAcrB,SAAd,iBAAL;AAA6CY,yBAAKO;AAAlD,iBANJ;AAOKP,qBAAKU,GAAL,GAAW;AAAA;AAAA,sBAAM,WAActB,SAAd,SAAN;AAAsCY,yBAAKU;AAA3C,iBAAX,GAAoE;AAPzE,aAFY;AAYhBjC,8BAZgB;AAahBkC,sBAAU,IAbM;AAchBC,qBAASZ,KAAKY,OAdE;AAehBC,iBAAKb,KAAKa,GAfM;AAgBhB7B,mBAAOgB,KAAKhB,KAAL,IAAc,EAhBL;AAiBhBQ,uBAAWQ,KAAKR;AAjBA,SAApB;AAmBH,KApBD;AAqBH;;AAED,IAAMsB,MAAM;AACRC,UAAMhB,MADE;AAERiB,SAFQ,iBAEFH,GAFE,EAEG;AACPI,eAAOC,IAAP,CAAYjD,oBAAZ,EACKkD,OADL,CACa;AAAA,mBAAYlD,qBAAqBqB,QAArB,EAA+B8B,YAA/B,CAA4CP,GAA5C,CAAZ;AAAA,SADb;AAEH,KALO;;AAMRQ,YAAQ9C,qBANA;AAOR+C,WAPQ,qBAOE;AACNL,eAAOC,IAAP,CAAYjD,oBAAZ,EAAkCkD,OAAlC,CAA0C,UAAC7B,QAAD,EAAc;AACpDrB,iCAAqBqB,QAArB,EAA+BgC,OAA/B;AACA,mBAAOrD,qBAAqBqB,QAArB,CAAP;AACH,SAHD;AAIH;AAZO,CAAZ;;AAeA,CAAC,SAAD,EAAY,MAAZ,EAAoB,SAApB,EAA+B,OAA/B,EAAwC6B,OAAxC,CAAgD,UAACf,IAAD,EAAU;AACtDU,QAAIV,IAAJ,IAAY,UAACJ,IAAD,EAAU;AAClB,eAAOc,IAAIC,IAAJ,cACAf,IADA;AAEHI;AAFG,WAAP;AAIH,KALD;AAMH,CAPD;;AASAU,IAAIS,IAAJ,GAAWT,IAAIhB,OAAf;;kBAEegB,G","file":"index.js","sourcesContent":["/**\n * Created by gaoqingli on 2018/4/19.\n */\nimport * as React from 'react';\n\nimport Notification from 'rc-notification';\n\nimport Icon from '../icon';\n\nexport type NotificationPlacement = 'topLeft' | 'topRight' | 'bottomLeft' | 'bottomRight';\n\nexport type IconType = 'success' | 'info' | 'error' | 'warning';\n\nconst notificationInstance = {};\nlet defaultDuration = 4.5;\nlet defaultTop = 24;\nlet defaultBottom = 24;\nlet defaultPlacement = 'topRight';\nlet defaultGetContainer;\n\nfunction setNotificationConfig(options) {\n    const { duration, placement, bottom, top, getContainer } = options;\n    if (duration !== undefined) {\n        defaultDuration = duration;\n    }\n    if (placement !== undefined) {\n        defaultPlacement = placement;\n    }\n    if (bottom !== undefined) {\n        defaultBottom = bottom;\n    }\n    if (top !== undefined) {\n        defaultTop = top;\n    }\n    if (getContainer !== undefined) {\n        defaultGetContainer = getContainer;\n    }\n}\n\nfunction getPlacementStyle(placement) {\n    let style;\n    switch (placement) {\n    case 'topLeft':\n        style = {\n            left: 0,\n            top: defaultTop,\n            bottom: 'auto',\n        };\n        break;\n    case 'topRight':\n        style = {\n            right: 0,\n            top: defaultTop,\n            bottom: 'auto',\n        };\n        break;\n    case 'bottomLeft':\n        style = {\n            left: 0,\n            top: 'auto',\n            bottom: defaultBottom,\n        };\n        break;\n    default:\n        style = {\n            right: 0,\n            top: 'auto',\n            bottom: defaultBottom,\n        };\n        break;\n    }\n    return style;\n}\n\nfunction getNotificationInstance(prefixCls, placement, callback) {\n    const cacheKey = `${prefixCls}-${placement}`;\n    if (notificationInstance[cacheKey]) {\n        callback(notificationInstance[cacheKey]);\n        return;\n    }\n    (Notification).newInstance({\n        prefixCls,\n        className: `${prefixCls}-${placement}`,\n        style: getPlacementStyle(placement),\n        getContainer: defaultGetContainer,\n    }, (notification: any) => {\n        notificationInstance[cacheKey] = notification;\n        callback(notification);\n    });\n}\n\nconst typeToIcon = {\n    success: 'check-circle-o',\n    info: 'info-circle-o',\n    error: 'cross-circle-o',\n    warning: 'exclamation-circle-o',\n};\n\nfunction notice(args) {\n    const outerPrefixCls = args.prefixCls || 'jc-notification';\n    const prefixCls = `${outerPrefixCls}-notice`;\n    const duration = args.duration === undefined ? defaultDuration : args.duration;\n\n    let iconNode: React.ReactNode = null;\n    if (args.icon) {\n        iconNode = (\n            <span className={`${prefixCls}-icon`}>\n                {args.icon}\n            </span>\n        );\n    } else if (args.type) {\n        const iconType = typeToIcon[args.type];\n        iconNode = (\n            <Icon\n                className={`${prefixCls}-icon ${prefixCls}-icon-${args.type}`}\n                type={iconType}\n            />\n        );\n    }\n\n    const autoMarginTag = (!args.description && iconNode)\n        ? <span className={`${prefixCls}-message-single-line-auto-margin`} />\n        : null;\n\n    getNotificationInstance(outerPrefixCls, args.placement || defaultPlacement, (notification) => {\n        notification.notice({\n            content: (\n                <div className={iconNode ? `${prefixCls}-with-icon` : ''}>\n                    {iconNode}\n                    <div className={`${prefixCls}-message`}>\n                        {autoMarginTag}\n                        {args.message}\n                    </div>\n                    <div className={`${prefixCls}-description`}>{args.description}</div>\n                    {args.btn ? <span className={`${prefixCls}-btn`}>{args.btn}</span> : null}\n                </div>\n            ),\n            duration,\n            closable: true,\n            onClose: args.onClose,\n            key: args.key,\n            style: args.style || {},\n            className: args.className,\n        });\n    });\n}\n\nconst api = {\n    open: notice,\n    close(key) {\n        Object.keys(notificationInstance)\n            .forEach(cacheKey => notificationInstance[cacheKey].removeNotice(key));\n    },\n    config: setNotificationConfig,\n    destroy() {\n        Object.keys(notificationInstance).forEach((cacheKey) => {\n            notificationInstance[cacheKey].destroy();\n            delete notificationInstance[cacheKey];\n        });\n    },\n};\n\n['success', 'info', 'warning', 'error'].forEach((type) => {\n    api[type] = (args) => {\n        return api.open({\n            ...args,\n            type,\n        });\n    };\n});\n\napi.warn = api.warning;\n\nexport default api;\n"]}