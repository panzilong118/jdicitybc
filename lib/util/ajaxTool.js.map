{"version":3,"sources":["../../components/util/ajaxTool.js"],"names":["ajax","url","option","callback","defaultOption","method","dataType","key","hasOwnProperty","undefined","xhr","XMLHttpRequest","onreadystatechange","readyState","status","protocol","response","responseText","JSON","parse","err","Error","open","send"],"mappings":";;;;;AAAO,IAAMA,sBAAO,SAAPA,IAAO,CAACC,GAAD,EAAMC,MAAN,EAAcC,QAAd,EAA2B;AAC7C,MAAMC,gBAAgB;AACpBC,YAAQ,KADY;AAEpBC,cAAU;AAFU,GAAtB;;AAKA,MAAI,OAAOJ,MAAP,KAAkB,UAAtB,EAAkC;AAChC;AACAC,eAAWD,MAAX;AACAA,aAASE,aAAT;AACD,GAJD,MAIO;AACL;AACA,SAAK,IAAMG,GAAX,IAAkBH,aAAlB,EAAiC;AAC/B,UAAIA,cAAcI,cAAd,CAA6BD,GAA7B,KAAqCL,OAAOK,GAAP,MAAgBE,SAAzD,EAAoE;AAClEP,eAAOK,GAAP,IAAcH,cAAcG,GAAd,CAAd;AACD;AACF;AACF;;AAED,MAAMG,MAAM,IAAIC,cAAJ,EAAZ;;AAEAD,MAAIE,kBAAJ,GAAyB,YAAW;AAClC,QAAIF,IAAIG,UAAJ,KAAmB,CAAvB,EAA0B;AACxB,UACGH,IAAII,MAAJ,IAAc,GAAd,IAAqBJ,IAAII,MAAJ,GAAa,GAAnC,IACAJ,IAAII,MAAJ,IAAc,GADd,IAECJ,IAAII,MAAJ,IAAc,CAAd,IAAmBC,YAAY,OAHlC,EAIE;AACA,YAAIC,WAAWN,IAAIO,YAAnB;;AAEA,YAAIf,OAAOI,QAAP,KAAoB,MAAxB,EAAgC;AAC9B,cAAI;AACFU,uBAAWE,KAAKC,KAAL,CAAWH,QAAX,CAAX;AACD,WAFD,CAEE,OAAOI,GAAP,EAAY;AACZ,mBAAOjB,SAASiB,GAAT,CAAP;AACD;;AAEDjB,mBAAS,IAAT,EAAea,QAAf;AACD,SARD,MAQO;AACLb,mBAAS,IAAIkB,KAAJ,CAAapB,GAAb,qBAAT;AACD;AACF;AACF;AACF,GAtBD;;AAwBAS,MAAIY,IAAJ,CAASpB,OAAOG,MAAP,IAAiB,KAA1B,EAAiCJ,GAAjC;AACAS,MAAIa,IAAJ;AACD,CA/CM","file":"ajaxTool.js","sourcesContent":["export const ajax = (url, option, callback) => {\n  const defaultOption = {\n    method: 'GET',\n    dataType: 'JSON'\n  };\n\n  if (typeof option === 'function') {\n    /* eslint-disable */\n    callback = option;\n    option = defaultOption;\n  } else {\n    /* eslint-disable */\n    for (const key in defaultOption) {\n      if (defaultOption.hasOwnProperty(key) && option[key] === undefined) {\n        option[key] = defaultOption[key];\n      }\n    }\n  }\n\n  const xhr = new XMLHttpRequest();\n\n  xhr.onreadystatechange = function() {\n    if (xhr.readyState === 4) {\n      if (\n        (xhr.status >= 200 && xhr.status < 300) ||\n        xhr.status == 304 ||\n        (xhr.status == 0 && protocol == 'file:')\n      ) {\n        let response = xhr.responseText;\n\n        if (option.dataType === 'JSON') {\n          try {\n            response = JSON.parse(response);\n          } catch (err) {\n            return callback(err);\n          }\n\n          callback(null, response);\n        } else {\n          callback(new Error(`${url} request failed`));\n        }\n      }\n    }\n  };\n\n  xhr.open(option.method || 'GET', url);\n  xhr.send();\n};\n"]}