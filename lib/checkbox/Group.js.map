{"version":3,"sources":["../../components/checkbox/Group.js"],"names":["React","CheckboxGroup","props","toggleOption","option","optionIndex","state","value","indexOf","push","splice","setState","onChange","defaultValue","checkboxGroup","ghost","disabled","nextProps","nextState","options","map","label","prefixCls","className","style","children","length","getOptions","classString","Component","defaultProps","propTypes","string","array","func","bool","childContextTypes","any"],"mappings":";;;;;;;;;AAIA;;IAAYA,K;;AAEZ;;;;AAEA;;;;AAEA;;;;AAEA;;;;;;;;;;;;;;+eAZA;;;;;;IAcqBC,a;;;AAoBjB,2BAAYC,KAAZ,EAAmB;AAAA;;AAAA,kIACTA,KADS;;AAAA,cAiDnBC,YAjDmB,GAiDJ,UAACC,MAAD,EAAY;AACvB,gBAAMC,cAAc,MAAKC,KAAL,CAAWC,KAAX,CAAiBC,OAAjB,CAAyBJ,OAAOG,KAAhC,CAApB;AACA,gBAAMA,qCAAY,MAAKD,KAAL,CAAWC,KAAvB,EAAN;AACA,gBAAIF,gBAAgB,CAAC,CAArB,EAAwB;AACpBE,sBAAME,IAAN,CAAWL,OAAOG,KAAlB;AACH,aAFD,MAEO;AACHA,sBAAMG,MAAN,CAAaL,WAAb,EAA0B,CAA1B;AACH;AACD,gBAAI,EAAE,WAAW,MAAKH,KAAlB,CAAJ,EAA8B;AAC1B,sBAAKS,QAAL,CAAc,EAAEJ,YAAF,EAAd;AACH;AAVsB,gBAWfK,QAXe,GAWF,MAAKV,KAXH,CAWfU,QAXe;;AAYvB,gBAAIA,QAAJ,EAAc;AACVA,yBAASL,KAAT;AACH;AACJ,SAhEkB;;AAEf,cAAKD,KAAL,GAAa;AACTC,mBAAOL,MAAMK,KAAN,IAAeL,MAAMW,YAArB,IAAqC;AADnC,SAAb;AAFe;AAKlB;AACD;;;;;;;0CAGkB;AACd,mBAAO;AACHC,+BAAe;AACXC,2BAAO,KAAKb,KAAL,CAAWa,KADP;AAEXZ,kCAAc,KAAKA,YAFR,EAEsB;AACjCI,2BAAO,KAAKD,KAAL,CAAWC,KAHP,EAGc;AACzBS,8BAAU,KAAKd,KAAL,CAAWc,QAJV,CAImB;AAJnB;AADZ,aAAP;AAQH;AACD;;;;;;kDAG0BC,S,EAAW;AACjC,gBAAI,WAAWA,SAAf,EAA0B;AACtB,qBAAKN,QAAL,CAAc;AACVJ,2BAAOU,UAAUV,KAAV,IAAmB;AADhB,iBAAd;AAGH;AACJ;;;8CACqBU,S,EAAWC,S,EAAW;AACxC,mBAAO,CAAC,4BAAa,KAAKhB,KAAlB,EAAyBe,SAAzB,CAAD,IAAwC,CAAC,4BAAa,KAAKX,KAAlB,EAAyBY,SAAzB,CAAhD;AACH;AACD;;;;;;qCAGa;AAAA,gBACDC,OADC,GACW,KAAKjB,KADhB,CACDiB,OADC;AAET;;AACA,mBAAOA,QAAQC,GAAR,CAAY,UAAChB,MAAD,EAAY;AAC3B,oBAAI,OAAOA,MAAP,KAAkB,QAAtB,EAAgC;AAC5B,2BAAO,EAAEiB,OAAOjB,MAAT,EAAiBG,OAAOH,MAAxB,EAAP;AACH;AACD,uBAAOA,MAAP;AACH,aALM,CAAP;AAMH;AACD;;;;;;;iCAoBS;AAAA;;AAAA,yBACmD,KAAKF,KADxD;AAAA,gBACGoB,SADH,UACGA,SADH;AAAA,gBACcC,SADd,UACcA,SADd;AAAA,gBACyBC,KADzB,UACyBA,KADzB;AAAA,gBACgCL,OADhC,UACgCA,OADhC;AAAA,gBACyCJ,KADzC,UACyCA,KADzC;AAAA,gBAECU,QAFD,GAEc,KAAKvB,KAFnB,CAECuB,QAFD;;AAGL,gBAAIN,WAAWA,QAAQO,MAAR,GAAiB,CAAhC,EAAmC;AAC/B;AACAD,2BAAW,KAAKE,UAAL,GAAkBP,GAAlB,CAAsB;AAAA,2BAC7B;AAAA;AAAA;AACI,mCAAOL,KADX;AAEI,iCAAKX,OAAOG,KAFhB;AAGI,sCAAU,cAAcH,MAAd,GAAuBA,OAAOY,QAA9B,GAAyC,OAAKd,KAAL,CAAWc,QAHlE;AAII,mCAAOZ,OAAOG,KAJlB;AAKI,qCAAS,OAAKD,KAAL,CAAWC,KAAX,CAAiBC,OAAjB,CAAyBJ,OAAOG,KAAhC,MAA2C,CAAC,CALzD;AAMI,sCAAU;AAAA,uCAAM,OAAKJ,YAAL,CAAkBC,MAAlB,CAAN;AAAA,6BANd;AAOI,uCAAckB,SAAd;AAPJ;AASKlB,+BAAOiB;AATZ,qBAD6B;AAAA,iBAAtB,CAAX;AAaH;;AAED,gBAAMO,cAAc,0BAAWN,SAAX,EAAsBC,SAAtB,CAApB;AACA,mBACI;AAAA;AAAA,kBAAK,WAAWK,WAAhB,EAA6B,OAAOJ,KAApC;AACKC;AADL,aADJ;AAKH;;;;EA/GsCzB,MAAM6B,S;;AAA5B5B,a,CACV6B,Y,GAAe;AAClBX,aAAS,EADS;AAElBG,eAAW,mBAFO;AAGlBP,WAAO;AAHW,C;AADLd,a,CAOV8B,S,GAAY;AACfT,eAAW,oBAAUU,MADN;AAEfnB,kBAAc,oBAAUoB,KAFT,EAEgB;AAC/B1B,WAAO,oBAAU0B,KAHF,EAGS;AACxBd,aAAS,oBAAUc,KAJJ,EAIW;AAC1BrB,cAAU,oBAAUsB,IALL;AAMfnB,WAAO,oBAAUoB;AANF,C;AAPFlC,a,CAgBVmC,iB,GAAoB;AACvBtB,mBAAe,oBAAUuB;AADF,C;kBAhBVpC,a","file":"Group.js","sourcesContent":["/**\r\n * @file checkbox封装成一组\r\n * @author chenyanhua\r\n */\r\nimport * as React from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport shallowEqual from 'shallowequal';\r\n\r\nimport Checkbox from './Checkbox';\r\n\r\nexport default class CheckboxGroup extends React.Component {\r\n    static defaultProps = {\r\n        options: [],\r\n        prefixCls: 'jc-checkbox-group',\r\n        ghost: false\r\n    };\r\n\r\n    static propTypes = {\r\n        prefixCls: PropTypes.string,\r\n        defaultValue: PropTypes.array, // 默认选中的选项\r\n        value: PropTypes.array, // 指定选中的选项\r\n        options: PropTypes.array, // 指定可选项，数据源\r\n        onChange: PropTypes.func,\r\n        ghost: PropTypes.bool\r\n    };\r\n\r\n    static childContextTypes = {\r\n        checkboxGroup: PropTypes.any\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            value: props.value || props.defaultValue || []\r\n        };\r\n    }\r\n    /**\r\n     * 向子组件checkbox传递当前checkbox组相关数据\r\n     */\r\n    getChildContext() {\r\n        return {\r\n            checkboxGroup: {\r\n                ghost: this.props.ghost,\r\n                toggleOption: this.toggleOption, // 当前操作的checkbox项目\r\n                value: this.state.value, // checkbox组已选中数据\r\n                disabled: this.props.disabled // 当前组的disabled，作用于当前组的所有checkbox\r\n            }\r\n        };\r\n    }\r\n    /**\r\n     * 设置选中项\r\n     */\r\n    componentWillReceiveProps(nextProps) {\r\n        if ('value' in nextProps) {\r\n            this.setState({\r\n                value: nextProps.value || []\r\n            });\r\n        }\r\n    }\r\n    shouldComponentUpdate(nextProps, nextState) {\r\n        return !shallowEqual(this.props, nextProps) || !shallowEqual(this.state, nextState);\r\n    }\r\n    /**\r\n     * 重组数据源\r\n     */\r\n    getOptions() {\r\n        const { options } = this.props;\r\n        // https://github.com/Microsoft/TypeScript/issues/7960\r\n        return options.map((option) => {\r\n            if (typeof option === 'string') {\r\n                return { label: option, value: option };\r\n            }\r\n            return option;\r\n        });\r\n    }\r\n    /**\r\n     * 切换当前操作项目的checked/unchecked状态\r\n     * @param option 当前操作的checkbox选项\r\n     */\r\n    toggleOption = (option) => {\r\n        const optionIndex = this.state.value.indexOf(option.value);\r\n        const value = [...this.state.value];\r\n        if (optionIndex === -1) {\r\n            value.push(option.value);\r\n        } else {\r\n            value.splice(optionIndex, 1);\r\n        }\r\n        if (!('value' in this.props)) {\r\n            this.setState({ value });\r\n        }\r\n        const { onChange } = this.props;\r\n        if (onChange) {\r\n            onChange(value);\r\n        }\r\n    }\r\n    render() {\r\n        const { prefixCls, className, style, options, ghost } = this.props;\r\n        let { children } = this.props;\r\n        if (options && options.length > 0) {\r\n            // 输出每一项checkbox\r\n            children = this.getOptions().map(option => (\r\n                <Checkbox\r\n                    ghost={ghost}\r\n                    key={option.value}\r\n                    disabled={'disabled' in option ? option.disabled : this.props.disabled}\r\n                    value={option.value}\r\n                    checked={this.state.value.indexOf(option.value) !== -1}\r\n                    onChange={() => this.toggleOption(option)}\r\n                    className={`${prefixCls}-item`}\r\n                >\r\n                    {option.label}\r\n                </Checkbox>\r\n            ));\r\n        }\r\n\r\n        const classString = classNames(prefixCls, className);\r\n        return (\r\n            <div className={classString} style={style}>\r\n                {children}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]}