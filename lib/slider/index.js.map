{"version":3,"sources":["../../components/slider/index.js"],"names":["React","SliderProps","prefixCls","string","tooltipPrefixCls","range","bool","min","number","max","step","oneOfType","oneOf","marks","object","dots","value","arrayOf","defaultValue","included","disabled","vertical","onChange","func","onAfterChange","tipFormatter","className","id","Slider","props","toggleTooltipVisible","index","visible","setState","visibles","handleWithTooltip","dragging","restProps","state","offset","saveSlider","node","rcSlider","undefined","focus","Component","defaultProps","toString","propTypes"],"mappings":"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","file":"index.js","sourcesContent":["import * as React from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nimport RcSlider from 'rc-slider/lib/Slider';\r\n\r\nimport RcRange from 'rc-slider/lib/Range';\r\n\r\nimport RcHandle from 'rc-slider/lib/Handle';\r\n\r\nimport Tooltip from '../tooltip';\r\n\r\nexport const SliderProps = {\r\n    prefixCls: PropTypes.string,\r\n    tooltipPrefixCls: PropTypes.string,\r\n    range: PropTypes.bool,\r\n    min: PropTypes.number,\r\n    max: PropTypes.number,\r\n    step: PropTypes.oneOfType([PropTypes.number,PropTypes.oneOf([null])]),\r\n    marks: PropTypes.object,\r\n    dots: PropTypes.bool,\r\n    value: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.number)]),\r\n    defaultValue: PropTypes.oneOfType([PropTypes.number, PropTypes.arrayOf(PropTypes.number)]),\r\n    included: PropTypes.bool,\r\n    disabled: PropTypes.bool,\r\n    vertical: PropTypes.bool,\r\n    onChange: PropTypes.func,\r\n    onAfterChange: PropTypes.func,\r\n    tipFormatter: PropTypes.oneOfType([PropTypes.func, PropTypes.oneOf([null])]),\r\n    className: PropTypes.string,\r\n    id: PropTypes.string\r\n};\r\n\r\nexport default class Slider extends React.Component {\r\n    static defaultProps = {\r\n        prefixCls: 'jc-slider',\r\n        tooltipPrefixCls: 'jc-tooltip',\r\n        tipFormatter: (value) => {\r\n            return value.toString();\r\n        }\r\n    };\r\n    static propTypes = {...SliderProps}\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            visibles: {}\r\n        };\r\n        this.rcSlider = undefined;\r\n    }\r\n\r\n    toggleTooltipVisible = (index, visible) => {\r\n        this.setState(({ visibles }) => ({\r\n            visibles: {\r\n                ...visibles,\r\n                [index]: visible\r\n            }\r\n        }));\r\n    }\r\n    handleWithTooltip = ({ value, dragging, index, ...restProps }) => {\r\n        const { tooltipPrefixCls, tipFormatter } = this.props;\r\n        const { visibles } = this.state;\r\n        const visible = tipFormatter ? (visibles[index] || dragging) : false;\r\n        return (\r\n            <Tooltip\r\n                prefixCls={tooltipPrefixCls}\r\n                title={tipFormatter ? tipFormatter(value) : ''}\r\n                visible={visible}\r\n                placement='top'\r\n                transitionName='zoom-down'\r\n                key={index}\r\n                align={{\r\n                    offset: [0, 0] // 解决tooltip不随slider滚动问题\r\n                }}\r\n            >\r\n                <RcHandle\r\n                    {...restProps}\r\n                    value={value}\r\n                    onMouseEnter={() => this.toggleTooltipVisible(index, true)}\r\n                    onMouseLeave={() => this.toggleTooltipVisible(index, false)}\r\n                />\r\n            </Tooltip>\r\n        );\r\n    }\r\n\r\n    focus() {\r\n        this.rcSlider.focus();\r\n    }\r\n\r\n    blur() {\r\n        this.rcSlider.focus();\r\n    }\r\n\r\n    saveSlider = (node) => {\r\n        this.rcSlider = node;\r\n    }\r\n\r\n    render() {\r\n        const { range, ...restProps } = this.props;\r\n        if (range) {\r\n            return <RcRange {...restProps} ref={this.saveSlider} handle={this.handleWithTooltip} />;\r\n        }\r\n        return <RcSlider {...restProps} ref={this.saveSlider} handle={this.handleWithTooltip} />;\r\n    }\r\n}\r\n"]}