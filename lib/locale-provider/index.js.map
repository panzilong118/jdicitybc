{"version":3,"sources":["../../components/locale-provider/index.js"],"names":["React","moment","Locale","locale","string","isRequired","Pagination","object","DatePicker","TimePicker","Calendar","Table","Modal","shape","Popconfirm","Transfer","Select","Upload","LocaleProviderProps","children","any","setMomentLocale","LocaleProvider","props","jcLocale","exist","nextProps","nextLocale","Children","only","Component","propTypes","defaultProps","childContextTypes"],"mappings":";;;;;;;;;;;AAGG;;IAAYA,K;;AACf;;;;AACA;;IAAYC,M;;AACZ;;;;AACA;;;;;;;;;;+eAPA;;;;;AASO,IAAMC,0BAAS;AACpBC,UAAQ,oBAAUC,MAAV,CAAiBC,UADL;AAEpBC,cAAY,oBAAUC,MAFF;AAGpBC,cAAY,oBAAUD,MAHF;AAIpBE,cAAY,oBAAUF,MAJF;AAKpBG,YAAU,oBAAUH,MALA;AAMpBI,SAAO,oBAAUJ,MANG;AAOpBK,SAAO,oBAAUC,KAAV,qBAPa;AAQpBC,cAAY,oBAAUP,MARF;AASpBQ,YAAU,oBAAUR,MATA;AAUpBS,UAAQ,oBAAUT,MAVE;AAWpBU,UAAQ,oBAAUV;AAXE,CAAf;;AAcA,IAAMW,oDAAsB;AACjCf,UAAQ,oBAAUU,KAAV,CAAgBX,MAAhB,CADyB;AAEjCiB,YAAU,oBAAUC;AAFa,CAA5B;;AAKP,SAASC,eAAT,CAAyBlB,MAAzB,EAAiC;AAC/B,MAAIA,UAAUA,OAAOA,MAArB,EAA6B;AAC3B,kCAAeF,MAAf,EAAuBE,MAAvB,CAA8BA,OAAOA,MAArC;AACD,GAFD,MAEO;AACL,kCAAeF,MAAf,EAAuBE,MAAvB,CAA8B,IAA9B;AACD;AACF;;IAEoBmB,c;;;AAcnB,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA,gIACXA,KADW;;AAEjBF,oBAAgBE,MAAMpB,MAAtB;AACA,qCAAoBoB,MAAMpB,MAAN,IAAgBoB,MAAMpB,MAAN,CAAaS,KAAjD;AAHiB;AAIlB;;;;sCAEiB;AAChB,aAAO;AACLY,+BACK,KAAKD,KAAL,CAAWpB,MADhB;AAEEsB,iBAAO;AAFT;AADK,OAAP;AAMD;;;8CAEyBC,S,EAAW;AAAA,UAC3BvB,MAD2B,GAChB,KAAKoB,KADW,CAC3BpB,MAD2B;;AAEnC,UAAMwB,aAAaD,UAAUvB,MAA7B;AACA,UAAIA,WAAWwB,UAAf,EAA2B;AACzBN,wBAAgBK,UAAUvB,MAA1B;AACD;AACF;;;yCAEoB;AAAA,UACXA,MADW,GACA,KAAKoB,KADL,CACXpB,MADW;;AAEnB,uCAAoBA,UAAUA,OAAOS,KAArC;AACD;;;2CAEsB;AACrB;AACD;;;6BAEQ;AACP,aAAOZ,MAAM4B,QAAN,CAAeC,IAAf,CAAoB,KAAKN,KAAL,CAAWJ,QAA/B,CAAP;AACD;;;;EAhDyCnB,MAAM8B,S;;AAA7BR,c,CACZS,S,gBACFb,mB;AACHf,UAAQ,oBAAUI;;AAHDe,c,CAMZU,Y,GAAe;AACpB7B,UAAQ;AADY,C;AANHmB,c,CAUZW,iB,GAAoB;AACzBT,YAAU,oBAAUjB;AADK,C;kBAVRe,c","file":"index.js","sourcesContent":["/**\r\n * @author chenyanhua\r\n * @version 3.4.1\r\n */import * as React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport * as moment from 'moment';\r\nimport interopDefault from '../_util/interopDefault';\r\nimport { ModalLocale, changeConfirmLocale } from '../modal/locale';\r\n\r\nexport const Locale = {\r\n  locale: PropTypes.string.isRequired,\r\n  Pagination: PropTypes.object,\r\n  DatePicker: PropTypes.object,\r\n  TimePicker: PropTypes.object,\r\n  Calendar: PropTypes.object,\r\n  Table: PropTypes.object,\r\n  Modal: PropTypes.shape(ModalLocale),\r\n  Popconfirm: PropTypes.object,\r\n  Transfer: PropTypes.object,\r\n  Select: PropTypes.object,\r\n  Upload: PropTypes.object\r\n}\r\n\r\nexport const LocaleProviderProps = {\r\n  locale: PropTypes.shape(Locale),\r\n  children: PropTypes.any\r\n}\r\n\r\nfunction setMomentLocale(locale) {\r\n  if (locale && locale.locale) {\r\n    interopDefault(moment).locale(locale.locale);\r\n  } else {\r\n    interopDefault(moment).locale('en');\r\n  }\r\n}\r\n\r\nexport default class LocaleProvider extends React.Component {\r\n  static propTypes = {\r\n    ...LocaleProviderProps,\r\n    locale: PropTypes.object\r\n  };\r\n\r\n  static defaultProps = {\r\n    locale: {}\r\n  };\r\n\r\n  static childContextTypes = {\r\n    jcLocale: PropTypes.object,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n    setMomentLocale(props.locale);\r\n    changeConfirmLocale(props.locale && props.locale.Modal);\r\n  }\r\n\r\n  getChildContext() {\r\n    return {\r\n      jcLocale: {\r\n        ...this.props.locale,\r\n        exist: true,\r\n      },\r\n    };\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n    const { locale } = this.props;\r\n    const nextLocale = nextProps.locale;\r\n    if (locale !== nextLocale) {\r\n      setMomentLocale(nextProps.locale);\r\n    }\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    const { locale } = this.props;\r\n    changeConfirmLocale(locale && locale.Modal);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    changeConfirmLocale();\r\n  }\r\n\r\n  render() {\r\n    return React.Children.only(this.props.children);\r\n  }\r\n}\r\n"]}