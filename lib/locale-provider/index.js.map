{"version":3,"sources":["../../components/locale-provider/index.js"],"names":["React","moment","Locale","locale","string","isRequired","Pagination","object","DatePicker","TimePicker","Calendar","Table","Modal","shape","Popconfirm","Transfer","Select","Upload","LocaleProviderProps","children","any","setMomentLocale","LocaleProvider","props","jcLocale","exist","nextProps","nextLocale","Children","only","Component","propTypes","defaultProps","childContextTypes"],"mappings":";;;;;;;;;;;AAGG;;IAAYA,K;;AACf;;;;AACA;;IAAYC,M;;AACZ;;;;AACA;;;;;;;;;;+eAPA;;;;;AASO,IAAMC,0BAAS;AACpBC,UAAQ,oBAAUC,MAAV,CAAiBC,UADL;AAEpBC,cAAY,oBAAUC,MAFF;AAGpBC,cAAY,oBAAUD,MAHF;AAIpBE,cAAY,oBAAUF,MAJF;AAKpBG,YAAU,oBAAUH,MALA;AAMpBI,SAAO,oBAAUJ,MANG;AAOpBK,SAAO,oBAAUC,KAAV,qBAPa;AAQpBC,cAAY,oBAAUP,MARF;AASpBQ,YAAU,oBAAUR,MATA;AAUpBS,UAAQ,oBAAUT,MAVE;AAWpBU,UAAQ,oBAAUV;AAXE,CAAf;;AAcA,IAAMW,oDAAsB;AACjCf,UAAQ,oBAAUU,KAAV,CAAgBX,MAAhB,CADyB;AAEjCiB,YAAU,oBAAUC;AAFa,CAA5B;;AAKP,SAASC,eAAT,CAAyBlB,MAAzB,EAAiC;AAC/B,MAAIA,UAAUA,OAAOA,MAArB,EAA6B;AAC3B,kCAAeF,MAAf,EAAuBE,MAAvB,CAA8BA,OAAOA,MAArC;AACD,GAFD,MAEO;AACL,kCAAeF,MAAf,EAAuBE,MAAvB,CAA8B,IAA9B;AACD;AACF;;IAEoBmB,c;;;AAcnB,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA,gIACXA,KADW;;AAEjBF,oBAAgBE,MAAMpB,MAAtB;AACA,qCAAoBoB,MAAMpB,MAAN,IAAgBoB,MAAMpB,MAAN,CAAaS,KAAjD;AAHiB;AAIlB;;;;sCAEiB;AAChB,aAAO;AACLY,+BACK,KAAKD,KAAL,CAAWpB,MADhB;AAEEsB,iBAAO;AAFT;AADK,OAAP;AAMD;;;8CAEyBC,S,EAAW;AAAA,UAC3BvB,MAD2B,GAChB,KAAKoB,KADW,CAC3BpB,MAD2B;;AAEnC,UAAMwB,aAAaD,UAAUvB,MAA7B;AACA,UAAIA,WAAWwB,UAAf,EAA2B;AACzBN,wBAAgBK,UAAUvB,MAA1B;AACD;AACF;;;yCAEoB;AAAA,UACXA,MADW,GACA,KAAKoB,KADL,CACXpB,MADW;;AAEnB,uCAAoBA,UAAUA,OAAOS,KAArC;AACD;;;2CAEsB;AACrB;AACD;;;6BAEQ;AACP,aAAOZ,MAAM4B,QAAN,CAAeC,IAAf,CAAoB,KAAKN,KAAL,CAAWJ,QAA/B,CAAP;AACD;;;;EAhDyCnB,MAAM8B,S;;AAA7BR,c,CACZS,S,gBACFb,mB;AACHf,UAAQ,oBAAUI;;AAHDe,c,CAMZU,Y,GAAe;AACpB7B,UAAQ;AADY,C;AANHmB,c,CAUZW,iB,GAAoB;AACzBT,YAAU,oBAAUjB;AADK,C;kBAVRe,c","file":"index.js","sourcesContent":["/**\n * @author chenyanhua\n * @version 3.4.1\n */import * as React from 'react';\nimport PropTypes from 'prop-types';\nimport * as moment from 'moment';\nimport interopDefault from '../_util/interopDefault';\nimport { ModalLocale, changeConfirmLocale } from '../modal/locale';\n\nexport const Locale = {\n  locale: PropTypes.string.isRequired,\n  Pagination: PropTypes.object,\n  DatePicker: PropTypes.object,\n  TimePicker: PropTypes.object,\n  Calendar: PropTypes.object,\n  Table: PropTypes.object,\n  Modal: PropTypes.shape(ModalLocale),\n  Popconfirm: PropTypes.object,\n  Transfer: PropTypes.object,\n  Select: PropTypes.object,\n  Upload: PropTypes.object\n}\n\nexport const LocaleProviderProps = {\n  locale: PropTypes.shape(Locale),\n  children: PropTypes.any\n}\n\nfunction setMomentLocale(locale) {\n  if (locale && locale.locale) {\n    interopDefault(moment).locale(locale.locale);\n  } else {\n    interopDefault(moment).locale('en');\n  }\n}\n\nexport default class LocaleProvider extends React.Component {\n  static propTypes = {\n    ...LocaleProviderProps,\n    locale: PropTypes.object\n  };\n\n  static defaultProps = {\n    locale: {}\n  };\n\n  static childContextTypes = {\n    jcLocale: PropTypes.object,\n  };\n\n  constructor(props) {\n    super(props);\n    setMomentLocale(props.locale);\n    changeConfirmLocale(props.locale && props.locale.Modal);\n  }\n\n  getChildContext() {\n    return {\n      jcLocale: {\n        ...this.props.locale,\n        exist: true,\n      },\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const { locale } = this.props;\n    const nextLocale = nextProps.locale;\n    if (locale !== nextLocale) {\n      setMomentLocale(nextProps.locale);\n    }\n  }\n\n  componentDidUpdate() {\n    const { locale } = this.props;\n    changeConfirmLocale(locale && locale.Modal);\n  }\n\n  componentWillUnmount() {\n    changeConfirmLocale();\n  }\n\n  render() {\n    return React.Children.only(this.props.children);\n  }\n}\n"]}