{"version":3,"sources":["../../components/list/index.js"],"names":["React","List","props","renderItem","item","index","dataSource","rowKey","key","keys","renderEmpty","contextLocale","locale","prefixCls","emptyText","grid","loadMore","pagination","footer","bordered","split","className","children","itemLayout","size","header","loading","rest","loadingProp","spinning","isLoading","sizeCls","classString","isSomethingAfterLastItem","paginationContent","childrenContent","minHeight","length","items","map","childrenList","Children","child","cloneElement","gutter","Table","content","Component","Item","childContextTypes","any","defaultProps"],"mappings":";;;;;;;;;;;AAIA;;IAAYA,K;;AACZ;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAGA;;;;AACA;;AAEA;;;;;;;;;;;;;;;;+eAfA;;;;;;IAiBqBC,I;;;AAEnB,gBAAYC,KAAZ,EAAmB;AAAA;;AAAA,4GACTA,KADS;;AAAA,UA0BnBC,UA1BmB,GA0BN,UAACC,IAAD,EAAOC,KAAP,EAAiB;AAAA,wBACe,MAAKH,KADpB;AAAA,UACpBI,UADoB,eACpBA,UADoB;AAAA,UACRH,UADQ,eACRA,UADQ;AAAA,UACII,MADJ,eACIA,MADJ;;AAE5B,UAAIC,YAAJ;;AAEA,UAAI,OAAOD,MAAP,KAAkB,UAAtB,EAAkC;AAChCC,cAAMD,OAAOD,WAAWD,KAAX,CAAP,CAAN;AACD,OAFD,MAEO,IAAI,OAAOE,MAAP,KAAkB,QAAtB,EAAgC;AACrCC,cAAMF,WAAWC,MAAX,CAAN;AACD,OAFM,MAEA;AACLC,cAAMF,WAAWE,GAAjB;AACD;;AAED,UAAI,CAACA,GAAL,EAAU;AACRA,6BAAmBH,KAAnB;AACD;;AAED,YAAKI,IAAL,CAAUJ,KAAV,IAAmBG,GAAnB;;AAEA,aAAOL,WAAWC,IAAX,EAAiBC,KAAjB,CAAP;AACD,KA7CkB;;AAAA,UAoDnBK,WApDmB,GAoDL,UAACC,aAAD,EAAmB;AAC/B,UAAMC,sBAAcD,aAAd,EAAgC,MAAKT,KAAL,CAAWU,MAA3C,CAAN;AACA,aAAO;AAAA;AAAA,UAAK,WAAc,MAAKV,KAAL,CAAWW,SAAzB,gBAAL;AAAuDD,eAAOE;AAA9D,OAAP;AACD,KAvDkB;;AAEf,UAAKL,IAAL,GAAY,EAAZ;AAFe;AAGlB;;;;sCAiBiB;AAChB,aAAO;AACLM,cAAM,KAAKb,KAAL,CAAWa;AADZ,OAAP;AAGD;;;+CAuB0B;AAAA,mBACgB,KAAKb,KADrB;AAAA,UACjBc,QADiB,UACjBA,QADiB;AAAA,UACPC,UADO,UACPA,UADO;AAAA,UACKC,MADL,UACKA,MADL;;AAEzB,aAAO,CAAC,EAAEF,YAAYC,UAAZ,IAA0BC,MAA5B,CAAR;AACD;;;6BAOQ;AAAA;AAAA;;AAAA,oBAmBH,KAAKhB,KAnBF;AAAA,UAELiB,QAFK,WAELA,QAFK;AAAA,UAGLC,KAHK,WAGLA,KAHK;AAAA,UAILC,SAJK,WAILA,SAJK;AAAA,UAKLC,QALK,WAKLA,QALK;AAAA,UAMLC,UANK,WAMLA,UANK;AAAA,UAOLP,QAPK,WAOLA,QAPK;AAAA,UAQLC,UARK,WAQLA,UARK;AAAA,UASLJ,SATK,WASLA,SATK;AAAA,UAULE,IAVK,WAULA,IAVK;AAAA,UAWLT,UAXK,WAWLA,UAXK;AAAA,UAYLkB,IAZK,WAYLA,IAZK;AAAA,UAaLjB,MAbK,WAaLA,MAbK;AAAA,UAcLJ,UAdK,WAcLA,UAdK;AAAA,UAeLsB,MAfK,WAeLA,MAfK;AAAA,UAgBLP,MAhBK,WAgBLA,MAhBK;AAAA,UAiBLQ,OAjBK,WAiBLA,OAjBK;AAAA,UAkBFC,IAlBE;;AAqBP,UAAIC,cAAcF,OAAlB;AACA,UAAI,OAAOE,WAAP,KAAuB,SAA3B,EAAsC;AACpCA,sBAAc;AACZC,oBAAUD;AADE,SAAd;AAGD;AACD,UAAME,YAAaF,eAAeA,YAAYC,QAA9C;;AAEA;AACA;AACA,UAAIE,UAAU,EAAd;AACA,cAAQP,IAAR;AACE,aAAK,OAAL;AACEO,oBAAU,IAAV;AACA;AACF,aAAK,OAAL;AACEA,oBAAU,IAAV;AACF;AACE;AAPJ;;AAUA,UAAMC,cAAc,0BAAWnB,SAAX,EAAsBQ,SAAtB,kDACdR,SADc,gBACSU,eAAe,UADxB,gCAEdV,SAFc,SAEDkB,OAFC,EAEWA,OAFX,gCAGdlB,SAHc,aAGMO,KAHN,gCAIdP,SAJc,gBAISM,QAJT,gCAKdN,SALc,eAKQiB,SALR,gCAMdjB,SANc,YAMKE,IANL,gCAOdF,SAPc,iCAO0B,KAAKoB,wBAAL,EAP1B,gBAApB;;AAUA,UAAMC,oBACJ;AAAA;AAAA,UAAK,WAAcrB,SAAd,gBAAL;AACE,kDAAgBI,UAAhB;AADF,OADF;;AAMA,UAAIkB,wBAAJ;AACAA,wBAAkBL,aAAa,6BAAK,OAAO,EAAEM,WAAW,EAAb,EAAZ,GAA/B;AACA,UAAI9B,WAAW+B,MAAX,GAAoB,CAAxB,EAA2B;AACzB,YAAMC,QAAQhC,WAAWiC,GAAX,CAAe,UAACnC,IAAD,EAAOC,KAAP;AAAA,iBAAiB,OAAKF,UAAL,CAAgBC,IAAhB,EAAsBC,KAAtB,CAAjB;AAAA,SAAf,CAAd;AACA,YAAMmC,eAAexC,MAAMyC,QAAN,CAAeF,GAAf,CAAmBD,KAAnB,EAA0B,UAACI,KAAD,EAAQrC,KAAR;AAAA,iBAAkBL,MAAM2C,YAAN,CAAmBD,KAAnB,EAA0B;AACvFlC,iBAAK,OAAKC,IAAL,CAAUJ,KAAV;AADkF,WAA1B,CAAlB;AAAA,SAA1B,CAArB;;AAKA8B,0BAAkBpB,OAChB;AAAA;AAAA,YAAK,QAAQA,KAAK6B,MAAlB;AAA2BJ;AAA3B,SADgB,GAEdA,YAFJ;AAGD,OAVD,MAUO,IAAI,CAAClB,QAAD,IAAa,CAACQ,SAAlB,EAA6B;AAClCK,0BACE;AAAA;AAAA;AACE,2BAAc,OADhB;AAEE,2BAAe,kBAAcU;AAF/B;AAIG,eAAKnC;AAJR,SADF;AAQD;;AAED,UAAMoC,UACJ;AAAA;AAAA;AACE;AAAA;AAAUlB,qBAAV;AAAwBO;AAAxB,SADF;AAEGnB,gBAFH;AAGI,SAACA,QAAD,IAAaC,UAAd,GAA4BiB,iBAA5B,GAAgD;AAHnD,OADF;;AAQA,aACE;AAAA;AAAA,mBAAK,WAAWF,WAAhB,IAAiCL,IAAjC;AACGF,kBAAU;AAAA;AAAA,YAAK,WAAcZ,SAAd,YAAL;AAAwCY;AAAxC,SADb;AAEGqB,eAFH;AAGGxB,gBAHH;AAIGJ,kBAAU;AAAA;AAAA,YAAK,WAAcL,SAAd,YAAL;AAAwCK;AAAxC;AAJb,OADF;AAQD;;;;EA5J+BlB,MAAM+C,S;;AAAnB9C,I,CAOZ+C,I;AAPY/C,I,CASZgD,iB,GAAoB;AACzBlC,QAAM,oBAAUmC;AADS,C;AATRjD,I,CAaZkD,Y,GAAe;AACpB7C,cAAY,EADQ;AAEpBO,aAAW,SAFS;AAGpBM,YAAU,KAHU;AAIpBC,SAAO,IAJa;AAKpBM,WAAS,KALW;AAMpBT,cAAY;AANQ,C;kBAbHhB,I","file":"index.js","sourcesContent":["/**\n * @author panzilong\n * @version 1.0.0\n */\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport { SpinProps } from '../spin';\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\nimport defaultLocale from '../locale-provider/default';\n\nimport Spin from '../spin';\nimport Pagination from '../pagination';\nimport { Row } from '../grid';\n\nimport Item from './Item';\n\nexport default class List extends React.Component {\n\n  constructor(props) {\n      super(props);\n      this.keys = {};\n  }\n\n  static Item = Item;\n\n  static childContextTypes = {\n    grid: PropTypes.any,\n  };\n\n  static defaultProps = {\n    dataSource: [],\n    prefixCls: 'jc-list',\n    bordered: false,\n    split: true,\n    loading: false,\n    pagination: false,\n  };\n\n  getChildContext() {\n    return {\n      grid: this.props.grid,\n    };\n  }\n\n  renderItem = (item, index) => {\n    const { dataSource, renderItem, rowKey } = this.props;\n    let key;\n\n    if (typeof rowKey === 'function') {\n      key = rowKey(dataSource[index]);\n    } else if (typeof rowKey === 'string') {\n      key = dataSource[rowKey];\n    } else {\n      key = dataSource.key;\n    }\n\n    if (!key) {\n      key = `list-item-${index}`;\n    }\n\n    this.keys[index] = key;\n\n    return renderItem(item, index);\n  }\n\n  isSomethingAfterLastItem() {\n    const { loadMore, pagination, footer } = this.props;\n    return !!(loadMore || pagination || footer);\n  }\n\n  renderEmpty = (contextLocale) => {\n    const locale = { ...contextLocale, ...this.props.locale };\n    return <div className={`${this.props.prefixCls}-empty-text`}>{locale.emptyText}</div>;\n  }\n\n  render() {\n    const {\n      bordered,\n      split,\n      className,\n      children,\n      itemLayout,\n      loadMore,\n      pagination,\n      prefixCls,\n      grid,\n      dataSource,\n      size,\n      rowKey,\n      renderItem,\n      header,\n      footer,\n      loading,\n      ...rest,\n    } = this.props;\n\n    let loadingProp = loading;\n    if (typeof loadingProp === 'boolean') {\n      loadingProp = {\n        spinning: loadingProp,\n      };\n    }\n    const isLoading = (loadingProp && loadingProp.spinning);\n\n    // large => lg\n    // small => sm\n    let sizeCls = '';\n    switch (size) {\n      case 'large':\n        sizeCls = 'lg';\n        break;\n      case 'small':\n        sizeCls = 'sm';\n      default:\n        break;\n    }\n\n    const classString = classNames(prefixCls, className, {\n      [`${prefixCls}-vertical`]: itemLayout === 'vertical',\n      [`${prefixCls}-${sizeCls}`]: sizeCls,\n      [`${prefixCls}-split`]: split,\n      [`${prefixCls}-bordered`]: bordered,\n      [`${prefixCls}-loading`]: isLoading,\n      [`${prefixCls}-grid`]: grid,\n      [`${prefixCls}-something-after-last-item`]: this.isSomethingAfterLastItem(),\n    });\n\n    const paginationContent = (\n      <div className={`${prefixCls}-pagination`}>\n        <Pagination {...pagination} />\n      </div>\n    );\n\n    let childrenContent;\n    childrenContent = isLoading && <div style={{ minHeight: 53 }} />;\n    if (dataSource.length > 0) {\n      const items = dataSource.map((item, index) => this.renderItem(item, index));\n      const childrenList = React.Children.map(items, (child, index) => React.cloneElement(child, {\n          key: this.keys[index],\n        }),\n      );\n\n      childrenContent = grid ? (\n        <Row gutter={grid.gutter}>{childrenList}</Row>\n      ) : childrenList;\n    } else if (!children && !isLoading) {\n      childrenContent = (\n        <LocaleReceiver\n          componentName=\"Table\"\n          defaultLocale={defaultLocale.Table}\n        >\n          {this.renderEmpty}\n        </LocaleReceiver>\n      );\n    }\n\n    const content = (\n      <div>\n        <Spin {...loadingProp}>{childrenContent}</Spin>\n        {loadMore}\n        {(!loadMore && pagination) ? paginationContent : null}\n      </div>\n    );\n\n    return (\n      <div className={classString} {...rest}>\n        {header && <div className={`${prefixCls}-header`}>{header}</div>}\n        {content}\n        {children}\n        {footer && <div className={`${prefixCls}-footer`}>{footer}</div>}\n      </div>\n    );\n  }\n}\n"]}