{"version":3,"sources":["../../components/spin/index.js"],"names":["React","SpinProps","prefixCls","string","className","spinning","bool","size","oneOf","wrapperClassName","indicator","node","delay","number","tip","style","object","Spin","props","isNestedPattern","children","renderIndicator","dotClassName","isValidElement","cloneElement","debounceTimeout","undefined","delayTimeout","state","setState","notCssAnimationSupported","nextProps","currentSpinning","clearTimeout","window","setTimeout","Number","isNaN","restProps","spinClassName","divProps","spinElement","animateClassName","containerClassName","Component","defaultProps","propTypes"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * @author chenyanhua\n * @version 3.4.0\n */\nimport * as React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport Animate from 'rc-animate';\nimport omit from 'omit.js';\nimport isCssAnimationSupported from '../_util/isCssAnimationSupported';\n\nexport const SpinProps = {\n    prefixCls: PropTypes.string,\n    className: PropTypes.string,\n    spinning: PropTypes.bool, // 是否旋转\n    size: PropTypes.oneOf(['small', 'default', 'large']),\n    wrapperClassName: PropTypes.string, // 包装器的类属性\n    indicator: PropTypes.node, // 加载指示符\n    delay: PropTypes.number, // 延迟显示加载效果的时间（防止闪烁）\n    tip: PropTypes.string, // 当作为包裹元素时，可以自定义描述文案\n    style: PropTypes.object\n};\n\nexport default class Spin extends React.Component {\n    static defaultProps = {\n        prefixCls: 'jc-spin',\n        spinning: true,\n        size: 'default',\n        wrapperClassName: ''\n    };\n    static propTypes = {...SpinProps};\n\n    // static propTypes = {\n    //     prefixCls: PropTypes.string,\n    //     className: PropTypes.string,\n    //     spinning: PropTypes.bool, // 是否旋转\n    //     size: PropTypes.oneOf(['small', 'default', 'large']),\n    //     wrapperClassName: PropTypes.string, // 包装器的类属性\n    //     indicator: PropTypes.node, // 加载指示符\n    //     delay: PropTypes.number, // 延迟显示加载效果的时间（防止闪烁）\n    //     tip: PropTypes.string, // 当作为包裹元素时，可以自定义描述文案\n    //     style: PropTypes.object\n    // };\n\n    constructor(props) {\n        super(props);\n        this.debounceTimeout = undefined;\n        this.delayTimeout = undefined;\n        this.state = {\n            spinning: props.spinning\n        };\n    }\n    componentDidMount() {\n        if (!isCssAnimationSupported()) {\n            // Show text in IE9\n            this.setState({\n                notCssAnimationSupported: true,\n            });\n        }\n    }\n    componentWillReceiveProps(nextProps) {\n        const currentSpinning = this.props.spinning;\n        const { spinning } = nextProps;\n        const { delay } = this.props;\n        if (this.debounceTimeout) {\n            clearTimeout(this.debounceTimeout);\n        }\n        if (currentSpinning && !spinning) {\n            this.debounceTimeout = window.setTimeout(() => this.setState({ spinning }), 200);\n            if (this.delayTimeout) {\n                clearTimeout(this.delayTimeout);\n            }\n        } else if (spinning && delay && !Number.isNaN(Number(delay))) {\n            if (this.delayTimeout) {\n                clearTimeout(this.delayTimeout);\n            }\n            this.delayTimeout = window.setTimeout(() => this.setState({ spinning }), delay);\n        } else {\n            this.setState({ spinning });\n        }\n    }\n    componentWillUnmount() {\n        if (this.debounceTimeout) {\n            clearTimeout(this.debounceTimeout);\n        }\n        if (this.delayTimeout) {\n            clearTimeout(this.delayTimeout);\n        }\n    }\n    /**\n     * 是否有子元素\n     * 有子元素时，指示整个子元素的加载状态\n     */\n    isNestedPattern = () => {\n        return !!(this.props && this.props.children);\n    }\n    /**\n     * 渲染组件：自定义组件或者默认组件\n     */\n    renderIndicator = () => {\n        const { prefixCls, indicator } = this.props;\n        // 加载符\n        const dotClassName = `${prefixCls}-dot`;\n        // 存在自定义加载符\n        if (React.isValidElement(indicator)) {\n            return React.cloneElement(indicator, {\n                className: classNames(indicator.props.className, dotClassName)\n            });\n        }\n        // 使用默认加载符\n        return (\n            <span className={classNames(dotClassName, `${prefixCls}-dot-spin`)}>\n                <i />\n                <i />\n                <i />\n                <i />\n            </span>\n        );\n    }\n    render() {\n        const { className, size, prefixCls, tip, wrapperClassName, ...restProps } = this.props;\n        const { spinning, notCssAnimationSupported } = this.state;\n\n        const spinClassName = classNames(prefixCls, {\n            [`${prefixCls}-sm`]: size === 'small',\n            [`${prefixCls}-lg`]: size === 'large',\n            [`${prefixCls}-spinning`]: spinning,\n            [`${prefixCls}-show-text`]: !!tip || notCssAnimationSupported,\n        }, className);\n        // fix https://fb.me/react-unknown-prop\n        const divProps = omit(restProps, [\n            'spinning',\n            'delay',\n            'indicator'\n        ]);\n        const spinElement = (\n            <div {...divProps} className={spinClassName}>\n                {this.renderIndicator()}\n                {tip ? <div className={`${prefixCls}-text`}>{tip}</div> : null}\n            </div>\n        );\n        // 如有子元素，包裹子元素，否则只返回加载符\n        if (this.isNestedPattern()) {\n            let animateClassName = `${prefixCls}-nested-loading`;\n            if (wrapperClassName) {\n                animateClassName = `${animateClassName} ${wrapperClassName}`;\n            }\n            const containerClassName = classNames({\n                [`${prefixCls}-container`]: true,\n                [`${prefixCls}-blur`]: spinning,\n            });\n            return (\n                <Animate\n                    {...divProps}\n                    component='div'\n                    className={animateClassName}\n                    style={null}\n                    transitionName='fade'\n                >\n                    {spinning && <div key='loading'>{spinElement}</div>}\n                    <div className={containerClassName} key='container'>\n                        {this.props.children}\n                    </div>\n                </Animate>\n            );\n        }\n        return spinElement;\n    }\n}\n"]}