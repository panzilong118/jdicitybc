{"version":3,"sources":["../../components/message/index.js"],"names":["defaultDuration","defaultTop","messageInstance","key","prefixCls","transitionName","getContainer","getMessageInstance","callback","newInstance","style","top","instance","notice","content","duration","type","onClose","iconType","info","success","error","warning","loading","target","removeNotice","propTypes","oneOf","number","func","oneOfType","string","node","warn","config","options","undefined","prefixClsAssist","getContainerAssist","transitionNameAssist","destroy"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * @author sunjianguo\n * @version 3.3.3\n */\n\n\nimport React from 'react';\nimport Notification from 'rc-notification';\nimport PropTypes from 'prop-types';\nimport Icon from '../icon';\n\nlet defaultDuration = 3;\nlet defaultTop;\nlet messageInstance;\nlet key = 1;\nlet prefixCls = 'jc-message';\nlet transitionName = 'move-up';\nlet getContainer;\n\n\nfunction getMessageInstance(callback = () => {}) {\n    if (messageInstance) {\n        callback(messageInstance);\n        return;\n    }\n    Notification.newInstance({\n        prefixCls,\n        transitionName,\n        style: { top: defaultTop }, // 覆盖原来的样式\n        getContainer,\n    }, (instance) => {\n        if (messageInstance) {\n            callback(messageInstance);\n            return;\n        }\n        messageInstance = instance;\n        callback(instance);\n    });\n}\n\n\nfunction notice(\n    content,\n    duration,\n    type,\n    onClose,\n) {\n    const iconType = ({\n        info: 'info-circle',\n        success: 'check-circle',\n        error: 'cross-circle',\n        warning: 'exclamation-circle',\n        loading: 'loading',\n    })[type];\n\n    if (typeof duration === 'function') {\n        onClose = duration;\n        duration = defaultDuration;\n    }\n\n    const target = key;\n    key += 1;\n    getMessageInstance((instance) => {\n        instance.notice({\n            key: target,\n            duration,\n            style: {},\n            content: (\n                <div className={`${prefixCls}-custom-content ${prefixCls}-${type}`}>\n                    <Icon type={iconType} />\n                    <span>{content}</span>\n                </div>\n            ),\n            onClose,\n        });\n    });\n    return () => {\n        if (messageInstance) {\n            messageInstance.removeNotice(target);\n        }\n    };\n}\n\nnotice.propTypes = {\n    // 你可以将属性声明为以下 JS 原生类型\n    type: PropTypes.oneOf(['info', 'success', 'error', 'warning', 'loading']),\n    duration: PropTypes.number,\n    onClose: PropTypes.func,\n};\n\n\nexport default {\n\n    content: PropTypes.oneOfType([\n        PropTypes.string,\n        PropTypes.node,\n    ]),\n    duration: PropTypes.number,\n    onClose: PropTypes.func,\n    top: PropTypes.number,\n    prefixCls: PropTypes.string,\n    getContainer: PropTypes.func,\n    transitionName: PropTypes.string,\n\n    info(content, duration, onClose) {\n        return notice(content, duration, 'info', onClose);\n    },\n    success(content, duration, onClose) {\n        return notice(content, duration, 'success', onClose);\n    },\n    error(content, duration, onClose) {\n        return notice(content, duration, 'error', onClose);\n    },\n    // Departed usage, please use warning()\n    warn(content, duration, onClose) {\n        return notice(content, duration, 'warning', onClose);\n    },\n    warning(content, duration, onClose) {\n        return notice(content, duration, 'warning', onClose);\n    },\n    loading(content, duration, onClose) {\n        return notice(content, duration, 'loading', onClose);\n    },\n    config(options) {\n        if (options.top !== undefined) {\n            defaultTop = options.top;\n            messageInstance = null; // delete messageInstance for new defaultTop\n        }\n        if (options.duration !== undefined) {\n            defaultDuration = options.duration;\n        }\n        if (options.prefixCls !== undefined) {\n            const prefixClsAssist = options.prefixCls;\n            prefixCls = prefixClsAssist;\n        }\n        if (options.getContainer !== undefined) {\n            const getContainerAssist = options.getContainer;\n            getContainer = getContainerAssist;\n        }\n        if (options.transitionName !== undefined) {\n            const transitionNameAssist = options.transitionName;\n            transitionName = transitionNameAssist;\n            messageInstance = null; // delete messageInstance for new transitionName\n        }\n    },\n    destroy() {\n        if (messageInstance) {\n            messageInstance.destroy();\n            messageInstance = null;\n        }\n    },\n};\n"]}