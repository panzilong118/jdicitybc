{"version":3,"sources":["../../components/message/index.js"],"names":["defaultDuration","defaultTop","messageInstance","key","prefixCls","transitionName","getContainer","getMessageInstance","callback","newInstance","style","top","instance","notice","content","duration","type","onClose","iconType","info","success","error","warning","loading","target","removeNotice","propTypes","oneOf","number","func","oneOfType","string","node","warn","config","options","undefined","prefixClsAssist","getContainerAssist","transitionNameAssist","destroy"],"mappings":"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","file":"index.js","sourcesContent":["/**\r\n * @author sunjianguo\r\n * @version 3.3.3\r\n */\r\n\r\n\r\nimport React from 'react';\r\nimport Notification from 'rc-notification';\r\nimport PropTypes from 'prop-types';\r\nimport Icon from '../icon';\r\n\r\nlet defaultDuration = 3;\r\nlet defaultTop;\r\nlet messageInstance;\r\nlet key = 1;\r\nlet prefixCls = 'jc-message';\r\nlet transitionName = 'move-up';\r\nlet getContainer;\r\n\r\n\r\nfunction getMessageInstance(callback = () => {}) {\r\n    if (messageInstance) {\r\n        callback(messageInstance);\r\n        return;\r\n    }\r\n    Notification.newInstance({\r\n        prefixCls,\r\n        transitionName,\r\n        style: { top: defaultTop }, // 覆盖原来的样式\r\n        getContainer,\r\n    }, (instance) => {\r\n        if (messageInstance) {\r\n            callback(messageInstance);\r\n            return;\r\n        }\r\n        messageInstance = instance;\r\n        callback(instance);\r\n    });\r\n}\r\n\r\n\r\nfunction notice(\r\n    content,\r\n    duration,\r\n    type,\r\n    onClose,\r\n) {\r\n    const iconType = ({\r\n        info: 'info-circle',\r\n        success: 'check-circle',\r\n        error: 'cross-circle',\r\n        warning: 'exclamation-circle',\r\n        loading: 'loading',\r\n    })[type];\r\n\r\n    if (typeof duration === 'function') {\r\n        onClose = duration;\r\n        duration = defaultDuration;\r\n    }\r\n\r\n    const target = key;\r\n    key += 1;\r\n    getMessageInstance((instance) => {\r\n        instance.notice({\r\n            key: target,\r\n            duration,\r\n            style: {},\r\n            content: (\r\n                <div className={`${prefixCls}-custom-content ${prefixCls}-${type}`}>\r\n                    <Icon type={iconType} />\r\n                    <span>{content}</span>\r\n                </div>\r\n            ),\r\n            onClose,\r\n        });\r\n    });\r\n    return () => {\r\n        if (messageInstance) {\r\n            messageInstance.removeNotice(target);\r\n        }\r\n    };\r\n}\r\n\r\nnotice.propTypes = {\r\n    // 你可以将属性声明为以下 JS 原生类型\r\n    type: PropTypes.oneOf(['info', 'success', 'error', 'warning', 'loading']),\r\n    duration: PropTypes.number,\r\n    onClose: PropTypes.func,\r\n};\r\n\r\n\r\nexport default {\r\n\r\n    content: PropTypes.oneOfType([\r\n        PropTypes.string,\r\n        PropTypes.node,\r\n    ]),\r\n    duration: PropTypes.number,\r\n    onClose: PropTypes.func,\r\n    top: PropTypes.number,\r\n    prefixCls: PropTypes.string,\r\n    getContainer: PropTypes.func,\r\n    transitionName: PropTypes.string,\r\n\r\n    info(content, duration, onClose) {\r\n        return notice(content, duration, 'info', onClose);\r\n    },\r\n    success(content, duration, onClose) {\r\n        return notice(content, duration, 'success', onClose);\r\n    },\r\n    error(content, duration, onClose) {\r\n        return notice(content, duration, 'error', onClose);\r\n    },\r\n    // Departed usage, please use warning()\r\n    warn(content, duration, onClose) {\r\n        return notice(content, duration, 'warning', onClose);\r\n    },\r\n    warning(content, duration, onClose) {\r\n        return notice(content, duration, 'warning', onClose);\r\n    },\r\n    loading(content, duration, onClose) {\r\n        return notice(content, duration, 'loading', onClose);\r\n    },\r\n    config(options) {\r\n        if (options.top !== undefined) {\r\n            defaultTop = options.top;\r\n            messageInstance = null; // delete messageInstance for new defaultTop\r\n        }\r\n        if (options.duration !== undefined) {\r\n            defaultDuration = options.duration;\r\n        }\r\n        if (options.prefixCls !== undefined) {\r\n            const prefixClsAssist = options.prefixCls;\r\n            prefixCls = prefixClsAssist;\r\n        }\r\n        if (options.getContainer !== undefined) {\r\n            const getContainerAssist = options.getContainer;\r\n            getContainer = getContainerAssist;\r\n        }\r\n        if (options.transitionName !== undefined) {\r\n            const transitionNameAssist = options.transitionName;\r\n            transitionName = transitionNameAssist;\r\n            messageInstance = null; // delete messageInstance for new transitionName\r\n        }\r\n    },\r\n    destroy() {\r\n        if (messageInstance) {\r\n            messageInstance.destroy();\r\n            messageInstance = null;\r\n        }\r\n    },\r\n};\r\n"]}