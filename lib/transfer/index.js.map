{"version":3,"sources":["../../components/transfer/index.js"],"names":["TransferListProps","TransferOperationProps","TransferSearchProps","React","noop","Transfer","props","selectedKeys","targetKeys","state","leftFilter","rightFilter","sourceSelectedKeys","filter","indexOf","key","targetSelectedKeys","nextProps","dataSource","splitedDataSource","newSourceSelectedKeys","newTargetSelectedKeys","forEach","includes","push","setState","rowKey","leftDataSource","rightDataSource","Array","length","record","indexOfKey","direction","holder","onSelectChange","transferLocale","titles","renderTransfer","Component","List","Operation","Search","defaultProps","render","showSearch","propTypes","prefixCls","string","array","func","onChange","height","number","listStyle","object","className","operations","bool","filterOption","searchPlaceholder","notFoundContent","node","body","footer","lazy","oneOfType","moveTo","moveKeys","newMoveKeys","some","data","disabled","newTargetKeys","concat","targetKey","oppositeDirection","getSelectedKeysName","handleSelectChange","moveToLeft","moveToRight","handleSelectAll","filteredDataSource","checkAll","originalSelectedKeys","currentKeys","map","item","newKeys1","newKeys2","handleLeftSelectAll","handleRightSelectAll","handleFilter","e","target","value","onSearchChange","handleLeftFilter","handleRightFilter","handleClear","handleLeftClear","handleRightClear","handleSelect","selectedItem","checked","index","splice","handleLeftSelect","handleRightSelect","handleScroll","onScroll","handleLeftScroll","handleRightScroll","locale","splitDataSource","leftActive","rightActive","cls","getTitles","itemUnit","itemsUnit"],"mappings":"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","file":"index.js","sourcesContent":["/**\r\n * @author panzilong\r\n * @version 1.0.0\r\n */\r\n import * as React from 'react';\r\n import PropTypes from 'prop-types';\r\n import classNames from 'classnames';\r\n import List, { TransferListProps } from './list';\r\n import Operation from './operation';\r\n import Search from './search';\r\n import LocaleReceiver from '../locale-provider/LocaleReceiver';\r\n import defaultLocale from '../locale-provider/default';\r\n\r\n export { TransferListProps } from './list';\r\n export { TransferOperationProps } from './operation';\r\n export { TransferSearchProps } from './search';\r\n\r\n function noop() {\r\n }\r\n\r\n export default class Transfer extends React.Component {\r\n   // For high-level customized Transfer @dqaria\r\n   static List = List;\r\n   static Operation = Operation;\r\n   static Search = Search;\r\n\r\n   static defaultProps = {\r\n     dataSource: [],\r\n     render: noop,\r\n     showSearch: false,\r\n   };\r\n\r\n   static propTypes = {\r\n     prefixCls: PropTypes.string,\r\n     dataSource: PropTypes.array,\r\n     render: PropTypes.func,\r\n     targetKeys: PropTypes.array,\r\n     onChange: PropTypes.func,\r\n     height: PropTypes.number,\r\n     listStyle: PropTypes.object,\r\n     className: PropTypes.string,\r\n     titles: PropTypes.array,\r\n     operations: PropTypes.array,\r\n     showSearch: PropTypes.bool,\r\n     filterOption: PropTypes.func,\r\n     searchPlaceholder: PropTypes.string,\r\n     notFoundContent: PropTypes.node,\r\n     body: PropTypes.func,\r\n     footer: PropTypes.func,\r\n     rowKey: PropTypes.func,\r\n     lazy: PropTypes.oneOfType([PropTypes.object, PropTypes.bool]),\r\n   };\r\n\r\n   // splitedDataSource: {\r\n   //   leftDataSource: TransferItem[],\r\n   //   rightDataSource: TransferItem[],\r\n   // } | null;\r\n\r\n   constructor(props) {\r\n     super(props);\r\n\r\n     const { selectedKeys = [], targetKeys = [] } = props;\r\n     this.state = {\r\n       leftFilter: '',\r\n       rightFilter: '',\r\n       sourceSelectedKeys: selectedKeys.filter(key => targetKeys.indexOf(key) === -1),\r\n       targetSelectedKeys: selectedKeys.filter(key => targetKeys.indexOf(key) > -1),\r\n     };\r\n   }\r\n\r\n   componentWillReceiveProps(nextProps) {\r\n     const { sourceSelectedKeys, targetSelectedKeys } = this.state;\r\n\r\n     if (nextProps.targetKeys !== this.props.targetKeys ||\r\n       nextProps.dataSource !== this.props.dataSource) {\r\n       // clear cached splited dataSource\r\n       this.splitedDataSource = null;\r\n\r\n       if (!nextProps.selectedKeys) {\r\n         // clear key nolonger existed\r\n         // clear checkedKeys according to targetKeys\r\n         const { dataSource, targetKeys = [] } = nextProps;\r\n\r\n         const newSourceSelectedKeys: String[] = [];\r\n         const newTargetSelectedKeys: String[] = [];\r\n         dataSource.forEach(({ key }) => {\r\n           if (sourceSelectedKeys.includes(key) && !targetKeys.includes(key)) {\r\n             newSourceSelectedKeys.push(key);\r\n           }\r\n           if (targetSelectedKeys.includes(key) && targetKeys.includes(key)) {\r\n             newTargetSelectedKeys.push(key);\r\n           }\r\n         });\r\n         this.setState({\r\n           sourceSelectedKeys: newSourceSelectedKeys,\r\n           targetSelectedKeys: newTargetSelectedKeys,\r\n         });\r\n       }\r\n     }\r\n\r\n     if (nextProps.selectedKeys) {\r\n       const targetKeys = nextProps.targetKeys || [];\r\n       this.setState({\r\n         sourceSelectedKeys: nextProps.selectedKeys.filter(key => !targetKeys.includes(key)),\r\n         targetSelectedKeys: nextProps.selectedKeys.filter(key => targetKeys.includes(key)),\r\n       });\r\n     }\r\n   }\r\n\r\n   splitDataSource(props) {\r\n     if (this.splitedDataSource) {\r\n       return this.splitedDataSource;\r\n     }\r\n\r\n     const { dataSource, rowKey, targetKeys = [] } = props;\r\n\r\n     const leftDataSource = [];\r\n     const rightDataSource = new Array(targetKeys.length);\r\n     dataSource.forEach(record => {\r\n       if (rowKey) {\r\n         record.key = rowKey(record);\r\n       }\r\n\r\n       // rightDataSource should be ordered by targetKeys\r\n       // leftDataSource should be ordered by dataSource\r\n       const indexOfKey = targetKeys.indexOf(record.key);\r\n       if (indexOfKey !== -1) {\r\n         rightDataSource[indexOfKey] = record;\r\n       } else {\r\n         leftDataSource.push(record);\r\n       }\r\n     });\r\n\r\n     this.splitedDataSource = {\r\n       leftDataSource,\r\n       rightDataSource,\r\n     };\r\n\r\n     return this.splitedDataSource;\r\n   }\r\n\r\n   moveTo = (direction) => {\r\n     const { targetKeys = [], dataSource = [], onChange } = this.props;\r\n     const { sourceSelectedKeys, targetSelectedKeys } = this.state;\r\n     const moveKeys = direction === 'right' ? sourceSelectedKeys : targetSelectedKeys;\r\n     // filter the disabled options\r\n     const newMoveKeys = moveKeys.filter((key: string) =>\r\n       !dataSource.some(data => !!(key === data.key && data.disabled)),\r\n     );\r\n     // move items to target box\r\n     const newTargetKeys = direction === 'right'\r\n       ? newMoveKeys.concat(targetKeys)\r\n       : targetKeys.filter(targetKey => newMoveKeys.indexOf(targetKey) === -1);\r\n\r\n     // empty checked keys\r\n     const oppositeDirection = direction === 'right' ? 'left' : 'right';\r\n     this.setState({\r\n       [this.getSelectedKeysName(oppositeDirection)]: [],\r\n     });\r\n     this.handleSelectChange(oppositeDirection, []);\r\n\r\n     if (onChange) {\r\n       onChange(newTargetKeys, direction, newMoveKeys);\r\n     }\r\n   }\r\n\r\n   moveToLeft = () => this.moveTo('left');\r\n   moveToRight = () => this.moveTo('right');\r\n\r\n   handleSelectChange(direction, holder: string[]) {\r\n     const { sourceSelectedKeys, targetSelectedKeys } = this.state;\r\n     const onSelectChange = this.props.onSelectChange;\r\n     if (!onSelectChange) {\r\n       return;\r\n     }\r\n\r\n     if (direction === 'left') {\r\n       onSelectChange(holder, targetSelectedKeys);\r\n     } else {\r\n       onSelectChange(sourceSelectedKeys, holder);\r\n     }\r\n   }\r\n\r\n   handleSelectAll = (direction, filteredDataSource, checkAll: boolean) => {\r\n     const originalSelectedKeys = this.state[this.getSelectedKeysName(direction)] || [];\r\n     const currentKeys = filteredDataSource.map(item => item.key);\r\n     // Only operate current keys from original selected keys\r\n     const newKeys1 = originalSelectedKeys.filter((key: string) => currentKeys.indexOf(key) === -1);\r\n     const newKeys2 = [...originalSelectedKeys];\r\n     currentKeys.forEach((key) => {\r\n       if (newKeys2.indexOf(key) === -1) {\r\n         newKeys2.push(key);\r\n       }\r\n     });\r\n     const holder = checkAll ? newKeys1 : newKeys2;\r\n     this.handleSelectChange(direction, holder);\r\n\r\n     if (!this.props.selectedKeys) {\r\n       this.setState({\r\n         [this.getSelectedKeysName(direction)]: holder,\r\n       });\r\n     }\r\n   }\r\n\r\n   handleLeftSelectAll = (filteredDataSource, checkAll: boolean) => (\r\n     this.handleSelectAll('left', filteredDataSource, checkAll)\r\n   )\r\n   handleRightSelectAll = (filteredDataSource, checkAll: boolean) => (\r\n     this.handleSelectAll('right', filteredDataSource, checkAll)\r\n   )\r\n\r\n   handleFilter = (direction, e) => {\r\n     this.setState({\r\n       // add filter\r\n       [`${direction}Filter`]: e.target.value,\r\n     });\r\n     if (this.props.onSearchChange) {\r\n       this.props.onSearchChange(direction, e);\r\n     }\r\n   }\r\n\r\n   handleLeftFilter = (e) => this.handleFilter('left', e);\r\n   handleRightFilter = (e) => this.handleFilter('right', e);\r\n\r\n   handleClear = (direction: string) => {\r\n     this.setState({\r\n       [`${direction}Filter`]: '',\r\n     });\r\n   }\r\n\r\n   handleLeftClear = () => this.handleClear('left');\r\n   handleRightClear = () => this.handleClear('right');\r\n\r\n   handleSelect = (direction, selectedItem, checked: boolean) => {\r\n     const { sourceSelectedKeys, targetSelectedKeys } = this.state;\r\n     const holder = direction === 'left' ? [...sourceSelectedKeys] : [...targetSelectedKeys];\r\n     const index = holder.indexOf(selectedItem.key);\r\n     if (index > -1) {\r\n       holder.splice(index, 1);\r\n     }\r\n     if (checked) {\r\n       holder.push(selectedItem.key);\r\n     }\r\n     this.handleSelectChange(direction, holder);\r\n\r\n     if (!this.props.selectedKeys) {\r\n       this.setState({\r\n         [this.getSelectedKeysName(direction)]: holder,\r\n       });\r\n     }\r\n   }\r\n\r\n   handleLeftSelect = (selectedItem, checked: boolean) => {\r\n     return this.handleSelect('left', selectedItem, checked);\r\n   }\r\n\r\n   handleRightSelect = (selectedItem, checked: boolean) => {\r\n     return this.handleSelect('right', selectedItem, checked);\r\n   }\r\n\r\n   handleScroll = (direction, e) => {\r\n     const { onScroll } = this.props;\r\n     if (onScroll) {\r\n       onScroll(direction, e);\r\n     }\r\n   }\r\n\r\n   handleLeftScroll = (e) => this.handleScroll('left', e);\r\n   handleRightScroll = (e) => this.handleScroll('right', e);\r\n\r\n   getTitles(transferLocale) {\r\n     const { props } = this;\r\n     if (props.titles) {\r\n       return props.titles;\r\n     }\r\n     return transferLocale.titles;\r\n   }\r\n\r\n   getSelectedKeysName(direction) {\r\n     return direction === 'left' ? 'sourceSelectedKeys' : 'targetSelectedKeys';\r\n   }\r\n\r\n   renderTransfer = (locale) => {\r\n     const {\r\n       prefixCls = 'jc-transfer',\r\n       className,\r\n       operations = [],\r\n       showSearch,\r\n       notFoundContent,\r\n       searchPlaceholder,\r\n       body,\r\n       footer,\r\n       listStyle,\r\n       filterOption,\r\n       render,\r\n       lazy,\r\n     } = this.props;\r\n     const { leftFilter, rightFilter, sourceSelectedKeys, targetSelectedKeys } = this.state;\r\n\r\n     const { leftDataSource, rightDataSource } = this.splitDataSource(this.props);\r\n     const leftActive = targetSelectedKeys.length > 0;\r\n     const rightActive = sourceSelectedKeys.length > 0;\r\n\r\n     const cls = classNames(className, prefixCls);\r\n\r\n     const titles = this.getTitles(locale);\r\n     return (\r\n       <div className={cls}>\r\n         <List\r\n           prefixCls={`${prefixCls}-list`}\r\n           titleText={titles[0]}\r\n           dataSource={leftDataSource}\r\n           filter={leftFilter}\r\n           filterOption={filterOption}\r\n           style={listStyle}\r\n           checkedKeys={sourceSelectedKeys}\r\n           handleFilter={this.handleLeftFilter}\r\n           handleClear={this.handleLeftClear}\r\n           handleSelect={this.handleLeftSelect}\r\n           handleSelectAll={this.handleLeftSelectAll}\r\n           render={render}\r\n           showSearch={showSearch}\r\n           searchPlaceholder={searchPlaceholder || locale.searchPlaceholder}\r\n           notFoundContent={notFoundContent || locale.notFoundContent}\r\n           itemUnit={locale.itemUnit}\r\n           itemsUnit={locale.itemsUnit}\r\n           body={body}\r\n           footer={footer}\r\n           lazy={lazy}\r\n           onScroll={this.handleLeftScroll}\r\n         />\r\n         <Operation\r\n           className={`${prefixCls}-operation`}\r\n           rightActive={rightActive}\r\n           rightArrowText={operations[0]}\r\n           moveToRight={this.moveToRight}\r\n           leftActive={leftActive}\r\n           leftArrowText={operations[1]}\r\n           moveToLeft={this.moveToLeft}\r\n         />\r\n         <List\r\n           prefixCls={`${prefixCls}-list`}\r\n           titleText={titles[1]}\r\n           dataSource={rightDataSource}\r\n           filter={rightFilter}\r\n           filterOption={filterOption}\r\n           style={listStyle}\r\n           checkedKeys={targetSelectedKeys}\r\n           handleFilter={this.handleRightFilter}\r\n           handleClear={this.handleRightClear}\r\n           handleSelect={this.handleRightSelect}\r\n           handleSelectAll={this.handleRightSelectAll}\r\n           render={render}\r\n           showSearch={showSearch}\r\n           searchPlaceholder={searchPlaceholder || locale.searchPlaceholder}\r\n           notFoundContent={notFoundContent || locale.notFoundContent}\r\n           itemUnit={locale.itemUnit}\r\n           itemsUnit={locale.itemsUnit}\r\n           body={body}\r\n           footer={footer}\r\n           lazy={lazy}\r\n           onScroll={this.handleRightScroll}\r\n         />\r\n       </div>\r\n     );\r\n   }\r\n\r\n   render() {\r\n     return (\r\n       <LocaleReceiver\r\n         componentName=\"Transfer\"\r\n         defaultLocale={defaultLocale.Transfer}\r\n       >\r\n         {this.renderTransfer}\r\n       </LocaleReceiver>\r\n     );\r\n   }\r\n }\r\n"]}