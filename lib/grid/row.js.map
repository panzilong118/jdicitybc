{"version":3,"sources":["../../components/grid/row.js"],"names":["React","__rest","s","e","t","p","Object","prototype","hasOwnProperty","call","indexOf","getOwnPropertySymbols","i","length","enquire","window","matchMediaPolyfill","mediaQuery","media","matches","addListener","removeListener","matchMedia","require","responsiveArray","responsiveMap","xs","sm","md","lg","xl","xxl","Row","arguments","state","screens","keys","map","screen","register","match","props","gutter","setState","prevState","assign","unmatch","destroy","unregister","breakpoint","undefined","type","_a","justify","align","className","style","children","prefixCls","others","getGutter","classes","rowStyle","marginLeft","marginRight","cols","col","paddingLeft","paddingRight","otherProps","Component","defaultProps","propTypes","string","node","oneOfType","object","number"],"mappings":"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","file":"row.js","sourcesContent":["/**\r\n * Created by huangxiao3 on 2018/3/16.\r\n */\r\nimport * as React from 'react';\r\nimport { Children, cloneElement } from 'react';\r\nimport classNames from 'classnames';\r\nimport PropTypes from 'prop-types';\r\n// 重组props 生成新对象\r\nvar __rest = (this && this.__rest) || function (s, e) {\r\n        var t = {};\r\n        for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n            t[p] = s[p];\r\n        if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n            for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n                t[p[i]] = s[p[i]];\r\n        return t;\r\n    };\r\n// matchMedia polyfill for\r\n// https://github.com/WickyNilliams/enquire.js/issues/82\r\n// 支持响应式布局，使用enquire。\r\n// 检查浏览器支持情况\r\nlet enquire;\r\nif (typeof window !== 'undefined') {\r\n    const matchMediaPolyfill = (mediaQuery) => {\r\n        return {\r\n            media: mediaQuery,\r\n            matches: false,\r\n            addListener() {\r\n            },\r\n            removeListener() {\r\n            },\r\n        };\r\n    };\r\n    window.matchMedia = window.matchMedia || matchMediaPolyfill;\r\n    enquire = require('enquire.js');\r\n}\r\n\r\n// 响应式布局 触发断点\r\nconst responsiveArray = ['xxl', 'xl', 'lg', 'md', 'sm', 'xs'];\r\nconst responsiveMap = {\r\n    xs: '(max-width: 575px)',\r\n    sm: '(min-width: 576px)',\r\n    md: '(min-width: 768px)',\r\n    lg: '(min-width: 992px)',\r\n    xl: '(min-width: 1200px)',\r\n    xxl: '(min-width: 1600px)',\r\n};\r\n\r\nexport default class Row extends React.Component {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.state = {\r\n            screens: {},\r\n        };\r\n    }\r\n\r\n    // 加载完成后，检测窗口width，更新state重新渲染\r\n    componentDidMount() {\r\n        Object.keys(responsiveMap)\r\n            .map((screen) => enquire.register(responsiveMap[screen], {\r\n                match: () => {\r\n                    if (typeof this.props.gutter !== 'object') {\r\n                        return;\r\n                    }\r\n                    this.setState((prevState) => ({\r\n                        screens: Object.assign({}, prevState.screens, { [screen]: true }),\r\n                    }));\r\n                },\r\n                unmatch: () => {\r\n                    if (typeof this.props.gutter !== 'object') {\r\n                        return;\r\n                    }\r\n                    this.setState((prevState) => ({\r\n                        screens: Object.assign({}, prevState.screens, { [screen]: false }),\r\n                    }));\r\n                },\r\n                // Keep a empty destory to avoid triggering unmatch when unregister\r\n                destroy() { },\r\n            }));\r\n    }\r\n\r\n    // 释放\r\n    componentWillUnmount() {\r\n        Object.keys(responsiveMap)\r\n            .map((screen) => enquire.unregister(responsiveMap[screen]));\r\n    }\r\n\r\n    // 根据窗口状态，依照state取值，获取对应的gutter\r\n    getGutter() {\r\n        const { gutter } = this.props;\r\n        if (typeof gutter === 'object') {\r\n            for (let i = 0; i <= responsiveArray.length; i++) {\r\n                const breakpoint = responsiveArray[i];\r\n                if (this.state.screens[breakpoint] && gutter[breakpoint] !== undefined) {\r\n                    return gutter[breakpoint];\r\n                }\r\n            }\r\n        }\r\n        return gutter;\r\n    }\r\n\r\n\r\n    render() {\r\n        // 合并属性\r\n        const _a = this.props, { type, justify, align, className, style, children, prefixCls } = _a, others = __rest(_a, [\"type\", \"justify\", \"align\", \"className\", \"style\", \"children\", \"prefixCls\"]);\r\n        // 获取间距\r\n        const gutter = this.getGutter();\r\n        // 合并类名\r\n        // jc-row    jc-row-flex   jc-row-justify   jc-row-align\r\n        const classes = classNames({\r\n            [prefixCls]: !type,\r\n            [`${prefixCls}-${type}`]: type,\r\n            [`${prefixCls}-${type}-${justify}`]: type && justify,\r\n            [`${prefixCls}-${type}-${align}`]: type && align,\r\n        }, className);\r\n\r\n        // 处理 行的左右偏移\r\n        const rowStyle = gutter > 0 ? Object.assign({ marginLeft: gutter / -2, marginRight: gutter / -2 }, style) : style;\r\n        // 处理 子列\r\n        const cols = Children.map(children, (col) => {\r\n            if (!col) {\r\n                return null;\r\n            }\r\n            // 处理列之间的间隔 gutter 样式\r\n            if (col.props && gutter > 0) {\r\n                return cloneElement(col, {\r\n                    style: Object.assign({ paddingLeft: gutter / 2, paddingRight: gutter / 2 }, col.props.style),\r\n                });\r\n            }\r\n            return col;\r\n        });\r\n        const otherProps = Object.assign({}, others);\r\n        delete otherProps.gutter;\r\n        return <div {...otherProps} className={classes} style={rowStyle}>{cols}</div>;\r\n    }\r\n}\r\n\r\n// 默认间距为0\r\nRow.defaultProps = {\r\n    gutter: 0,\r\n    prefixCls : 'jc-row',\r\n};\r\nRow.propTypes = {\r\n    type: PropTypes.string,\r\n    align: PropTypes.string,\r\n    justify: PropTypes.string,\r\n    className: PropTypes.string,\r\n    children: PropTypes.node,\r\n    gutter: PropTypes.oneOfType([PropTypes.object, PropTypes.number]),\r\n    prefixCls: PropTypes.string,\r\n};"]}