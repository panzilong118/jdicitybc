{"version":3,"sources":["../../components/table/createBodyRow.js"],"names":["createTableRow","React","Component","BodyRow","props","store","getState","selectedRowKeys","unsubscribe","state","selected","indexOf","rowKey","subscribe","setState","rowProps","className","prefixCls","children"],"mappings":";;;;;;;;;;kBAUwBA,c;;AAVxB;;IAAYC,K;;AAEZ;;;;AAEA;;;;AAEA;;;;AAEA;;;;;;;;;;;;;;AAEe,SAASD,cAAT,GAA0C;AAAA,QAAlBE,SAAkB,uEAAN,IAAM;;AAAA,QAC/CC,OAD+C;AAAA;;AAEjD,yBAAYC,KAAZ,EAAmB;AAAA;;AAAA,0HACTA,KADS;;AAGf,kBAAKC,KAAL,GAAaD,MAAMC,KAAnB;;AAHe,uCAIa,MAAKA,KAAL,CAAWC,QAAX,EAJb;AAAA,gBAIPC,eAJO,wBAIPA,eAJO;;AAMf,kBAAKC,WAAL,GAAmB,YAAM,CAAE,CAA3B;;AAEA,kBAAKC,KAAL,GAAa;AACTC,0BAAUH,gBAAgBI,OAAhB,CAAwBP,MAAMQ,MAA9B,KAAyC;AAD1C,aAAb;AARe;AAWlB;;AAbgD;AAAA;AAAA,gDAe7B;AAChB,qBAAKC,SAAL;AACH;AAjBgD;AAAA;AAAA,mDAmB1B;AACnB,oBAAI,KAAKL,WAAT,EAAsB;AAClB,yBAAKA,WAAL;AACH;AACJ;AAvBgD;AAAA;AAAA,wCAyBrC;AAAA;;AAAA,6BACkB,KAAKJ,KADvB;AAAA,oBACAC,KADA,UACAA,KADA;AAAA,oBACOO,MADP,UACOA,MADP;;AAER,qBAAKJ,WAAL,GAAmBH,MAAMQ,SAAN,CAAgB,YAAM;AAAA,0CACT,OAAKR,KAAL,CAAWC,QAAX,EADS;AAAA,wBAC7BC,eAD6B,mBAC7BA,eAD6B;;AAErC,wBAAMG,WAAWH,gBAAgBI,OAAhB,CAAwBC,MAAxB,KAAmC,CAApD;AACA,wBAAIF,aAAa,OAAKD,KAAL,CAAWC,QAA5B,EAAsC;AAClC,+BAAKI,QAAL,CAAc,EAAEJ,kBAAF,EAAd;AACH;AACJ,iBANkB,CAAnB;AAOH;AAlCgD;AAAA;AAAA,qCAoCxC;AACL,oBAAMK,WAAW,oBAAK,KAAKX,KAAV,EAAiB,CAAC,WAAD,EAAc,QAAd,EAAwB,OAAxB,CAAjB,CAAjB;AACA,oBAAMY,YAAY,0BAAW,KAAKZ,KAAL,CAAWY,SAAtB,sBACV,KAAKZ,KAAL,CAAWa,SADD,oBAC4B,KAAKR,KAAL,CAAWC,QADvC,EAAlB;;AAIA,uBACI;AAAC,6BAAD;AAAA,iCAAeK,QAAf,IAAyB,WAAWC,SAApC;AACK,yBAAKZ,KAAL,CAAWc;AADhB,iBADJ;AAKH;AA/CgD;;AAAA;AAAA,MAC/BjB,MAAMC,SADyB;;AAkDrD,WAAOC,OAAP;AACH","file":"createBodyRow.js","sourcesContent":["import * as React from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport classnames from 'classnames';\n\nimport omit from 'omit.js';\n\nimport { Store } from './createStore';\n\nexport default function createTableRow(Component = 'tr') {\n    class BodyRow extends React.Component {\n        constructor(props) {\n            super(props);\n\n            this.store = props.store;\n            const { selectedRowKeys } = this.store.getState();\n\n            this.unsubscribe = () => {};\n\n            this.state = {\n                selected: selectedRowKeys.indexOf(props.rowKey) >= 0\n            };\n        }\n\n        componentDidMount() {\n            this.subscribe();\n        }\n\n        componentWillUnmount() {\n            if (this.unsubscribe) {\n                this.unsubscribe();\n            }\n        }\n\n        subscribe() {\n            const { store, rowKey } = this.props;\n            this.unsubscribe = store.subscribe(() => {\n                const { selectedRowKeys } = this.store.getState();\n                const selected = selectedRowKeys.indexOf(rowKey) >= 0;\n                if (selected !== this.state.selected) {\n                    this.setState({ selected });\n                }\n            });\n        }\n\n        render() {\n            const rowProps = omit(this.props, ['prefixCls', 'rowKey', 'store']);\n            const className = classnames(this.props.className, {\n                [`${this.props.prefixCls}-row-selected`]: this.state.selected\n            });\n\n            return (\n                <Component {...rowProps} className={className}>\n                    {this.props.children}\n                </Component>\n            );\n        }\n    }\n\n    return BodyRow;\n}\n"]}