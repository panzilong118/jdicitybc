{"version":3,"sources":["../../components/table/SelectionBox.js"],"names":["React","SelectionBox","props","state","checked","getCheckState","unsubscribe","subscribe","store","setState","defaultSelection","rowIndex","selectionDirty","getState","selectedRowKeys","indexOf","type","rest","Component","propTypes"],"mappings":";;;;;;;;;;;AAAA;;IAAYA,K;;AAEZ;;;;AAEA;;;;AAEA;;;;AAEA;;;;;;;;;;;;;;IAEqBC,Y;;;AAGjB,0BAAYC,KAAZ,EAAmB;AAAA;;AAAA,gIACTA,KADS;;AAGf,cAAKC,KAAL,GAAa;AACTC,qBAAS,MAAKC,aAAL,CAAmBH,KAAnB;AADA,SAAb;AAGA,cAAKI,WAAL,GAAmB,YAAM,CAAE,CAA3B;AANe;AAOlB;;;;4CAEmB;AAChB,iBAAKC,SAAL;AACH;;;+CAEsB;AACnB,gBAAI,KAAKD,WAAT,EAAsB;AAClB,qBAAKA,WAAL;AACH;AACJ;;;oCAEW;AAAA;;AAAA,gBACAE,KADA,GACU,KAAKN,KADf,CACAM,KADA;;AAER,iBAAKF,WAAL,GAAmBE,MAAMD,SAAN,CAAgB,YAAM;AACrC,oBAAMH,UAAU,OAAKC,aAAL,CAAmB,OAAKH,KAAxB,CAAhB;AACA,uBAAKO,QAAL,CAAc,EAAEL,gBAAF,EAAd;AACH,aAHkB,CAAnB;AAIH;;;sCAEaF,K,EAAO;AAAA,gBACTM,KADS,GAC6BN,KAD7B,CACTM,KADS;AAAA,gBACFE,gBADE,GAC6BR,KAD7B,CACFQ,gBADE;AAAA,gBACgBC,QADhB,GAC6BT,KAD7B,CACgBS,QADhB;;AAEjB,gBAAIP,UAAU,KAAd;AACA,gBAAMQ,iBAAiBJ,SAASA,MAAMK,QAAN,EAAT,IAA6BL,MAAMK,QAAN,GAAiBD,cAA9C,IAAgE,EAAvF;AACA,gBAAME,kBAAkBN,SAASA,MAAMK,QAAN,EAAT,IAA6BL,MAAMK,QAAN,GAAiBC,eAA9C,IAAiE,EAAzF;;AAEA,gBAAIF,cAAJ,EAAoB;AAChBR,0BAAUU,gBAAgBC,OAAhB,CAAwBJ,QAAxB,KAAqC,CAA/C;AACH,aAFD,MAEO;AACHP,0BAAUU,gBAAgBC,OAAhB,CAAwBJ,QAAxB,KAAqC,CAArC,IAA0CD,iBAAiBK,OAAjB,CAAyBJ,QAAzB,KAAsC,CAAhF,IAAqF,KAA/F;AACH;AACD,mBAAOP,OAAP;AACH;;;iCAEQ;AAAA,yBAC+B,KAAKF,KADpC;AAAA,gBACGc,IADH,UACGA,IADH;AAAA,gBACSL,QADT,UACSA,QADT;AAAA,gBACsBM,IADtB;;AAAA,gBAEGb,OAFH,GAEe,KAAKD,KAFpB,CAEGC,OAFH;;;AAIL,gBAAIY,SAAS,OAAb,EAAsB;AAClB,uBACI;AACI,6BAASZ,OADb;AAEI,2BAAOO;AAFX,mBAGQM,IAHR,EADJ;AAOH,aARD,MAQO;AACH,uBACI;AACI,6BAASb;AADb,mBAEQa,IAFR,EADJ;AAMH;AACJ;;;;EAhEqCjB,MAAMkB,S;;AAA3BjB,Y,CACVkB,S;kBADUlB,Y","file":"SelectionBox.js","sourcesContent":["import * as React from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport Checkbox from '../checkbox';\n\nimport Radio from '../radio';\n\nimport { SelectionBoxProps } from './interface';\n\nexport default class SelectionBox extends React.Component {\n    static propTypes = {...SelectionBoxProps};\n\n    constructor(props) {\n        super(props);\n\n        this.state = {\n            checked: this.getCheckState(props),\n        };\n        this.unsubscribe = () => {};\n    }\n\n    componentDidMount() {\n        this.subscribe();\n    }\n\n    componentWillUnmount() {\n        if (this.unsubscribe) {\n            this.unsubscribe();\n        }\n    }\n\n    subscribe() {\n        const { store } = this.props;\n        this.unsubscribe = store.subscribe(() => {\n            const checked = this.getCheckState(this.props);\n            this.setState({ checked });\n        });\n    }\n\n    getCheckState(props) {\n        const { store, defaultSelection, rowIndex } = props;\n        let checked = false;\n        const selectionDirty = store && store.getState() && store.getState().selectionDirty || '';\n        const selectedRowKeys = store && store.getState() && store.getState().selectedRowKeys || '';\n        \n        if (selectionDirty) {\n            checked = selectedRowKeys.indexOf(rowIndex) >= 0;\n        } else {\n            checked = selectedRowKeys.indexOf(rowIndex) >= 0 || defaultSelection.indexOf(rowIndex) >= 0 || false;\n        }\n        return checked;\n    }\n\n    render() {\n        const { type, rowIndex, ...rest } = this.props;\n        const { checked } = this.state;\n\n        if (type === 'radio') {\n            return (\n                <Radio\n                    checked={checked}\n                    value={rowIndex}\n                    {...rest}\n                />\n            );\n        } else {\n            return (\n                <Checkbox\n                    checked={checked}\n                    {...rest}\n                />\n            );\n        }\n    }\n}\n"]}