{"version":3,"sources":["../../components/table/util.js"],"names":["flatArray","treeMap","flatFilter","normalizeColumns","React","data","childrenName","result","loop","array","forEach","item","newItem","push","length","tree","mapper","map","node","index","extra","callback","reduce","acc","children","elements","columns","Children","element","isValidElement","column","props","key","type","__JC_TABLE_COLUMN_GROUP"],"mappings":";;;;;;;;QAEgBA,S,GAAAA,S;QAoBAC,O,GAAAA,O;QAaAC,U,GAAAA,U;QAaAC,gB,GAAAA,gB;;AAhDhB;;IAAYC,K;;;;;;AAEL,SAASJ,SAAT,GAAyD;AAAA,QAAtCK,IAAsC,uEAA/B,EAA+B;AAAA,QAA3BC,YAA2B,uEAAZ,UAAY;;AAC5D,QAAMC,SAAS,EAAf;AACA,QAAMC,OAAO,SAAPA,IAAO,CAACC,KAAD,EAAW;AACpBA,cAAMC,OAAN,CAAc,gBAAQ;AAClB,gBAAIC,KAAKL,YAAL,CAAJ,EAAwB;AACpB,oBAAMM,uBAAeD,IAAf,CAAN;AACA,uBAAOC,QAAQN,YAAR,CAAP;AACAC,uBAAOM,IAAP,CAAYD,OAAZ;AACA,oBAAID,KAAKL,YAAL,EAAmBQ,MAAnB,GAA4B,CAAhC,EAAmC;AACnCN,yBAAKG,KAAKL,YAAL,CAAL;AACC;AACJ,aAPD,MAOO;AACHC,uBAAOM,IAAP,CAAYF,IAAZ;AACH;AACJ,SAXD;AAYH,KAbD;AAcAH,SAAKH,IAAL;AACA,WAAOE,MAAP;AACH;;AAEM,SAASN,OAAT,GAA+D;AAAA,QAA9Cc,IAA8C,uEAAvC,EAAuC;AAAA,QAAnCC,MAAmC;AAAA,QAA3BV,YAA2B,uEAAZ,UAAY;;AAClE,WAAOS,KAAKE,GAAL,CAAS,UAACC,IAAD,EAAOC,KAAP,EAAiB;AAC7B,YAAMC,QAAQ,EAAd;AACA,YAAIF,KAAKZ,YAAL,CAAJ,EAAwB;AACpBc,kBAAMd,YAAN,IAAsBL,QAAQiB,KAAKZ,YAAL,CAAR,EAA4BU,MAA5B,EAAoCV,YAApC,CAAtB;AACH;AACD,4BACOU,OAAOE,IAAP,EAAaC,KAAb,CADP,EAEOC,KAFP;AAIH,KATM,CAAP;AAUH;;AAEM,SAASlB,UAAT,GAAyC;AAAA,QAArBa,IAAqB,uEAAd,EAAc;AAAA,QAAVM,QAAU;;AAC5C,WAAON,KAAKO,MAAL,CAAY,UAACC,GAAD,EAAML,IAAN,EAAe;AAC9B,YAAIG,SAASH,IAAT,CAAJ,EAAoB;AAChBK,gBAAIV,IAAJ,CAASK,IAAT;AACH;AACD,YAAIA,KAAKM,QAAT,EAAmB;AACf,gBAAMA,WAAWtB,WAAWgB,KAAKM,QAAhB,EAA0BH,QAA1B,CAAjB;AACAE,gBAAIV,IAAJ,+BAAYW,QAAZ;AACH;AACD,eAAOD,GAAP;AACH,KATM,EASJ,EATI,CAAP;AAUH;;AAEM,SAASpB,gBAAT,CAA0BsB,QAA1B,EAAoC;AACvC,QAAMC,UAAU,EAAhB;AACAtB,UAAMuB,QAAN,CAAejB,OAAf,CAAuBe,QAAvB,EAAiC,UAACG,OAAD,EAAa;AAC1C,YAAI,CAACxB,MAAMyB,cAAN,CAAqBD,OAArB,CAAL,EAAoC;AAChC;AACH;AACD,YAAME,sBACCF,QAAQG,KADT,CAAN;AAGA,YAAIH,QAAQI,GAAZ,EAAiB;AACbF,mBAAOE,GAAP,GAAaJ,QAAQI,GAArB;AACH;AACD,YAAIJ,QAAQK,IAAR,IAAiBL,QAAQK,IAAT,CAAeC,uBAAnC,EAA4D;AACxDJ,mBAAON,QAAP,GAAkBrB,iBAAiB2B,OAAON,QAAxB,CAAlB;AACH;AACDE,gBAAQb,IAAR,CAAaiB,MAAb;AACH,KAdD;AAeA,WAAOJ,OAAP;AACH","file":"util.js","sourcesContent":["import * as React from 'react';\n\nexport function flatArray(data = [], childrenName = 'children') {\n    const result = [];\n    const loop = (array) => {\n        array.forEach(item => {\n            if (item[childrenName]) {\n                const newItem = { ...item };\n                delete newItem[childrenName];\n                result.push(newItem);\n                if (item[childrenName].length > 0) {\n                loop(item[childrenName]);\n                }\n            } else {\n                result.push(item);\n            }\n        });\n    };\n    loop(data);\n    return result;\n}\n\nexport function treeMap(tree = [], mapper, childrenName = 'children') {\n    return tree.map((node, index) => {\n        const extra = {};\n        if (node[childrenName]) {\n            extra[childrenName] = treeMap(node[childrenName], mapper, childrenName);\n        }\n        return {\n            ...mapper(node, index),\n            ...extra\n        };\n    });\n}\n\nexport function flatFilter(tree = [], callback) {\n    return tree.reduce((acc, node) => {\n        if (callback(node)) {\n            acc.push(node);\n        }\n        if (node.children) {\n            const children = flatFilter(node.children, callback);\n            acc.push(...children);\n        }\n        return acc;\n    }, []);\n}\n\nexport function normalizeColumns(elements) {\n    const columns = [];\n    React.Children.forEach(elements, (element) => {\n        if (!React.isValidElement(element)) {\n            return;\n        }\n        const column = {\n            ...element.props,\n        };\n        if (element.key) {\n            column.key = element.key;\n        }\n        if (element.type && (element.type).__JC_TABLE_COLUMN_GROUP) {\n            column.children = normalizeColumns(column.children);\n        }\n        columns.push(column);\n    });\n    return columns;\n}\n"]}