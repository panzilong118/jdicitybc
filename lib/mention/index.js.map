{"version":3,"sources":["../../components/mention/index.js"],"names":["React","Mention","props","onSearchChange","value","prefix","defaultSearchChange","onChange","editorState","onFocus","ev","setState","focus","onBlur","mentionEle","_editor","focusEditor","mentionRef","ele","state","suggestions","undefined","nextProps","searchValue","toLowerCase","filteredSuggestions","filter","suggestion","type","indexOf","className","prefixCls","loading","placement","cls","notFoundContent","Component","getMentions","defaultProps","multiLines","Nav","toString","toContentState"],"mappings":"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","file":"index.js","sourcesContent":["/**\n * Created by gaoqingli on 2018/4/26.\n */\nimport * as React from 'react';\n\nimport RcMention, { Nav, toString, toEditorState, getMentions } from 'rc-editor-mention';\n\nimport classNames from 'classnames';\n\nimport shallowequal from 'shallowequal';\n\nimport Icon from '../icon';\n\nexport default class Mention extends React.Component {\n  static getMentions = getMentions;\n  static defaultProps = {\n      prefixCls: 'jc-mention',\n      notFoundContent: '无匹配结果，轻敲空格完成输入',\n      loading: false,\n      multiLines: false,\n      placement: 'bottom',\n  };\n  static Nav = Nav;\n  static toString = toString;\n  static toContentState = toEditorState;\n  constructor(props) {\n      super(props);\n      this.state = {\n          suggestions: props.suggestions,\n          focus: false,\n      };\n      this.mentionEle = undefined;\n  }\n\n  componentWillReceiveProps(nextProps) {\n      const { suggestions } = nextProps;\n      if (!shallowequal(suggestions, this.props.suggestions)) {\n          this.setState({\n              suggestions,\n          });\n      }\n  }\n\n  onSearchChange = (value, prefix) => {\n      if (this.props.onSearchChange) {\n          return this.props.onSearchChange(value, prefix);\n      }\n      return this.defaultSearchChange(value);\n  }\n\n  onChange = (editorState) => {\n      if (this.props.onChange) {\n          this.props.onChange(editorState);\n      }\n  }\n\n  defaultSearchChange(value) {\n      const searchValue = value.toLowerCase();\n      const filteredSuggestions = (this.props.suggestions || []).filter((suggestion) => {\n          if (suggestion.type && suggestion.type === Nav) {\n              return suggestion.props.value ? suggestion.props.value.toLowerCase().indexOf(searchValue) !== -1 : true;\n          }\n          return suggestion.toLowerCase().indexOf(searchValue) !== -1;\n      });\n      this.setState({ suggestions: filteredSuggestions, });\n  }\n\n  onFocus = (ev) => {\n      this.setState({\n          focus: true,\n      });\n      if (this.props.onFocus) {\n          this.props.onFocus(ev);\n      }\n  }\n  onBlur = (ev) => {\n      this.setState({\n          focus: false,\n      });\n      if (this.props.onBlur) {\n          this.props.onBlur(ev);\n      }\n  }\n  focus = () => {\n      this.mentionEle._editor.focusEditor();\n  }\n  mentionRef = (ele) => {\n      this.mentionEle = ele;\n  }\n  render() {\n      const { className = '', prefixCls, loading, placement } = this.props;\n      const { suggestions, focus } = this.state;\n      const cls = classNames(className, {\n          [`${prefixCls}-active`]: focus,\n          [`${prefixCls}-placement-top`]: placement === 'top',\n      });\n\n      const notFoundContent = loading ? <Icon type='loading' /> : this.props.notFoundContent;\n\n      return (\n          <RcMention\n              {...this.props}\n              className={cls}\n              ref={this.mentionRef}\n              onSearchChange={this.onSearchChange}\n              onChange={this.onChange}\n              onFocus={this.onFocus}\n              onBlur={this.onBlur}\n              suggestions={suggestions}\n              notFoundContent={notFoundContent}\n          />\n      );\n  }\n}\n"]}