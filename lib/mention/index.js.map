{"version":3,"sources":["../../components/mention/index.js"],"names":["React","Mention","props","onSearchChange","value","prefix","defaultSearchChange","onChange","editorState","onFocus","ev","setState","focus","onBlur","mentionEle","_editor","focusEditor","mentionRef","ele","state","suggestions","undefined","nextProps","searchValue","toLowerCase","filteredSuggestions","filter","suggestion","type","indexOf","className","prefixCls","loading","placement","cls","notFoundContent","Component","getMentions","defaultProps","multiLines","Nav","toString","toContentState"],"mappings":"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","file":"index.js","sourcesContent":["/**\r\n * Created by gaoqingli on 2018/4/26.\r\n */\r\nimport * as React from 'react';\r\n\r\nimport RcMention, { Nav, toString, toEditorState, getMentions } from 'rc-editor-mention';\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport shallowequal from 'shallowequal';\r\n\r\nimport Icon from '../icon';\r\n\r\nexport default class Mention extends React.Component {\r\n  static getMentions = getMentions;\r\n  static defaultProps = {\r\n      prefixCls: 'jc-mention',\r\n      notFoundContent: '无匹配结果，轻敲空格完成输入',\r\n      loading: false,\r\n      multiLines: false,\r\n      placement: 'bottom',\r\n  };\r\n  static Nav = Nav;\r\n  static toString = toString;\r\n  static toContentState = toEditorState;\r\n  constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n          suggestions: props.suggestions,\r\n          focus: false,\r\n      };\r\n      this.mentionEle = undefined;\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n      const { suggestions } = nextProps;\r\n      if (!shallowequal(suggestions, this.props.suggestions)) {\r\n          this.setState({\r\n              suggestions,\r\n          });\r\n      }\r\n  }\r\n\r\n  onSearchChange = (value, prefix) => {\r\n      if (this.props.onSearchChange) {\r\n          return this.props.onSearchChange(value, prefix);\r\n      }\r\n      return this.defaultSearchChange(value);\r\n  }\r\n\r\n  onChange = (editorState) => {\r\n      if (this.props.onChange) {\r\n          this.props.onChange(editorState);\r\n      }\r\n  }\r\n\r\n  defaultSearchChange(value) {\r\n      const searchValue = value.toLowerCase();\r\n      const filteredSuggestions = (this.props.suggestions || []).filter((suggestion) => {\r\n          if (suggestion.type && suggestion.type === Nav) {\r\n              return suggestion.props.value ? suggestion.props.value.toLowerCase().indexOf(searchValue) !== -1 : true;\r\n          }\r\n          return suggestion.toLowerCase().indexOf(searchValue) !== -1;\r\n      });\r\n      this.setState({ suggestions: filteredSuggestions, });\r\n  }\r\n\r\n  onFocus = (ev) => {\r\n      this.setState({\r\n          focus: true,\r\n      });\r\n      if (this.props.onFocus) {\r\n          this.props.onFocus(ev);\r\n      }\r\n  }\r\n  onBlur = (ev) => {\r\n      this.setState({\r\n          focus: false,\r\n      });\r\n      if (this.props.onBlur) {\r\n          this.props.onBlur(ev);\r\n      }\r\n  }\r\n  focus = () => {\r\n      this.mentionEle._editor.focusEditor();\r\n  }\r\n  mentionRef = (ele) => {\r\n      this.mentionEle = ele;\r\n  }\r\n  render() {\r\n      const { className = '', prefixCls, loading, placement } = this.props;\r\n      const { suggestions, focus } = this.state;\r\n      const cls = classNames(className, {\r\n          [`${prefixCls}-active`]: focus,\r\n          [`${prefixCls}-placement-top`]: placement === 'top',\r\n      });\r\n\r\n      const notFoundContent = loading ? <Icon type='loading' /> : this.props.notFoundContent;\r\n\r\n      return (\r\n          <RcMention\r\n              {...this.props}\r\n              className={cls}\r\n              ref={this.mentionRef}\r\n              onSearchChange={this.onSearchChange}\r\n              onChange={this.onChange}\r\n              onFocus={this.onFocus}\r\n              onBlur={this.onBlur}\r\n              suggestions={suggestions}\r\n              notFoundContent={notFoundContent}\r\n          />\r\n      );\r\n  }\r\n}\r\n"]}