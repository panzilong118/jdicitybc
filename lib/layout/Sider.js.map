{"version":3,"sources":["../../components/layout/Sider.js"],"names":["window","matchMediaPolyfill","mediaQuery","media","matches","addListener","removeListener","matchMedia","mediaArray","mediaDS","xs","sm","md","lg","xl","xxl","Sider","props","responsiveCollapse","mql","setState","collapsed","handleCallback","toggleCollapse","prevState","type","onCollapse","initTriggerComponent","prefixCls","trigger","reverseArrow","triggerIcon","triggerClassName","divCls","iconType","state","defaultCollapsed","matchMediaFun","breakpoint","mediaQueryList","siderCollapsed","collapsedWidth","context","siderHandler","plus","nextProps","minus","className","style","width","collapsible","parseInt","Number","isNaN","siderCls","siderWidth","siderStyle","flex","otherProps","children","Component","defaultProps","propTypes","string","object","oneOfType","number","oneOf","bool","node","func","contextTypes","childContextTypes"],"mappings":"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","file":"Sider.js","sourcesContent":["import React from 'react';\r\n\r\nimport PropTypes from 'prop-types';\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport omit from 'omit.js';\r\n\r\nimport Icon from '../icon';\r\n\r\nif (typeof window !== 'undefined') {\r\n    const matchMediaPolyfill = (mediaQuery) => {\r\n        return {\r\n            media: mediaQuery,\r\n            matches: false,\r\n            addListener() {\r\n            },\r\n            removeListener() {\r\n            }\r\n        };\r\n    };\r\n    window.matchMedia = window.matchMedia || matchMediaPolyfill;\r\n}\r\n\r\nconst mediaArray = ['xs', 'sm', 'md', 'lg', 'xl', 'xxl'];\r\nconst mediaDS = {\r\n    xs: '480px',\r\n    sm: '576px',\r\n    md: '768px',\r\n    lg: '992px',\r\n    xl: '1200px',\r\n    xxl: '1600px',\r\n};\r\n\r\nexport default class Sider extends React.Component {\r\n    // 默认props\r\n    static defaultProps = {\r\n        prefixCls: 'jc-layout-sider',\r\n        className: '',\r\n        triggerClassName: '',\r\n        style: {},\r\n        width: 200,\r\n        collapsedWidth: 65, // 收缩宽度，设置为 0 会出现特殊Trigger\r\n        collapsible: false, // 是否可收起\r\n        defaultCollapsed: false, // 是否默认收起\r\n        reverseArrow: false // 折叠按钮是否反向，当Sider在右边时可以使用\r\n    };\r\n\r\n    // props类型\r\n    static propTypes = {\r\n        prefixCls: PropTypes.string, // class前缀\r\n        className: PropTypes.string, // Sider class\r\n        triggerClassName: PropTypes.string, // trigger class\r\n        style: PropTypes.object,\r\n        width: PropTypes.oneOfType([\r\n            PropTypes.string,\r\n            PropTypes.number\r\n        ]),\r\n        breakpoint: PropTypes.oneOf(mediaArray),\r\n        collapsed: PropTypes.bool,\r\n        collapsedWidth: PropTypes.oneOfType([\r\n            PropTypes.string,\r\n            PropTypes.number\r\n        ]),\r\n        collapsible: PropTypes.bool,\r\n        defaultCollapsed: PropTypes.bool,\r\n        reverseArrow: PropTypes.bool,\r\n        trigger: PropTypes.node,\r\n        onCollapse: PropTypes.func\r\n    };\r\n\r\n    /**\r\n     * 获取父元素传递的参数\r\n     * @variable {object} siderHandler 父组件处理Sider的对象\r\n     */\r\n    static contextTypes = {\r\n        siderHandler: PropTypes.object,\r\n    };\r\n\r\n    // 向下(子组件)传递参数, eg: Menu接收参数,做出响应\r\n    static childContextTypes = {\r\n        siderCollapsed: PropTypes.bool,\r\n        collapsedWidth: PropTypes.oneOfType([\r\n            PropTypes.string,\r\n            PropTypes.number\r\n        ])\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            collapsed: props.collapsed || props.defaultCollapsed\r\n        };\r\n        // 创建MediaQueryList对象\r\n        let matchMediaFun;\r\n        if (typeof window !== 'undefined') {\r\n            matchMediaFun = window.matchMedia || {};\r\n        }\r\n        if (props.breakpoint && matchMediaFun) {\r\n            this.mediaQueryList = matchMediaFun(`(max-width: ${mediaDS[props.breakpoint]})`);\r\n        }\r\n    }\r\n \r\n    /**\r\n     * 向下(子组件)传递参数, 例如：Menu接收参数, 做出响应\r\n     * @return {boolean} siderCollapsed Sider的折叠状态\r\n     * @return {(string | number)} collapsedWidth 面板折叠时宽度\r\n     */\r\n    getChildContext() {\r\n        return {\r\n            siderCollapsed: this.state.collapsed,\r\n            collapsedWidth: this.props.collapsedWidth\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        // 父组件计算Sider组件个数 +1\r\n        if (this.context.siderHandler) {\r\n            this.context.siderHandler.plus();\r\n        }\r\n        // 添加MediaQueryList监听事件\r\n        if (this.mediaQueryList) {\r\n            this.mediaQueryList.addListener(this.responsiveCollapse);\r\n        }\r\n    }\r\n\r\n    componentWillReceiveProps(nextProps) {\r\n        // 重新设置折叠状态\r\n        if ('collapsed' in nextProps) {\r\n            this.setState({\r\n                collapsed: nextProps.collapsed\r\n            });\r\n        }\r\n    }\r\n    \r\n    componentWillUnmount() {\r\n        // 父组件计算Sider组件个数 -1\r\n        if (this.context.siderHandler) {\r\n            this.context.siderHandler.minus();\r\n        }\r\n        // 移除MediaQueryList监听事件\r\n        if (this.mediaQueryList) {\r\n            this.mediaQueryList.removeListener(this.responsiveCollapse);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 处理响应式：满足临界条件，折叠，否则展开\r\n     * @param {MediaQueryList} mql\r\n     */\r\n    responsiveCollapse = (mql) => {\r\n        this.setState({\r\n            collapsed: mql.matches\r\n        });\r\n        this.handleCallback(mql.matches, 'responsive');\r\n    }\r\n    \r\n    /**\r\n     * 处理折叠click事件\r\n     * 此处调用上一次的state，因此使用回调\r\n     */\r\n    toggleCollapse = () => {\r\n        this.setState((prevState) => {\r\n            this.handleCallback(!prevState.collapsed, 'click');\r\n            return {\r\n                collapsed: !prevState.collapsed\r\n            };\r\n        });\r\n    }\r\n\r\n    /**\r\n     * 处理用户自定义的回调函数\r\n     * 在执行click or responsive时调用\r\n     * @param {boolean} collapsed : 标识Sider的折叠true和展开状态\r\n     * @param {string} type : 标识目前是哪类操作, 'click' or 'responsive'\r\n     */\r\n    handleCallback = (collapsed, type) => {\r\n        const { onCollapse } = this.props;\r\n        if (onCollapse) {\r\n            onCollapse(collapsed, type);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 渲染折叠展开组件(用Trigger指代)\r\n     * 根据用户传递的reverseArrow参数，设置Trigger的方向\r\n     * @variable {boolean} reverseArrow：是否使用反向箭头\r\n     * @variable {string} triggerIcon: 用户设置的icon，用来替换默认icon，携带默认Icon的水平翻转效果\r\n     * 优先使用triggerIcon，否则，根据reverseArrow判断使用默认icon\r\n     */\r\n    initTriggerComponent = () => {\r\n        const { prefixCls, trigger, reverseArrow, triggerIcon, triggerClassName } = this.props;\r\n        const divCls = classNames(`${prefixCls}-trigger`, triggerClassName, {\r\n            [`${prefixCls}-trigger-reverse`]: reverseArrow\r\n        });\r\n        let iconType = 'right';\r\n        // 优先使用triggerIcon，否则，根据reverseArrow判断使用默认icon\r\n        if (triggerIcon) {\r\n            iconType = triggerIcon;\r\n        } else {\r\n            iconType = reverseArrow ? 'right' : 'left';\r\n        }\r\n        return [\r\n            <div className={divCls} onClick={this.toggleCollapse} >\r\n                { trigger || <Icon type={`${iconType}`} className={`${prefixCls}-trigger-icon`} /> }\r\n            </div>\r\n        ];\r\n    }\r\n\r\n    render() {\r\n        const { prefixCls, className, style, width, collapsible } = this.props;\r\n\r\n        // 若折叠宽度不是数字，使用默认折叠宽度\r\n        let collapsedWidth = parseInt(this.props.collapsedWidth, 10);\r\n        collapsedWidth = Number.isNaN(collapsedWidth) ? this.state.defaultCollapsed : collapsedWidth;\r\n\r\n        // Sider class\r\n        const siderCls = classNames(className, prefixCls, {\r\n            [`${prefixCls}-collapsed-zero`]: collapsedWidth === 0,\r\n            [`${prefixCls}-collapsed`]: this.state.collapsed\r\n        });\r\n\r\n        // Sider展示宽度：折叠 or 展开\r\n        const siderWidth = this.state.collapsed ? `${collapsedWidth}px` : `${width}px`;\r\n        const siderStyle = {\r\n            ...style,\r\n            width: siderWidth,\r\n            flex: `0 0 ${siderWidth}`\r\n        };\r\n\r\n        const otherProps = omit(this.props, [\r\n            'prefixCls',\r\n            'className',\r\n            'triggerClassName',\r\n            'style',\r\n            'width',\r\n            'breakpoint',\r\n            'collapsed',\r\n            'collapsedWidth',\r\n            'collapsible',\r\n            'defaultCollapsed',\r\n            'trigger',\r\n            'reverseArrow',\r\n            'onCollapse'\r\n        ]);\r\n\r\n        return (\r\n            <div className={siderCls} style={siderStyle} {...otherProps}>\r\n                <div className={`${prefixCls}-content`}>{this.props.children}</div>\r\n                {collapsible ? this.initTriggerComponent() : null}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]}