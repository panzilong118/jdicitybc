{"version":3,"sources":["../../components/layout/Sider.js"],"names":["window","matchMediaPolyfill","mediaQuery","media","matches","addListener","removeListener","matchMedia","mediaArray","mediaDS","xs","sm","md","lg","xl","xxl","Sider","props","responsiveCollapse","mql","setState","collapsed","handleCallback","toggleCollapse","prevState","type","onCollapse","initTriggerComponent","prefixCls","trigger","reverseArrow","triggerIcon","triggerClassName","divCls","iconType","state","defaultCollapsed","matchMediaFun","breakpoint","mediaQueryList","siderCollapsed","collapsedWidth","context","siderHandler","plus","nextProps","minus","className","style","width","collapsible","parseInt","Number","isNaN","siderCls","siderWidth","siderStyle","flex","otherProps","children","Component","defaultProps","propTypes","string","object","oneOfType","number","oneOf","bool","node","func","contextTypes","childContextTypes"],"mappings":"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","file":"Sider.js","sourcesContent":["import React from 'react';\n\nimport PropTypes from 'prop-types';\n\nimport classNames from 'classnames';\n\nimport omit from 'omit.js';\n\nimport Icon from '../icon';\n\nif (typeof window !== 'undefined') {\n    const matchMediaPolyfill = (mediaQuery) => {\n        return {\n            media: mediaQuery,\n            matches: false,\n            addListener() {\n            },\n            removeListener() {\n            }\n        };\n    };\n    window.matchMedia = window.matchMedia || matchMediaPolyfill;\n}\n\nconst mediaArray = ['xs', 'sm', 'md', 'lg', 'xl', 'xxl'];\nconst mediaDS = {\n    xs: '480px',\n    sm: '576px',\n    md: '768px',\n    lg: '992px',\n    xl: '1200px',\n    xxl: '1600px',\n};\n\nexport default class Sider extends React.Component {\n    // 默认props\n    static defaultProps = {\n        prefixCls: 'jc-layout-sider',\n        className: '',\n        triggerClassName: '',\n        style: {},\n        width: 200,\n        collapsedWidth: 65, // 收缩宽度，设置为 0 会出现特殊Trigger\n        collapsible: false, // 是否可收起\n        defaultCollapsed: false, // 是否默认收起\n        reverseArrow: false // 折叠按钮是否反向，当Sider在右边时可以使用\n    };\n\n    // props类型\n    static propTypes = {\n        prefixCls: PropTypes.string, // class前缀\n        className: PropTypes.string, // Sider class\n        triggerClassName: PropTypes.string, // trigger class\n        style: PropTypes.object,\n        width: PropTypes.oneOfType([\n            PropTypes.string,\n            PropTypes.number\n        ]),\n        breakpoint: PropTypes.oneOf(mediaArray),\n        collapsed: PropTypes.bool,\n        collapsedWidth: PropTypes.oneOfType([\n            PropTypes.string,\n            PropTypes.number\n        ]),\n        collapsible: PropTypes.bool,\n        defaultCollapsed: PropTypes.bool,\n        reverseArrow: PropTypes.bool,\n        trigger: PropTypes.node,\n        onCollapse: PropTypes.func\n    };\n\n    /**\n     * 获取父元素传递的参数\n     * @variable {object} siderHandler 父组件处理Sider的对象\n     */\n    static contextTypes = {\n        siderHandler: PropTypes.object,\n    };\n\n    // 向下(子组件)传递参数, eg: Menu接收参数,做出响应\n    static childContextTypes = {\n        siderCollapsed: PropTypes.bool,\n        collapsedWidth: PropTypes.oneOfType([\n            PropTypes.string,\n            PropTypes.number\n        ])\n    };\n\n    constructor(props) {\n        super(props);\n        this.state = {\n            collapsed: props.collapsed || props.defaultCollapsed\n        };\n        // 创建MediaQueryList对象\n        let matchMediaFun;\n        if (typeof window !== 'undefined') {\n            matchMediaFun = window.matchMedia || {};\n        }\n        if (props.breakpoint && matchMediaFun) {\n            this.mediaQueryList = matchMediaFun(`(max-width: ${mediaDS[props.breakpoint]})`);\n        }\n    }\n \n    /**\n     * 向下(子组件)传递参数, 例如：Menu接收参数, 做出响应\n     * @return {boolean} siderCollapsed Sider的折叠状态\n     * @return {(string | number)} collapsedWidth 面板折叠时宽度\n     */\n    getChildContext() {\n        return {\n            siderCollapsed: this.state.collapsed,\n            collapsedWidth: this.props.collapsedWidth\n        };\n    }\n\n    componentDidMount() {\n        // 父组件计算Sider组件个数 +1\n        if (this.context.siderHandler) {\n            this.context.siderHandler.plus();\n        }\n        // 添加MediaQueryList监听事件\n        if (this.mediaQueryList) {\n            this.mediaQueryList.addListener(this.responsiveCollapse);\n        }\n    }\n\n    componentWillReceiveProps(nextProps) {\n        // 重新设置折叠状态\n        if ('collapsed' in nextProps) {\n            this.setState({\n                collapsed: nextProps.collapsed\n            });\n        }\n    }\n    \n    componentWillUnmount() {\n        // 父组件计算Sider组件个数 -1\n        if (this.context.siderHandler) {\n            this.context.siderHandler.minus();\n        }\n        // 移除MediaQueryList监听事件\n        if (this.mediaQueryList) {\n            this.mediaQueryList.removeListener(this.responsiveCollapse);\n        }\n    }\n\n    /**\n     * 处理响应式：满足临界条件，折叠，否则展开\n     * @param {MediaQueryList} mql\n     */\n    responsiveCollapse = (mql) => {\n        this.setState({\n            collapsed: mql.matches\n        });\n        this.handleCallback(mql.matches, 'responsive');\n    }\n    \n    /**\n     * 处理折叠click事件\n     * 此处调用上一次的state，因此使用回调\n     */\n    toggleCollapse = () => {\n        this.setState((prevState) => {\n            this.handleCallback(!prevState.collapsed, 'click');\n            return {\n                collapsed: !prevState.collapsed\n            };\n        });\n    }\n\n    /**\n     * 处理用户自定义的回调函数\n     * 在执行click or responsive时调用\n     * @param {boolean} collapsed : 标识Sider的折叠true和展开状态\n     * @param {string} type : 标识目前是哪类操作, 'click' or 'responsive'\n     */\n    handleCallback = (collapsed, type) => {\n        const { onCollapse } = this.props;\n        if (onCollapse) {\n            onCollapse(collapsed, type);\n        }\n    }\n\n    /**\n     * 渲染折叠展开组件(用Trigger指代)\n     * 根据用户传递的reverseArrow参数，设置Trigger的方向\n     * @variable {boolean} reverseArrow：是否使用反向箭头\n     * @variable {string} triggerIcon: 用户设置的icon，用来替换默认icon，携带默认Icon的水平翻转效果\n     * 优先使用triggerIcon，否则，根据reverseArrow判断使用默认icon\n     */\n    initTriggerComponent = () => {\n        const { prefixCls, trigger, reverseArrow, triggerIcon, triggerClassName } = this.props;\n        const divCls = classNames(`${prefixCls}-trigger`, triggerClassName, {\n            [`${prefixCls}-trigger-reverse`]: reverseArrow\n        });\n        let iconType = 'right';\n        // 优先使用triggerIcon，否则，根据reverseArrow判断使用默认icon\n        if (triggerIcon) {\n            iconType = triggerIcon;\n        } else {\n            iconType = reverseArrow ? 'right' : 'left';\n        }\n        return [\n            <div className={divCls} onClick={this.toggleCollapse} >\n                { trigger || <Icon type={`${iconType}`} className={`${prefixCls}-trigger-icon`} /> }\n            </div>\n        ];\n    }\n\n    render() {\n        const { prefixCls, className, style, width, collapsible } = this.props;\n\n        // 若折叠宽度不是数字，使用默认折叠宽度\n        let collapsedWidth = parseInt(this.props.collapsedWidth, 10);\n        collapsedWidth = Number.isNaN(collapsedWidth) ? this.state.defaultCollapsed : collapsedWidth;\n\n        // Sider class\n        const siderCls = classNames(className, prefixCls, {\n            [`${prefixCls}-collapsed-zero`]: collapsedWidth === 0,\n            [`${prefixCls}-collapsed`]: this.state.collapsed\n        });\n\n        // Sider展示宽度：折叠 or 展开\n        const siderWidth = this.state.collapsed ? `${collapsedWidth}px` : `${width}px`;\n        const siderStyle = {\n            ...style,\n            width: siderWidth,\n            flex: `0 0 ${siderWidth}`\n        };\n\n        const otherProps = omit(this.props, [\n            'prefixCls',\n            'className',\n            'triggerClassName',\n            'style',\n            'width',\n            'breakpoint',\n            'collapsed',\n            'collapsedWidth',\n            'collapsible',\n            'defaultCollapsed',\n            'trigger',\n            'reverseArrow',\n            'onCollapse'\n        ]);\n\n        return (\n            <div className={siderCls} style={siderStyle} {...otherProps}>\n                <div className={`${prefixCls}-content`}>{this.props.children}</div>\n                {collapsible ? this.initTriggerComponent() : null}\n            </div>\n        );\n    }\n}\n"]}