{"version":3,"sources":["../../components/modal/Modal.js"],"names":["React","mousePosition","mousePositionEventBinded","Modal","handleCancel","e","onCancel","props","handleOk","onOk","renderFooter","locale","okText","okType","cancelText","confirmLoading","document","documentElement","x","pageX","y","pageY","setTimeout","footer","visible","defaultFooter","undefined","Component","defaultProps","prefixCls","width","transitionName","maskTransitionName","propTypes","oneOfType","number","oneOf","bool","string","func","node","align","object","title","closable","maskClosable","destroyOnClose","wrapClassName","className","zIndex","mask","keyboard","iconClassName","iconType","okCancel","type"],"mappings":";;;;;;;;;;;AAAA;;IAAYA,K;;AACZ;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;AAEA,IAAIC,sBAAJ;AACA,IAAIC,iCAAJ;;IACqBC,K;;;;;;;;;;;;;;wLAmBjBC,Y,GAAe,UAACC,CAAD,EAAO;AAAA,gBACVC,QADU,GACG,MAAKC,KADR,CACVD,QADU;;AAElB,gBAAIA,QAAJ,EAAc;AACVA,yBAASD,CAAT;AACH;AACJ,S,QAEDG,Q,GAAW,UAACH,CAAD,EAAO;AAAA,gBACNI,IADM,GACG,MAAKF,KADR,CACNE,IADM;;AAEd,gBAAIA,IAAJ,EAAU;AACNA,qBAAKJ,CAAL;AACH;AACJ,S,QACDK,Y,GAAe,UAACC,MAAD,EAAY;AAAA,8BACgC,MAAKJ,KADrC;AAAA,gBACfK,MADe,eACfA,MADe;AAAA,gBACPC,MADO,eACPA,MADO;AAAA,gBACCC,UADD,eACCA,UADD;AAAA,gBACaC,cADb,eACaA,cADb;;AAEvB,mBACI;AAAA;AAAA;AACI;AAAA;AAAA;AACI,iCAAS,MAAKX;AADlB;AAGKU,kCAAcH,OAAOG;AAH1B,iBADJ;AAMI;AAAA;AAAA;AACI,8BAAMD,MADV;AAEI,iCAASE,cAFb;AAGI,iCAAS,MAAKP;AAHlB;AAKKI,8BAAUD,OAAOC;AALtB;AANJ,aADJ;AAgBH,S;;;;;4CAjDmB;AAChB,gBAAIV,wBAAJ,EAA8B;AAC1B;AACH;AACD;AACA,4CAAiBc,SAASC,eAA1B,EAA2C,OAA3C,EAAoD,UAACZ,CAAD,EAAO;AACvDJ,gCAAgB;AACZiB,uBAAGb,EAAEc,KADO;AAEZC,uBAAGf,EAAEgB;AAFO,iBAAhB;AAIA;AACA;AACA;AACAC,2BAAW;AAAA,2BAAMrB,aAAN;AAAA,iBAAX,EAAgC,GAAhC;AACH,aATD;AAUAC,uCAA2B,IAA3B;AACH;;;iCAmCQ;AAAA,yBACuB,KAAKK,KAD5B;AAAA,gBACGgB,MADH,UACGA,MADH;AAAA,gBACWC,OADX,UACWA,OADX;;;AAGL,gBAAMC,gBACF;AAAA;AAAA;AACI,mCAAc,OADlB;AAEI,mCAAe;AAFnB;AAIK,qBAAKf;AAJV,aADJ;;AASA,mBACI,qDACQ,KAAKH,KADb;AAEI,wBAAQgB,WAAWG,SAAX,GAAuBD,aAAvB,GAAuCF,MAFnD;AAGI,yBAASC,OAHb;AAII,+BAAevB,aAJnB;AAKI,yBAAS,KAAKG;AALlB,eADJ;AASH;;;;EAzE8BJ,MAAM2B,S;;kBAApBxB,K;;;AA4ErBA,MAAMyB,YAAN,GAAqB;AACjBC,eAAW,UADM;AAEjBC,WAAO,GAFU;AAGjBC,oBAAgB,MAHC;AAIjBC,wBAAoB,MAJH;AAKjBjB,oBAAgB,KALC;AAMjBS,aAAS,KANQ;AAOjBX,YAAQ;;AAPS,CAArB;;AAWAV,MAAM8B,SAAN,GAAkB;AACdhC,mBAAe,oBAAUiC,SAAV,CAAoB,CAAC,oBAAUC,MAAX,EAAmB,oBAAUC,KAAV,CAAgB,CAAC,IAAD,CAAhB,CAAnB,CAApB,CADD;AAEdlC,8BAA0B,oBAAUmC,IAFtB;AAGdR,eAAW,oBAAUS,MAHP;AAId7B,UAAM,oBAAU8B,IAJF;AAKdjC,cAAU,oBAAUiC,IALN;AAMd3B,YAAQ,oBAAU4B,IANJ;AAOd1B,gBAAY,oBAAU0B,IAPR;AAQdV,WAAO,oBAAUI,SAAV,CAAoB,CAAC,oBAAUC,MAAX,EAAmB,oBAAUG,MAA7B,CAApB,CARO;AASdvB,oBAAgB,oBAAUsB,IATZ;AAUdb,aAAS,oBAAUa,IAVL;AAWdI,WAAO,oBAAUC,MAXH;AAYdnB,YAAQ,oBAAUiB,IAZJ;AAadG,WAAO,oBAAUH,IAbH;AAcdI,cAAU,oBAAUP,IAdN;AAedQ,kBAAc,oBAAUR,IAfV;AAgBdS,oBAAgB,oBAAUT,IAhBZ;AAiBdU,mBAAe,oBAAUT,MAjBX;AAkBdN,wBAAoB,oBAAUM,MAlBhB;AAmBdP,oBAAgB,oBAAUO,MAnBZ;AAoBdU,eAAW,oBAAUV,MApBP;AAqBdW,YAAQ,oBAAUd,MArBJ;AAsBde,UAAM,oBAAUb,IAtBF;AAuBdc,cAAU,oBAAUd,IAvBN;AAwBde,mBAAe,oBAAUd,MAxBX;AAyBde,cAAU,oBAAUf,MAzBN;AA0BdgB,cAAU,oBAAUjB,IA1BN;AA2BdkB,UAAM,oBAAUjB,MA3BF;AA4BdzB,YAAQ,oBAAUyB;AA5BJ,CAAlB","file":"Modal.js","sourcesContent":["import * as React from 'react';\r\nimport Dialog from 'rc-dialog';\r\nimport PropTypes from 'prop-types';\r\nimport addEventListener from 'rc-util/lib/Dom/addEventListener';\r\nimport Button from '../button';\r\nimport LocaleReceiver from '../locale-provider/LocaleReceiver';\r\nimport { getConfirmLocale } from './locale';\r\n\r\nlet mousePosition;\r\nlet mousePositionEventBinded;\r\nexport default class Modal extends React.Component {\r\n    componentDidMount() {\r\n        if (mousePositionEventBinded) {\r\n            return;\r\n        }\r\n        // 只有点击事件支持从鼠标位置动画展开\r\n        addEventListener(document.documentElement, 'click', (e) => {\r\n            mousePosition = {\r\n                x: e.pageX,\r\n                y: e.pageY,\r\n            };\r\n            // 100ms 内发生过点击事件，则从点击位置动画展示\r\n            // 否则直接 zoom 展示\r\n            // 这样可以兼容非点击方式展开\r\n            setTimeout(() => mousePosition, 100);\r\n        });\r\n        mousePositionEventBinded = true;\r\n    }\r\n\r\n    handleCancel = (e) => {\r\n        const { onCancel } = this.props;\r\n        if (onCancel) {\r\n            onCancel(e);\r\n        }\r\n    }\r\n\r\n    handleOk = (e) => {\r\n        const { onOk } = this.props;\r\n        if (onOk) {\r\n            onOk(e);\r\n        }\r\n    }\r\n    renderFooter = (locale) => {\r\n        const { okText, okType, cancelText, confirmLoading } = this.props;\r\n        return (\r\n            <div>\r\n                <Button\r\n                    onClick={this.handleCancel}\r\n                >\r\n                    {cancelText || locale.cancelText}\r\n                </Button>\r\n                <Button\r\n                    type={okType}\r\n                    loading={confirmLoading}\r\n                    onClick={this.handleOk}\r\n                >\r\n                    {okText || locale.okText}\r\n                </Button>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const { footer, visible } = this.props;\r\n\r\n        const defaultFooter = (\r\n            <LocaleReceiver\r\n                componentName='Modal'\r\n                defaultLocale={getConfirmLocale()}\r\n            >\r\n                {this.renderFooter}\r\n            </LocaleReceiver>\r\n        );\r\n\r\n        return (\r\n            <Dialog\r\n                {...this.props}\r\n                footer={footer === undefined ? defaultFooter : footer}\r\n                visible={visible}\r\n                mousePosition={mousePosition}\r\n                onClose={this.handleCancel}\r\n            />\r\n        );\r\n    }\r\n}\r\n\r\nModal.defaultProps = {\r\n    prefixCls: 'jc-modal',\r\n    width: 520,\r\n    transitionName: 'zoom',\r\n    maskTransitionName: 'fade',\r\n    confirmLoading: false,\r\n    visible: false,\r\n    okType: 'primary',\r\n\r\n};\r\n\r\nModal.propTypes = {\r\n    mousePosition: PropTypes.oneOfType([PropTypes.number, PropTypes.oneOf([null])]),\r\n    mousePositionEventBinded: PropTypes.bool,\r\n    prefixCls: PropTypes.string,\r\n    onOk: PropTypes.func,\r\n    onCancel: PropTypes.func,\r\n    okText: PropTypes.node,\r\n    cancelText: PropTypes.node,\r\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\r\n    confirmLoading: PropTypes.bool,\r\n    visible: PropTypes.bool,\r\n    align: PropTypes.object,\r\n    footer: PropTypes.node,\r\n    title: PropTypes.node,\r\n    closable: PropTypes.bool,\r\n    maskClosable: PropTypes.bool,\r\n    destroyOnClose: PropTypes.bool,\r\n    wrapClassName: PropTypes.string,\r\n    maskTransitionName: PropTypes.string,\r\n    transitionName: PropTypes.string,\r\n    className: PropTypes.string,\r\n    zIndex: PropTypes.number,\r\n    mask: PropTypes.bool,\r\n    keyboard: PropTypes.bool,\r\n    iconClassName: PropTypes.string,\r\n    iconType: PropTypes.string,\r\n    okCancel: PropTypes.bool,\r\n    type: PropTypes.string,\r\n    okType: PropTypes.string,\r\n};\r\n"]}