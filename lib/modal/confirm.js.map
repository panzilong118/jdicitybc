{"version":3,"sources":["../../components/modal/confirm.js"],"names":["confirm","React","ReactDOM","IS_REACT_16","createPortal","ConfirmDialog","props","onCancel","onOk","close","zIndex","afterClose","visible","keyboard","iconType","okType","prefixCls","okCancel","width","style","maskClosable","undefined","runtimeLocale","okText","justOkText","cancelText","classString","type","className","cancelButton","bind","triggerCancel","title","content","config","div","document","createElement","body","appendChild","destroy","unmountResult","unmountComponentAtNode","parentNode","removeChild","args","length","some","param","render","defaultProps","transitionName","maskTransitionName","confirmLoading","propTypes","mousePosition","oneOfType","number","oneOf","mousePositionEventBinded","bool","string","func","node","align","object","footer","closable","destroyOnClose","wrapClassName","mask","iconClassName"],"mappings":"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","file":"confirm.js","sourcesContent":["import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport Icon from '../icon';\nimport Dialog from './Modal';\nimport ActionButton from './ActionButton';\nimport { getConfirmLocale } from './locale';\n\n\nconst IS_REACT_16 = !!ReactDOM.createPortal;\n\nconst ConfirmDialog = (props) => {\n    const { onCancel, onOk, close, zIndex, afterClose, visible, keyboard } = props;\n    const iconType = props.iconType || 'question-circle';\n    const okType = props.okType || 'primary';\n    const prefixCls = props.prefixCls || 'jc-confirm';\n    // 默认为 true，保持向下兼容\n    const okCancel = ('okCancel' in props) ? props.okCancel : true;\n    const width = props.width || 416;\n    const style = props.style || {};\n    // 默认为 false，保持旧版默认行为\n    const maskClosable = props.maskClosable === undefined ? false : props.maskClosable;\n    const runtimeLocale = getConfirmLocale();\n    const okText = props.okText ||\n        (okCancel ? runtimeLocale.okText : runtimeLocale.justOkText);\n    const cancelText = props.cancelText || runtimeLocale.cancelText;\n\n    const classString = classNames(\n        prefixCls,\n        `${prefixCls}-${props.type}`,\n        props.className,\n    );\n\n    const cancelButton = okCancel && (\n        <ActionButton actionFn={onCancel} closeModal={close}>\n            {cancelText}\n        </ActionButton>\n    );\n\n    return (\n        <Dialog\n            className={classString}\n            onCancel={close.bind(this, { triggerCancel: true })}\n            visible={visible}\n            title=''\n            transitionName='zoom'\n            footer=''\n            maskTransitionName='fade'\n            maskClosable={maskClosable}\n            style={style}\n            width={width}\n            zIndex={zIndex}\n            afterClose={afterClose}\n            keyboard={keyboard}\n        >\n            <div className={`${prefixCls}-body-wrapper`}>\n                <div className={`${prefixCls}-body`}>\n                    <Icon type={iconType} />\n                    <span className={`${prefixCls}-title`}>{props.title}</span>\n                    <div className={`${prefixCls}-content`}>{props.content}</div>\n                </div>\n                <div className={`${prefixCls}-btns`}>\n                    {cancelButton}\n                    <ActionButton type={okType} actionFn={onOk} closeModal={close} autoFocus>\n                        {okText}\n                    </ActionButton>\n                </div>\n            </div>\n        </Dialog>\n    );\n};\n\nexport default function confirm(config) {\n    const div = document.createElement('div');\n    document.body.appendChild(div);\n\n    function destroy(...args) {\n        const unmountResult = ReactDOM.unmountComponentAtNode(div);\n        if (unmountResult && div.parentNode) {\n            div.parentNode.removeChild(div);\n        }\n        const triggerCancel = args && args.length &&\n            args.some(param => param && param.triggerCancel);\n        if (config.onCancel && triggerCancel) {\n            config.onCancel(...args);\n        }\n    }\n\n    function render(props) {\n        ReactDOM.render(<ConfirmDialog {...props} />, div);\n    }\n\n    function close(...args) {\n        if (IS_REACT_16) {\n            render({ ...config, close, visible: false, afterClose: destroy.bind(this, ...args) });\n        } else {\n            destroy(...args);\n        }\n    }\n\n\n    render({ ...config, visible: true, close });\n\n    return {\n        destroy: close,\n    };\n}\nconfirm.defaultProps = {\n    prefixCls: 'jc-modal',\n    width: 520,\n    transitionName: 'zoom',\n    maskTransitionName: 'fade',\n    confirmLoading: false,\n    visible: false,\n    okType: 'primary',\n\n};\n\nconfirm.propTypes = {\n    mousePosition: PropTypes.oneOfType([PropTypes.number, PropTypes.oneOf([null])]),\n    mousePositionEventBinded: PropTypes.bool,\n    prefixCls: PropTypes.string,\n    onOk: PropTypes.func,\n    onCancel: PropTypes.func,\n    okText: PropTypes.node,\n    cancelText: PropTypes.node,\n    width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n    confirmLoading: PropTypes.bool,\n    visible: PropTypes.bool,\n    align: PropTypes.object,\n    footer: PropTypes.node,\n    title: PropTypes.node,\n    closable: PropTypes.bool,\n    maskClosable: PropTypes.bool,\n    destroyOnClose: PropTypes.bool,\n    wrapClassName: PropTypes.string,\n    maskTransitionName: PropTypes.string,\n    transitionName: PropTypes.string,\n    className: PropTypes.string,\n    zIndex: PropTypes.number,\n    mask: PropTypes.bool,\n    keyboard: PropTypes.bool,\n    iconClassName: PropTypes.string,\n    iconType: PropTypes.string,\n    okCancel: PropTypes.bool,\n    type: PropTypes.string,\n    okType: PropTypes.string,\n};\n"]}