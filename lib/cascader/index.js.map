{"version":3,"sources":["../../components/cascader/index.js"],"names":["React","highlightKeyword","str","keyword","prefixCls","split","map","node","index","defaultFilterOption","inputValue","path","some","option","label","indexOf","defaultRenderFilteredOption","defaultSortFilteredOption","a","b","callback","elem","findIndex","defaultDisplayRender","join","Cascader","props","handleChange","value","selectedOptions","setState","__IS_FILTERED_OPTION","unwrappedValue","unwrappedSelectedOptions","setValue","handlePopupVisibleChange","popupVisible","inputFocused","state","onPopupVisibleChange","handleInputBlur","handleInputClick","e","stopPropagation","nativeEvent","stopImmediatePropagation","handleKeyDown","keyCode","BACKSPACE","handleInputChange","target","onChange","clearSelection","preventDefault","saveInput","input","defaultValue","flattenOptions","showSearch","flattenTree","options","changeOnSelect","cachedOptions","undefined","nextProps","displayRender","Array","isArray","o","level","ancestor","forEach","concat","children","length","push","notFoundContent","filter","render","sort","filtered","disabled","focus","blur","inputPrefixCls","placeholder","size","className","style","allowClear","otherProps","sizeCls","clearIcon","arrowCls","pickerCls","inputProps","generateFilteredOptions","dropdownMenuColumnStyle","isNotFound","height","resultListMatchInputWidth","Boolean","matchInputWidth","width","offsetWidth","getLabel","Component","defaultProps","transitionName","popupPlacement"],"mappings":"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","file":"index.js","sourcesContent":["/**\r\n * Created by gaoqingli on 2018/4/24.\r\n */\r\nimport * as React from 'react';\r\n\r\nimport RcCascader from 'rc-cascader';\r\n\r\nimport arrayTreeFilter from 'array-tree-filter';\r\n\r\nimport classNames from 'classnames';\r\n\r\nimport omit from 'omit.js';\r\n\r\nimport KeyCode from 'rc-util/lib/KeyCode';\r\n\r\nimport Input from '../input';\r\n\r\nimport Icon from '../icon';\r\n\r\n\r\nfunction highlightKeyword(str, keyword, prefixCls) {\r\n    return str.split(keyword)\r\n        .map((node, index) => {\r\n            return index === 0 ? node : [\r\n                <span className={`${prefixCls}-menu-item-keyword`} key='seperator'>{keyword}</span>,\r\n                node,\r\n            ];\r\n        });\r\n}\r\n\r\nfunction defaultFilterOption(inputValue, path) {\r\n    return path.some(option => (option.label).indexOf(inputValue) > -1);\r\n}\r\n\r\nfunction defaultRenderFilteredOption(inputValue, path, prefixCls) {\r\n    return path.map(({ label }, index) => {\r\n        const node = (label).indexOf(inputValue) > -1 ?\r\n            highlightKeyword(label, inputValue, prefixCls) : label;\r\n        return index === 0 ? node : [' / ', node];\r\n    });\r\n}\r\n\r\nfunction defaultSortFilteredOption(a, b, inputValue) {\r\n    function callback(elem) {\r\n        return (elem.label).indexOf(inputValue) > -1;\r\n    }\r\n    return a.findIndex(callback) - b.findIndex(callback);\r\n}\r\n\r\nconst defaultDisplayRender = (label) => { return label.join(' / '); };\r\n\r\nexport default class Cascader extends React.Component {\r\n  static defaultProps = {\r\n      prefixCls: 'jc-cascader',\r\n      inputPrefixCls: 'jc-input',\r\n      placeholder: 'Please select',\r\n      transitionName: 'slide-up',\r\n      popupPlacement: 'bottomLeft',\r\n      options: [],\r\n      disabled: false,\r\n      allowClear: true,\r\n      notFoundContent: 'Not Found',\r\n  };\r\n\r\n\r\n  constructor(props) {\r\n      super(props);\r\n      this.state = {\r\n          value: props.value || props.defaultValue || [],\r\n          inputValue: '',\r\n          inputFocused: false,\r\n          popupVisible: props.popupVisible,\r\n          flattenOptions: props.showSearch && this.flattenTree(props.options, props.changeOnSelect),\r\n      };\r\n      this.cachedOptions = undefined;\r\n      this.input = undefined;\r\n  }\r\n\r\n  componentWillReceiveProps(nextProps) {\r\n      if ('value' in nextProps) {\r\n          this.setState({ value: nextProps.value || [] });\r\n      }\r\n      if ('popupVisible' in nextProps) {\r\n          this.setState({ popupVisible: nextProps.popupVisible });\r\n      }\r\n      if (nextProps.showSearch && this.props.options !== nextProps.options) {\r\n          this.setState({ flattenOptions: this.flattenTree(nextProps.options, nextProps.changeOnSelect) });\r\n      }\r\n  }\r\n\r\n  handleChange = (value, selectedOptions) => {\r\n      this.setState({ inputValue: '' });\r\n      if (selectedOptions[0].__IS_FILTERED_OPTION) {\r\n          const unwrappedValue = value[0];\r\n          const unwrappedSelectedOptions = selectedOptions[0].path;\r\n          this.setValue(unwrappedValue, unwrappedSelectedOptions);\r\n          return;\r\n      }\r\n      this.setValue(value, selectedOptions);\r\n  }\r\n\r\n  handlePopupVisibleChange = (popupVisible) => {\r\n      if (!('popupVisible' in this.props)) {\r\n          this.setState({\r\n              popupVisible,\r\n              inputFocused: popupVisible,\r\n              inputValue: popupVisible ? this.state.inputValue : '',\r\n          });\r\n      }\r\n\r\n      const { onPopupVisibleChange } = this.props;\r\n      if (onPopupVisibleChange) {\r\n          onPopupVisibleChange(popupVisible);\r\n      }\r\n  }\r\n\r\n  handleInputBlur = () => {\r\n      this.setState({\r\n          inputFocused: false,\r\n      });\r\n  }\r\n\r\n  handleInputClick = (e) => {\r\n      const { inputFocused, popupVisible } = this.state;\r\n      // Prevent `Trigger` behaviour.\r\n      if (inputFocused || popupVisible) {\r\n          e.stopPropagation();\r\n          e.nativeEvent.stopImmediatePropagation();\r\n      }\r\n  }\r\n\r\n  handleKeyDown = (e) => {\r\n      if (e.keyCode === KeyCode.BACKSPACE) {\r\n          e.stopPropagation();\r\n      }\r\n  }\r\n\r\n  handleInputChange = (e) => {\r\n      const inputValue = e.target.value;\r\n      this.setState({ inputValue });\r\n  }\r\n\r\n  setValue = (value, selectedOptions = []) => {\r\n      if (!('value' in this.props)) {\r\n          this.setState({ value });\r\n      }\r\n      const { onChange } = this.props;\r\n      if (onChange) {\r\n          onChange(value, selectedOptions);\r\n      }\r\n  }\r\n\r\n  getLabel() {\r\n      const { options, displayRender = defaultDisplayRender } = this.props;\r\n      const { value } = this.state;\r\n      const unwrappedValue = Array.isArray(value[0]) ? value[0] : value;\r\n      const selectedOptions = arrayTreeFilter(options, (o, level) => { return o.value === unwrappedValue[level]; });\r\n      const label = selectedOptions.map((o) => { return o.label; });\r\n      return displayRender(label, selectedOptions);\r\n  }\r\n\r\n  clearSelection = (e) => {\r\n      e.preventDefault();\r\n      e.stopPropagation();\r\n      if (!this.state.inputValue) {\r\n          this.setValue([]);\r\n          this.handlePopupVisibleChange(false);\r\n      } else {\r\n          this.setState({ inputValue: '' });\r\n      }\r\n  }\r\n\r\n  flattenTree(options, changeOnSelect, ancestor = []) {\r\n      let flattenOptions = [];\r\n      options.forEach((option) => {\r\n          const path = ancestor.concat(option);\r\n          if (changeOnSelect || !option.children || !option.children.length) {\r\n              flattenOptions.push(path);\r\n          }\r\n          if (option.children) {\r\n              flattenOptions = flattenOptions.concat(this.flattenTree(option.children, changeOnSelect, path));\r\n          }\r\n      });\r\n      return flattenOptions;\r\n  }\r\n\r\n  generateFilteredOptions(prefixCls) {\r\n      const { showSearch, notFoundContent } = this.props;\r\n      const {\r\n          filter = defaultFilterOption,\r\n          render = defaultRenderFilteredOption,\r\n          sort = defaultSortFilteredOption,\r\n      } = showSearch;\r\n      const { flattenOptions, inputValue } = this.state;\r\n      const filtered = flattenOptions.filter((path) => { return filter(this.state.inputValue, path); })\r\n          .sort((a, b) => sort(a, b, inputValue));\r\n\r\n      if (filtered.length > 0) {\r\n          return filtered.map((path) => {\r\n              return {\r\n                  __IS_FILTERED_OPTION: true,\r\n                  path,\r\n                  label: render(inputValue, path, prefixCls),\r\n                  value: path.map((o) => { return o.value; }),\r\n                  disabled: path.some((o) => { return o.disabled; }),\r\n              };\r\n          });\r\n      }\r\n      return [{ label: notFoundContent, value: 'JC_CASCADER_NOT_FOUND', disabled: true }];\r\n  }\r\n\r\n  focus() {\r\n      this.input.focus();\r\n  }\r\n\r\n  blur() {\r\n      this.input.blur();\r\n  }\r\n\r\n  saveInput = (node) => {\r\n      this.input = node;\r\n  }\r\n\r\n  render() {\r\n      const { props, state } = this;\r\n      const {\r\n          prefixCls, inputPrefixCls, children, placeholder, size, disabled,\r\n          className, style, allowClear, showSearch = false, ...otherProps\r\n      } = props;\r\n      const { value } = state;\r\n\r\n      const sizeCls = classNames({\r\n          [`${inputPrefixCls}-lg`]: size === 'large',\r\n          [`${inputPrefixCls}-sm`]: size === 'small',\r\n      });\r\n      const clearIcon = (allowClear && !disabled && value.length > 0) || state.inputValue ? (\r\n          <Icon\r\n              type='cross-circle'\r\n              className={`${prefixCls}-picker-clear`}\r\n              onClick={this.clearSelection}\r\n          />\r\n      ) : null;\r\n      const arrowCls = classNames({\r\n          [`${prefixCls}-picker-arrow`]: true,\r\n          [`${prefixCls}-picker-arrow-expand`]: state.popupVisible,\r\n      });\r\n      const pickerCls = classNames(className, `${prefixCls}-picker`, {\r\n          [`${prefixCls}-picker-with-value`]: state.inputValue,\r\n          [`${prefixCls}-picker-disabled`]: disabled,\r\n          [`${prefixCls}-picker-${size}`]: !!size,\r\n      });\r\n\r\n      // Fix bug of https://github.com/facebook/react/pull/5004\r\n      // and https://fb.me/react-unknown-prop\r\n      const inputProps = omit(otherProps, [\r\n          'onChange',\r\n          'options',\r\n          'popupPlacement',\r\n          'transitionName',\r\n          'displayRender',\r\n          'onPopupVisibleChange',\r\n          'changeOnSelect',\r\n          'expandTrigger',\r\n          'popupVisible',\r\n          'getPopupContainer',\r\n          'loadData',\r\n          'popupClassName',\r\n          'filterOption',\r\n          'renderFilteredOption',\r\n          'sortFilteredOption',\r\n          'notFoundContent',\r\n      ]);\r\n\r\n      let { options } = props;\r\n      if (state.inputValue) {\r\n          options = this.generateFilteredOptions(prefixCls);\r\n      }\r\n      // Dropdown menu should keep previous status until it is fully closed.\r\n      if (!state.popupVisible) {\r\n          options = this.cachedOptions;\r\n      } else {\r\n          this.cachedOptions = options;\r\n      }\r\n\r\n      const dropdownMenuColumnStyle = {};\r\n      const isNotFound = (options || []).length === 1 && options[0].value === 'JC_CASCADER_NOT_FOUND';\r\n      if (isNotFound) {\r\n          dropdownMenuColumnStyle.height = 'auto'; // Height of one row.\r\n      }\r\n      // The default value of `matchInputWidth` is `true`\r\n      const resultListMatchInputWidth = Boolean(showSearch.matchInputWidth);\r\n      // const resultListMatchInputWidth = (showSearch).matchInputWidth === false ? false : true;\r\n      if (resultListMatchInputWidth && state.inputValue && this.input) {\r\n          dropdownMenuColumnStyle.width = this.input.input.offsetWidth;\r\n      }\r\n\r\n      const input = children || (\r\n          <span\r\n              style={style}\r\n              className={pickerCls}\r\n          >\r\n              <span className={`${prefixCls}-picker-label`}>\r\n                  {this.getLabel()}\r\n              </span>\r\n              <Input\r\n                  {...inputProps}\r\n                  ref={this.saveInput}\r\n                  prefixCls={inputPrefixCls}\r\n                  placeholder={value && value.length > 0 ? undefined : placeholder}\r\n                  className={`${prefixCls}-input ${sizeCls}`}\r\n                  value={state.inputValue}\r\n                  disabled={disabled}\r\n                  readOnly={!showSearch}\r\n                  autoComplete='off'\r\n                  onClick={showSearch ? this.handleInputClick : undefined}\r\n                  onBlur={showSearch ? this.handleInputBlur : undefined}\r\n                  onKeyDown={this.handleKeyDown}\r\n                  onChange={showSearch ? this.handleInputChange : undefined}\r\n              />\r\n              {clearIcon}\r\n              <Icon type='down' className={arrowCls} />\r\n          </span>\r\n      );\r\n\r\n      return (\r\n          <RcCascader\r\n              {...props}\r\n              options={options}\r\n              value={value}\r\n              popupVisible={state.popupVisible}\r\n              onPopupVisibleChange={this.handlePopupVisibleChange}\r\n              onChange={this.handleChange}\r\n              dropdownMenuColumnStyle={dropdownMenuColumnStyle}\r\n          >\r\n              {input}\r\n          </RcCascader>\r\n      );\r\n  }\r\n}\r\n"]}