{"version":3,"sources":["../../components/tag/index.js"],"names":["React","ReactDOM","Tag","props","close","e","onClose","defaultPrevented","dom","findDOMNode","style","width","getBoundingClientRect","setState","closing","animationEnd","_","existed","state","closed","afterClose","color","test","prefixCls","closable","className","children","otherProps","closeIcon","isPresetColor","classString","divProps","tagStyle","backgroundColor","tag","Component","CheckableTag","defaultProps"],"mappings":"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","file":"index.js","sourcesContent":["import * as React from 'react';\nimport * as ReactDOM from 'react-dom';\nimport Animate from 'rc-animate';\nimport classNames from 'classnames';\nimport omit from 'omit.js';\nimport Icon from '../icon';\nimport CheckableTag from './CheckableTag';\n\nexport default class Tag extends React.Component {\n  static CheckableTag = CheckableTag;\n  static defaultProps = {\n    prefixCls: 'jc-tag',\n    closable: false,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      closing: false,\n      closed: false,\n    };\n  }\n\n  close = (e) => {\n    const onClose = this.props.onClose;\n    if (onClose) {\n      onClose(e);\n    }\n    if (e.defaultPrevented) {\n      return;\n    }\n    const dom = ReactDOM.findDOMNode(this);\n    dom.style.width = `${dom.getBoundingClientRect().width}px`;\n    // It's Magic Code, don't know why\n    dom.style.width = `${dom.getBoundingClientRect().width}px`;\n    this.setState({\n      closing: true,\n    });\n  }\n\n  animationEnd = (_, existed) => {\n    if (!existed && !this.state.closed) {\n      this.setState({\n        closed: true,\n        closing: false,\n      });\n\n      const afterClose = this.props.afterClose;\n      if (afterClose) {\n        afterClose();\n      }\n    }\n  }\n\n  isPresetColor(color) {\n    if (!color) { return false; }\n    return (\n      /^(pink|red|yellow|orange|cyan|green|blue|purple|geekblue|magenta|volcano|gold|lime)(-inverse)?$/\n      .test(color)\n    );\n  }\n\n  render() {\n    const { prefixCls, closable, color, className, children, style, ...otherProps } = this.props;\n    const closeIcon = closable ? <Icon type=\"cross\" onClick={this.close} /> : '';\n    const isPresetColor = this.isPresetColor(color);\n    const classString = classNames(prefixCls, {\n      [`${prefixCls}-${color}`]: isPresetColor,\n      [`${prefixCls}-has-color`]: (color && !isPresetColor),\n      [`${prefixCls}-close`]: this.state.closing,\n    }, className);\n    // fix https://fb.me/react-unknown-prop\n    const divProps = omit(otherProps, [\n      'onClose',\n      'afterClose',\n    ]);\n    const tagStyle = {\n      backgroundColor: (color && !isPresetColor) ? color : null,\n      ...style,\n    };\n    const tag = this.state.closed ? null : (\n      <div\n        data-show={!this.state.closing}\n        {...divProps}\n        className={classString}\n        style={tagStyle}\n      >\n        {children}\n        {closeIcon}\n      </div>\n    );\n    return (\n      <Animate\n        component=\"\"\n        showProp=\"data-show\"\n        transitionName={`${prefixCls}-zoom`}\n        transitionAppear\n        onEnd={this.animationEnd}\n      >\n        {tag}\n      </Animate>\n    );\n  }\n}\n"]}