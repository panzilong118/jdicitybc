{"version":3,"sources":["../../components/tag/index.js"],"names":["React","ReactDOM","Tag","props","close","e","onClose","defaultPrevented","dom","findDOMNode","style","width","getBoundingClientRect","setState","closing","animationEnd","_","existed","state","closed","afterClose","color","test","prefixCls","closable","className","children","otherProps","closeIcon","isPresetColor","classString","divProps","tagStyle","backgroundColor","tag","Component","CheckableTag","defaultProps"],"mappings":"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","file":"index.js","sourcesContent":["import * as React from 'react';\r\nimport * as ReactDOM from 'react-dom';\r\nimport Animate from 'rc-animate';\r\nimport classNames from 'classnames';\r\nimport omit from 'omit.js';\r\nimport Icon from '../icon';\r\nimport CheckableTag from './CheckableTag';\r\n\r\nexport default class Tag extends React.Component {\r\n  static CheckableTag = CheckableTag;\r\n  static defaultProps = {\r\n    prefixCls: 'jc-tag',\r\n    closable: false,\r\n  };\r\n\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      closing: false,\r\n      closed: false,\r\n    };\r\n  }\r\n\r\n  close = (e) => {\r\n    const onClose = this.props.onClose;\r\n    if (onClose) {\r\n      onClose(e);\r\n    }\r\n    if (e.defaultPrevented) {\r\n      return;\r\n    }\r\n    const dom = ReactDOM.findDOMNode(this);\r\n    dom.style.width = `${dom.getBoundingClientRect().width}px`;\r\n    // It's Magic Code, don't know why\r\n    dom.style.width = `${dom.getBoundingClientRect().width}px`;\r\n    this.setState({\r\n      closing: true,\r\n    });\r\n  }\r\n\r\n  animationEnd = (_, existed) => {\r\n    if (!existed && !this.state.closed) {\r\n      this.setState({\r\n        closed: true,\r\n        closing: false,\r\n      });\r\n\r\n      const afterClose = this.props.afterClose;\r\n      if (afterClose) {\r\n        afterClose();\r\n      }\r\n    }\r\n  }\r\n\r\n  isPresetColor(color) {\r\n    if (!color) { return false; }\r\n    return (\r\n      /^(pink|red|yellow|orange|cyan|green|blue|purple|geekblue|magenta|volcano|gold|lime)(-inverse)?$/\r\n      .test(color)\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { prefixCls, closable, color, className, children, style, ...otherProps } = this.props;\r\n    const closeIcon = closable ? <Icon type=\"cross\" onClick={this.close} /> : '';\r\n    const isPresetColor = this.isPresetColor(color);\r\n    const classString = classNames(prefixCls, {\r\n      [`${prefixCls}-${color}`]: isPresetColor,\r\n      [`${prefixCls}-has-color`]: (color && !isPresetColor),\r\n      [`${prefixCls}-close`]: this.state.closing,\r\n    }, className);\r\n    // fix https://fb.me/react-unknown-prop\r\n    const divProps = omit(otherProps, [\r\n      'onClose',\r\n      'afterClose',\r\n    ]);\r\n    const tagStyle = {\r\n      backgroundColor: (color && !isPresetColor) ? color : null,\r\n      ...style,\r\n    };\r\n    const tag = this.state.closed ? null : (\r\n      <div\r\n        data-show={!this.state.closing}\r\n        {...divProps}\r\n        className={classString}\r\n        style={tagStyle}\r\n      >\r\n        {children}\r\n        {closeIcon}\r\n      </div>\r\n    );\r\n    return (\r\n      <Animate\r\n        component=\"\"\r\n        showProp=\"data-show\"\r\n        transitionName={`${prefixCls}-zoom`}\r\n        transitionAppear\r\n        onEnd={this.animationEnd}\r\n      >\r\n        {tag}\r\n      </Animate>\r\n    );\r\n  }\r\n}\r\n"]}